load("@npm_e2e_tests//:defs.bzl", "npm_link_all_packages")
load("@npm_e2e_tests//pkg/ui/workspaces/e2e-tests:eslint/package_json.bzl", eslint_bin = "bin")

exports_files(
    [
        "yarn.lock",
    ],
    visibility = ["//visibility:public"],
)

npm_link_all_packages(name = "node_modules")

eslint_bin.eslint_test(
    name = "lint",
    args = [
        "--ext .ts",
        "-c",
        "$(rootpath .eslintrc.json)",
        "$(rootpath cypress)",
        "$(rootpath cypress.config.ts)",
    ],
    copy_data_to_bin = False,
    data = [
        ".eslintrc.json",
        "cypress",
        "cypress.config.ts",
        ":node_modules/@cockroachlabs/eslint-config",
        ":node_modules/@typescript-eslint/eslint-plugin",
        ":node_modules/@typescript-eslint/parser",
        ":node_modules/eslint-config-prettier",
        ":node_modules/eslint-plugin-prettier",
        ":node_modules/eslint-plugin-react",
        ":node_modules/eslint-plugin-react-hooks",
        ":node_modules/prettier",
        "//pkg/ui/workspaces/eslint-plugin-crdb",
    ],
)
