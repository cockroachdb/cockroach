{{template "layout-start" .}}
<style>
.u-tooltip {
  position: absolute;
  display: none;
  background: var(--box-bg);
  color: var(--fg);
  border: 1px solid var(--muted-fg);
  padding: 8px;
  border-radius: 4px;
  font-size: 12px;
  pointer-events: none;
  z-index: 1000;
}
.u-time {
  margin-bottom: 4px;
  font-weight: bold;
}
.u-series {
  display: flex;
  align-items: center;
  gap: 6px;
}
.u-marker {
  width: 10px;
  height: 10px;
}
.u-label {
  font-weight: 500;
}
.u-legend tbody {
  max-height: 300px;
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  align-items: flex-start;
  align-content: flex-start;
  overflow: auto;
  border: 0;
}
.u-legend tbody > tr {
  display: flex;
  flex-direction: row;
  align-items: flex-end;
}
.u-legend tbody > tr:first-child {
  flex-basis: 100%;
  text-align: left;
  color: #808080;
}
.u-legend tbody > tr:first-child .u-marker {
  display: none;
}
.u-legend .u-marker {
  width: 1em;
  height: 1em;
  margin-right: 4px;
  background-clip: padding-box !important;
}
.status {
  padding: 10px;
  margin: 10px;
  border-radius: 4px;
}
.status.loading {
  background: var(--box-bg);
  color: var(--muted-fg);
  border: 1px solid var(--muted-fg);
}
.status.error {
  background: var(--error-bg);
  color: var(--error-fg);
  border: 1px solid var(--error-fg);
}
.status.success {
  background: var(--ok-bg);
  color: var(--ok-fg);
  border: 1px solid var(--ok-fg);
}
</style>
<nav class="breadcrumbs" aria-label="Breadcrumbs">
  <ul>
    <li class="<h1>">Metrics</li>
    <li class="<h2>">{{.Data.DashboardDisplayName}}</li>
  </ul>
</nav>
<div class="box flex-row">
  <form class="flex-row">
    <div>
      <label for="dashboard">Dashboard:</label>
      <select
        name="dashboard"
        id="dashboard"
        hx-get="/future/metrics/{value}"
        hx-target="body"
        hx-push-url="true">
        {{range .Data.AllDashboards}}
        <option value="{{.Name}}" {{if eq .Name $.Data.DashboardName}}selected{{end}}>{{.DisplayName}}</option>
        {{end}}
      </select>
    </div>
  </form>
  <form class="flex-row" x-data>
    <div>
      <label for=category>Interval:</label>
      <select
        id=category
        placeholder="Select a category..."
        x-model="$store.timeRange.interval"
        @change="$store.timeRange.handleIntervalChange()">
        <option>Last 10m</option>
        <option>Last 30m</option>
        <option>Last 1h</option>
        <option>Custom</option>
      </select>
    </div>
    <div>
      <label for="start-time">Start:</label>
      <input
        type="datetime-local"
        id="start-time"
        name="start-time"
        x-model="$store.timeRange.startTime"
        :disabled="$store.timeRange.interval !== 'Custom'" />
    </div>
    <div>
      <label for="end-time">End:</label>
      <input
        type="datetime-local"
        id="end-time"
        name="end-time"
        x-model="$store.timeRange.endTime"
        :disabled="$store.timeRange.interval !== 'Custom'" />
    </div>
  </form>
</div>
<div class="flex-switch">
  <div>
    {{range .Data.Graphs}}
    <figure
      x-data="metricGraph()"
      data-metrics='{{.Metrics | json}}'
      data-axis='{"units":"{{.Units}}","label":"{{.UnitsLabel}}"}'>
      <figcaption x-data="{open: false}">
        <div x-ref="caption" @mouseenter="open = true" @mouseleave="open = false" class="text-align:center">
          {{.Title}}
        </div>
        {{if .Tooltip}}
        <small role="tooltip" class="box crowded" x-show="open" x-anchor="$refs.caption" style="z-index: 1">
          <p>{{.Tooltip}}</p>
        </small>
        {{end}}
      </figcaption>
      <div class="graph-container"></div>
    </figure>
    {{end}}
  </div>
  <div class="flex-column padding-block-start">
    <div class="box info">New Version Available</div>
    <div class="box">Summary</div>
    <div class="box">Events</div>
  </div>
</div>

{{template "layout-end" .}}
