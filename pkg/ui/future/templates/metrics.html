{{template "layout-start" .}}
<style>
.u-tooltip {
  position: absolute;
  display: none;
  background: var(--box-bg);
  color: var(--fg);
  border: 1px solid var(--muted-fg);
  padding: var(--gap);
  border-radius: var(--border-radius);
  font-size: 0.8rem;
  pointer-events: none;
  z-index: 1000;
}
.u-time {
  margin-bottom: var(--gap);
  font-weight: bold;
}
.u-series {
  display: flex;
  align-items: center;
  gap: var(--gap);
}
.u-marker {
  width: 1rem;
  height: 1rem;
}
.u-label {
  font-weight: 500;
}
.u-legend tbody {
  max-height: 300px;
  display: flex;
  flex-wrap: wrap;
  flex-direction: row;
  align-items: flex-start;
  align-content: flex-start;
  overflow: auto;
  border: 0;
}
.u-legend tbody > tr {
  display: flex;
  flex-direction: row;
  align-items: flex-end;
}
.u-legend tbody > tr:first-child {
  flex-basis: 100%;
  text-align: left;
  color: var(--muted-fg);
}
.u-legend tbody > tr:first-child .u-marker {
  display: none;
}
.u-legend .u-marker {
  width: 1rem;
  height: 1rem;
  margin-right: var(--gap);
  background-clip: padding-box !important;
}
</style>
<nav class="breadcrumbs" aria-label="Breadcrumbs">
  <ul>
    <li class="<h1>">Metrics</li>
    <li class="<h2>">{{.Data.DashboardDisplayName}}</li>
  </ul>
</nav>
<div class="box flex-row">
  <div>
    <label for="dashboard">Dashboard:</label>
    <select
      name="dashboard"
      id="dashboard"
      hx-get="/future/metrics"
      hx-target="body"
      hx-push-url="true"
      hx-include="[name='node']">
      {{range .Data.AllDashboards}}
      <option value="{{.Name}}" {{if eq .Name $.Data.DashboardName}}selected{{end}}>{{.DisplayName}}</option>
      {{end}}
    </select>
  </div>
  <div>
    <label for="node">Node:</label>
    <select
      name="node"
      id="node"
      hx-get="/future/metrics"
      hx-target="body"
      hx-push-url="true"
      hx-include="[name='dashboard']">
      <option value="" {{if eq .Data.SelectedNode ""}}selected{{end}}>Cluster</option>
      {{range .Data.Nodes}}
      <option value="{{.NodeID}}" {{if eq .NodeID $.Data.SelectedNode}}selected{{end}}>{{.Address}} (n{{.NodeID}})</option>
      {{end}}
    </select>
  </div>
  <form class="flex-row" x-data>
    <div>
      <label for=category>Interval:</label>
      <select
        id=category
        placeholder="Select a category..."
        x-model="$store.timeRange.interval">
        <option value="10m">Past 10m</option>
        <option value="30m">Past 30m</option>
        <option value="1h">Past Hour</option>
        <option value="6h">Past 6 Hours</option>
        <option value="1d">Past Day</option>
        <option value="2d">Past 2 Days</option>
        <option value="3d">Past 3 Days</option>
        <option value="1w">Past Week</option>
        <option value="2w">Past 2 Weeks</option>
        <option value="1m">Past Month</option>
        <option value="2m">Past 2 Months</option>
        <hr>
        <option value="custom">Custom time interval</option>
      </select>
    </div>
    <div>
      <label for="start-time">Start:</label>
      <input
        type="datetime-local"
        id="start-time"
        name="start-time"
        x-model="$store.timeRange.startFormatted"
        :disabled="$store.timeRange.interval !== 'custom'" >
    </div>
    <div>
      <label for="end-time">End:</label>
      <input
        type="datetime-local"
        id="end-time"
        name="end-time"
        x-model="$store.timeRange.endFormatted"
        :disabled="$store.timeRange.interval !== 'custom'" >
    </div>
  </form>
</div>
<div class="flex-switch">
  <div class="flex-grow:2">
    {{range .Data.Graphs}}
    <figure
      x-data="metricGraph()"
      data-metrics='{{.Metrics | json}}'
      data-axis='{"units":"{{.Units}}","label":"{{.UnitsLabel}}"}'>
      <figcaption x-data="{open: false}">
        <div x-ref="caption" @mouseenter="open = true" @mouseleave="open = false" class="text-align:center">
          {{.Title}}
        </div>
        {{if .Tooltip}}
        <small role="tooltip" class="box crowded" x-show="open" x-anchor="$refs.caption" style="z-index: 1">
          <p>{{.Tooltip}}</p>
        </small>
        {{end}}
      </figcaption>
      <div class="graph-container"></div>
    </figure>
    {{end}}
  </div>
  <div class="flex-column padding-block-start crowded">
    <div class="box info"><strong>New Version Available</strong>
<p>A new version of CockroachDB is available.</p>
<a href="https://www.cockroachlabs.com/docs/stable/upgrade-cockroach-version.html">Learn More</a></div>
    <div class="box">
      <h4 class="text-align:center">Summary</h4>
      <dl class="table rows" style="width: auto;">
        <div><dt>Total Nodes (<a href="/future/overview">View nodes list</a>):</dt><dd>9</dd></div>
        <div><dt>Capacity Usage: <p><small>You are using 0B of 4.5 GiB usage disk capacity across all nodes.</small></p></dt><dd>0.00%</dd></div>
        <div><dt>Unavailable Ranges</dt><dd>0</dd></div>
        <div><dt>Queries per second<p><small>
Sum of Selects, Updates, Inserts, and Deletes across your entire cluster.</small></p>
        </dt><dd>31.7</dd></div>
        <div><dt>P99 latency</dt><dd>14.2 ms</dd></div>
      </dl>
    </div>
    <div class="box">
      <h4 class="text-align:center">Events</h4>
      <article>
        Schema Change Completed: Schema change on descriptor 110 was completed.
<p><small>Nov 18, 2025 at 20:37 UTC</small></p></article><article>
Schema Change: User root began a schema change to create an index promo_codes_idx_europe_west on table movr.public.promo_codes with ID 1
<p><small>Nov 18, 2025 at 20:37 UTC</small></p></article>
    </div>
  </div>
</div>

{{template "layout-end" .}}
