# a nemesis that stops and restarts a node.
role nemesis
  # --tag is needed because of issue https://github.com/cockroachdb/cockroach/issues/40667
  # unset-unused is needed because of issue https://github.com/cockroachdb/cockroach/issues/40597
  :start_event export HOME=$ROACHPROD_HOME/.. TMPDIR=/tmp; \\
         eval $(unset-unused.sh); \\
         $ROACHPROD stop $CLUSTER:$CENTER_MAPPING --sig 9 --tag node --wait
  :end_event export HOME=$ROACHPROD_HOME/.. TMPDIR=/tmp; \\
         eval $(unset-unused.sh); \\
         $ROACHPROD start $CLUSTER:$CENTER_MAPPING --tag node
end
title killing and restarting nodes
