attention blue period is considered ramp-up, used to calibrate expectations

audience
  ref audits only while mood == 'blue'
  ref collects tp_ref_values as last 5 [w1 throughput]
  ref computes tp_ref as avg(tp_ref_values)
  # we want to see at least one measurement. No measurements
  # indicates either the workload did not start properly, or
  # the signal regexp is not working.
  ref expects eventually: count(tp_ref_values) > 0
  ref only helps

  # disable the default visualizers - too much jitter there
  throughput only helps
  latency only helps

  throughput_ok audits only while mood != 'blue'
  throughput_ok collects w1_tp_vals as last 10 [w1 throughput]
  throughput_ok computes w1_tp as avg(w1_tp_vals)
  throughput_ok expects always: w1_tp >= (tp_ref / 2)
  throughput_ok watches w1_tp
  throughput_ok watches tp_ref
  throughput_ok measures newOrder ops/s (avg)

  latency_ok   audits only while mood != 'blue'
  latency_ok   collects w1_lat99_vals as last 10 [w1 lat99]
  latency_ok   computes w1_lat99 as avg(w1_lat99_vals)
  latency_ok   expects always: w1_lat99 <= 150
  latency_ok   watches w1_lat99
  latency_ok   measures newOrder lat (ms)

  tpcc_imports watches every worker import
  tpcc_imports watches every worker error
end

script
  # ensure ramp-up period of at least 10 seconds
  edit s/c/.........c/
end
