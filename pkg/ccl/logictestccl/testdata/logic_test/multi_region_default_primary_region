# LogicTest: multiregion-9node-3region-3azs

# Test invalid default primary region name.

statement ok
SET CLUSTER SETTING sql.defaults.primary_region = "invalid-region-name"

statement error region "invalid-region-name" does not exist
CREATE DATABASE db

statement ok
SET CLUSTER SETTING sql.defaults.primary_region = 'ap-southeast-2'

# If users have regions defined, still error if PRIMARY REGION is not set

statement error PRIMARY REGION must be specified if REGIONS are specified
CREATE DATABASE db REGIONS "us-east1"

query T noticetrace
CREATE DATABASE db
----
NOTICE: setting ap-southeast-2 as the PRIMARY REGION as no PRIMARY REGION was specified

query TTBT colnames
SHOW REGIONS FROM DATABASE db
----
database  region          primary  zones
db        ap-southeast-2  true     {ap-az1,ap-az2,ap-az3}

statement ok
CREATE DATABASE db_explicit_primary_region PRIMARY REGION "us-east-1"

query TTBT colnames
SHOW REGIONS FROM DATABASE db_explicit_primary_region
----
database                    region     primary  zones
db_explicit_primary_region  us-east-1  true     {us-az1,us-az2,us-az3}
