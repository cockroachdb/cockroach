/* setup */
CREATE DATABASE multiregion_db PRIMARY REGION "us-east1" REGIONS "us-east2", "us-east3";
CREATE TABLE multiregion_db.public.t (  
  pk INT PRIMARY KEY,
  i INT NOT NULL,
  j STRING,
  INDEX(i)
) LOCALITY GLOBAL;

/* test */
EXPLAIN (DDL) ALTER TABLE multiregion_db.t SET LOCALITY REGIONAL BY TABLE IN "us-east2";
----
Schema change plan for ALTER TABLE ‹multiregion_db›.‹t› SET LOCALITY REGIONAL BY TABLE IN ‹"us-east2"›;
 ├── StatementPhase
 │    └── Stage 1 of 1 in StatementPhase
 │         ├── 2 elements transitioning toward PUBLIC
 │         │    ├── ABSENT → PUBLIC TableLocalitySecondaryRegion:{DescID: 108 (t), ReferencedDescID: 106 (crdb_internal_region), Value: us-east2}
 │         │    └── ABSENT → PUBLIC TableZoneConfig:{DescID: 108 (t), SeqNum: 1}
 │         ├── 1 element transitioning toward ABSENT
 │         │    └── PUBLIC → ABSENT TableLocalityGlobal:{DescID: 108 (t)}
 │         └── 4 Mutation operations
 │              ├── UnsetTableLocality {"TableID":108}
 │              ├── SetTableLocalitySecondaryRegion {"RegionEnumTypeID":106,"RegionName":"us-east2","TableID":108}
 │              ├── UpdateTableBackReferencesInTypes {"BackReferencedTableID":108}
 │              └── AddTableZoneConfig {"TableID":108}
 └── PreCommitPhase
      ├── Stage 1 of 2 in PreCommitPhase
      │    ├── 2 elements transitioning toward PUBLIC
      │    │    ├── PUBLIC → ABSENT TableLocalitySecondaryRegion:{DescID: 108 (t), ReferencedDescID: 106 (crdb_internal_region), Value: us-east2}
      │    │    └── PUBLIC → ABSENT TableZoneConfig:{DescID: 108 (t), SeqNum: 1}
      │    ├── 1 element transitioning toward ABSENT
      │    │    └── ABSENT → PUBLIC TableLocalityGlobal:{DescID: 108 (t)}
      │    └── 1 Mutation operation
      │         └── UndoAllInTxnImmediateMutationOpSideEffects
      └── Stage 2 of 2 in PreCommitPhase
           ├── 2 elements transitioning toward PUBLIC
           │    ├── ABSENT → PUBLIC TableLocalitySecondaryRegion:{DescID: 108 (t), ReferencedDescID: 106 (crdb_internal_region), Value: us-east2}
           │    └── ABSENT → PUBLIC TableZoneConfig:{DescID: 108 (t), SeqNum: 1}
           ├── 1 element transitioning toward ABSENT
           │    └── PUBLIC → ABSENT TableLocalityGlobal:{DescID: 108 (t)}
           └── 4 Mutation operations
                ├── UnsetTableLocality {"TableID":108}
                ├── SetTableLocalitySecondaryRegion {"RegionEnumTypeID":106,"RegionName":"us-east2","TableID":108}
                ├── UpdateTableBackReferencesInTypes {"BackReferencedTableID":108}
                └── AddTableZoneConfig {"TableID":108}
