/* setup */
CREATE DATABASE multiregion_db PRIMARY REGION "us-east1" REGIONS "us-east2", "us-east3";
CREATE TABLE multiregion_db.public.t (  
  pk INT PRIMARY KEY,
  i INT NOT NULL,
  j STRING,
  INDEX(i)
) LOCALITY REGIONAL BY TABLE;
----
...
+database {0 0 multiregion_db} -> 104
+schema {104 0 public} -> 105
+object {104 105 crdb_internal_region} -> 106
+object {104 105 _crdb_internal_region} -> 107
+object {104 105 t} -> 108

/* test */
ALTER TABLE multiregion_db.t SET LOCALITY GLOBAL;
----
begin transaction #1
# begin StatementPhase
checking for feature: ALTER TABLE
increment telemetry for sql.multiregion.alter_table.locality.from.regional_by_table.to.global
## StatementPhase stage 1 of 1 with 3 MutationType ops
upsert descriptor #108
  ...
       version: 3
     localityConfig:
  -    regionalByTable: {}
  +    global: {}
     modificationTime: {}
     name: t
  ...
     schemaLocked: true
     unexposedParentSchemaId: 105
  -  version: "1"
  +  version: "2"
upsert zone config for #108
# end StatementPhase
# begin PreCommitPhase
## PreCommitPhase stage 1 of 2 with 1 MutationType op
undo all catalog changes within txn #1
persist all catalog changes to storage
## PreCommitPhase stage 2 of 2 with 3 MutationType ops
upsert descriptor #108
  ...
       version: 3
     localityConfig:
  -    regionalByTable: {}
  +    global: {}
     modificationTime: {}
     name: t
  ...
     schemaLocked: true
     unexposedParentSchemaId: 105
  -  version: "1"
  +  version: "2"
upsert zone config for #108
persist all catalog changes to storage
# end PreCommitPhase
commit transaction #1
