# Setup:
# Create a database with some tables, types, and schemas inside it. Then, generate
# span configurations implied by the database.

exec-sql
CREATE DATABASE db;
CREATE TABLE db.t1();
CREATE TYPE typ AS ENUM();
CREATE SCHEMA sc;
CREATE TABLE db.t2();
ALTER DATABASE db CONFIGURE ZONE USING num_replicas=7;
ALTER TABLE db.t1 CONFIGURE ZONE USING num_voters=5;
----

query-sql
SELECT id FROM system.namespace WHERE name='db'
----
52

query-sql
SELECT id FROM system.namespace WHERE name='t1'
----
53

query-sql
SELECT id FROM system.namespace WHERE name='t2'
----
57

# We only expect there to be span config entries for tables t1 and t2.
reconcile id=52
----
Span: /Table/5{3-4}
rangeminbytes: 134217728
rangemaxbytes: 536870912
gcpolicy:
  ttlseconds: 90000
globalreads: false
numreplicas: 7
numvoters: 5
constraints: []
voterconstraints: []
leasepreferences: []
-----------------------
Span: /Table/5{7-8}
rangeminbytes: 134217728
rangemaxbytes: 536870912
gcpolicy:
  ttlseconds: 90000
globalreads: false
numreplicas: 7
numvoters: 7
constraints: []
voterconstraints: []
leasepreferences: []
-----------------------
