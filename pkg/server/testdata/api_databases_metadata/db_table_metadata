sql
INSERT INTO system.table_metadata
  (db_id,
  db_name,
  table_id,
  table_name,
  replication_size_bytes,
  total_ranges,
  total_live_data_bytes,
  total_data_bytes,
  perc_live_data,
  total_columns,
  total_indexes,
  store_ids,
  last_update_error,
  last_updated)
VALUES
(1, 'myDB1', 1, 'myTable1', 10001, 19, 509, 1000, .509, 11, 1, ARRAY[1, 2, 3], null, '2025-06-20T00:00:00Z'),
(1, 'myDB1', 2, 'myTable2', 10002, 18, 519, 1000, .519, 16, 5, ARRAY[1, 5, 6], null, '2025-06-20T00:00:01Z'),
(1, 'myDB1', 3, 'myTable3', 10003, 17, 510, 1000, .510, 17, 5, ARRAY[1, 8, 9], null, '2025-06-20T00:00:02Z'),
(1, 'myDB1', 4, 'myTable4', 10004, 16, 520, 1000, .52, 18, 5, ARRAY[2, 3], null, '2025-06-20T00:00:03Z'),
(1, 'myDB1', 5, 'myTable5', 10005, 15, 511, 1000, .511, 13, 5, ARRAY[5, 2], null, '2025-06-20T00:00:04Z'),
(1, 'myDB1', 6, 'myTable6', 10006, 14, 522, 1000, .522, 19, 2, ARRAY[7], null, '2025-06-20T00:00:05Z'),
(1, 'myDB1', 7, 'myTable7', 10007, 13, 512, 1000, .512, 14, 5, ARRAY[9], null, '2025-06-20T00:00:06Z'),
(1, 'myDB1', 8, 'myTable8', 10008, 12, 523, 1000, .523, 20, 5, ARRAY[3], null, '2025-06-20T00:00:07Z'),
(1, 'myDB1', 9, 'myTable9', 10009, 11, 513, 1000, .513, 15, 3, ARRAY[2], null, '2025-06-20T00:00:08Z'),
(1, 'myDB1', 10, 'myTable10', 10001, 10, 523, 1000, .523, 10, 5, ARRAY[1], null, '2025-06-20T00:00:09Z'),
(2, 'myDB2', 11, 'myTable11', 10001, 19, 509, 1000, .509, 11, 1, ARRAY[1, 2, 3], null, '2025-06-20T00:00:10Z'),
(2, 'myDB2', 12, 'myTable12', 10001, 19, 509, 1000, .509, 11, 1, ARRAY[1, 2, 3], null, '2025-06-20T00:00:11Z'),
(2, 'myDB2', 13, 'myTable13', 10001, 19, 509, 1000, .509, 11, 1, ARRAY[1, 2, 3], null, '2025-06-20T00:00:12Z')
----

# Returns Method Not Allowed error
req
{
  "method": "POST",
  "uri": "/api/v2/metadata/database/1/tables/"
}
----
{
 "status_code": 405,
 "body": "Method Not Allowed\n"
}


# returns tables from db with id 1
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   },
   {
    "column_count": 17,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:02Z",
    "percent_live_data": "0.510",
    "range_count": 17,
    "replication_size_bytes": 10003,
    "store_ids": [
     1,
     8,
     9
    ],
    "table_id": 3,
    "table_name": "myTable3",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 510
   },
   {
    "column_count": 18,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:03Z",
    "percent_live_data": "0.52",
    "range_count": 16,
    "replication_size_bytes": 10004,
    "store_ids": [
     2,
     3
    ],
    "table_id": 4,
    "table_name": "myTable4",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 520
   },
   {
    "column_count": 13,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:04Z",
    "percent_live_data": "0.511",
    "range_count": 15,
    "replication_size_bytes": 10005,
    "store_ids": [
     5,
     2
    ],
    "table_id": 5,
    "table_name": "myTable5",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 511
   },
   {
    "column_count": 19,
    "index_count": 2,
    "last_updated": "2025-06-20T00:00:05Z",
    "percent_live_data": "0.522",
    "range_count": 14,
    "replication_size_bytes": 10006,
    "store_ids": [
     7
    ],
    "table_id": 6,
    "table_name": "myTable6",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 522
   },
   {
    "column_count": 14,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:06Z",
    "percent_live_data": "0.512",
    "range_count": 13,
    "replication_size_bytes": 10007,
    "store_ids": [
     9
    ],
    "table_id": 7,
    "table_name": "myTable7",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 512
   },
   {
    "column_count": 20,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:07Z",
    "percent_live_data": "0.523",
    "range_count": 12,
    "replication_size_bytes": 10008,
    "store_ids": [
     3
    ],
    "table_id": 8,
    "table_name": "myTable8",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 15,
    "index_count": 3,
    "last_updated": "2025-06-20T00:00:08Z",
    "percent_live_data": "0.513",
    "range_count": 11,
    "replication_size_bytes": 10009,
    "store_ids": [
     2
    ],
    "table_id": 9,
    "table_name": "myTable9",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 513
   },
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   }
  ]
 }
}

# returns tables from db with id 2
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/2/tables/"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 3
  },
  "results": [
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:10Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 11,
    "table_name": "myTable11",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:11Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 12,
    "table_name": "myTable12",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:12Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 13,
    "table_name": "myTable13",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   }
  ]
 }
}

# sorts by replication size
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?sortBy=replicationSize"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   },
   {
    "column_count": 17,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:02Z",
    "percent_live_data": "0.510",
    "range_count": 17,
    "replication_size_bytes": 10003,
    "store_ids": [
     1,
     8,
     9
    ],
    "table_id": 3,
    "table_name": "myTable3",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 510
   },
   {
    "column_count": 18,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:03Z",
    "percent_live_data": "0.52",
    "range_count": 16,
    "replication_size_bytes": 10004,
    "store_ids": [
     2,
     3
    ],
    "table_id": 4,
    "table_name": "myTable4",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 520
   },
   {
    "column_count": 13,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:04Z",
    "percent_live_data": "0.511",
    "range_count": 15,
    "replication_size_bytes": 10005,
    "store_ids": [
     5,
     2
    ],
    "table_id": 5,
    "table_name": "myTable5",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 511
   },
   {
    "column_count": 19,
    "index_count": 2,
    "last_updated": "2025-06-20T00:00:05Z",
    "percent_live_data": "0.522",
    "range_count": 14,
    "replication_size_bytes": 10006,
    "store_ids": [
     7
    ],
    "table_id": 6,
    "table_name": "myTable6",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 522
   },
   {
    "column_count": 14,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:06Z",
    "percent_live_data": "0.512",
    "range_count": 13,
    "replication_size_bytes": 10007,
    "store_ids": [
     9
    ],
    "table_id": 7,
    "table_name": "myTable7",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 512
   },
   {
    "column_count": 20,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:07Z",
    "percent_live_data": "0.523",
    "range_count": 12,
    "replication_size_bytes": 10008,
    "store_ids": [
     3
    ],
    "table_id": 8,
    "table_name": "myTable8",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 15,
    "index_count": 3,
    "last_updated": "2025-06-20T00:00:08Z",
    "percent_live_data": "0.513",
    "range_count": 11,
    "replication_size_bytes": 10009,
    "store_ids": [
     2
    ],
    "table_id": 9,
    "table_name": "myTable9",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 513
   }
  ]
 }
}

# sorts by total range count
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?sortBy=ranges"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 15,
    "index_count": 3,
    "last_updated": "2025-06-20T00:00:08Z",
    "percent_live_data": "0.513",
    "range_count": 11,
    "replication_size_bytes": 10009,
    "store_ids": [
     2
    ],
    "table_id": 9,
    "table_name": "myTable9",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 513
   },
   {
    "column_count": 20,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:07Z",
    "percent_live_data": "0.523",
    "range_count": 12,
    "replication_size_bytes": 10008,
    "store_ids": [
     3
    ],
    "table_id": 8,
    "table_name": "myTable8",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 14,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:06Z",
    "percent_live_data": "0.512",
    "range_count": 13,
    "replication_size_bytes": 10007,
    "store_ids": [
     9
    ],
    "table_id": 7,
    "table_name": "myTable7",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 512
   },
   {
    "column_count": 19,
    "index_count": 2,
    "last_updated": "2025-06-20T00:00:05Z",
    "percent_live_data": "0.522",
    "range_count": 14,
    "replication_size_bytes": 10006,
    "store_ids": [
     7
    ],
    "table_id": 6,
    "table_name": "myTable6",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 522
   },
   {
    "column_count": 13,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:04Z",
    "percent_live_data": "0.511",
    "range_count": 15,
    "replication_size_bytes": 10005,
    "store_ids": [
     5,
     2
    ],
    "table_id": 5,
    "table_name": "myTable5",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 511
   },
   {
    "column_count": 18,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:03Z",
    "percent_live_data": "0.52",
    "range_count": 16,
    "replication_size_bytes": 10004,
    "store_ids": [
     2,
     3
    ],
    "table_id": 4,
    "table_name": "myTable4",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 520
   },
   {
    "column_count": 17,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:02Z",
    "percent_live_data": "0.510",
    "range_count": 17,
    "replication_size_bytes": 10003,
    "store_ids": [
     1,
     8,
     9
    ],
    "table_id": 3,
    "table_name": "myTable3",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 510
   },
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   },
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   }
  ]
 }
}

# sorts by percentage of live data
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?sortBy=liveData"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 17,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:02Z",
    "percent_live_data": "0.510",
    "range_count": 17,
    "replication_size_bytes": 10003,
    "store_ids": [
     1,
     8,
     9
    ],
    "table_id": 3,
    "table_name": "myTable3",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 510
   },
   {
    "column_count": 13,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:04Z",
    "percent_live_data": "0.511",
    "range_count": 15,
    "replication_size_bytes": 10005,
    "store_ids": [
     5,
     2
    ],
    "table_id": 5,
    "table_name": "myTable5",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 511
   },
   {
    "column_count": 14,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:06Z",
    "percent_live_data": "0.512",
    "range_count": 13,
    "replication_size_bytes": 10007,
    "store_ids": [
     9
    ],
    "table_id": 7,
    "table_name": "myTable7",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 512
   },
   {
    "column_count": 15,
    "index_count": 3,
    "last_updated": "2025-06-20T00:00:08Z",
    "percent_live_data": "0.513",
    "range_count": 11,
    "replication_size_bytes": 10009,
    "store_ids": [
     2
    ],
    "table_id": 9,
    "table_name": "myTable9",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 513
   },
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   },
   {
    "column_count": 18,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:03Z",
    "percent_live_data": "0.52",
    "range_count": 16,
    "replication_size_bytes": 10004,
    "store_ids": [
     2,
     3
    ],
    "table_id": 4,
    "table_name": "myTable4",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 520
   },
   {
    "column_count": 19,
    "index_count": 2,
    "last_updated": "2025-06-20T00:00:05Z",
    "percent_live_data": "0.522",
    "range_count": 14,
    "replication_size_bytes": 10006,
    "store_ids": [
     7
    ],
    "table_id": 6,
    "table_name": "myTable6",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 522
   },
   {
    "column_count": 20,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:07Z",
    "percent_live_data": "0.523",
    "range_count": 12,
    "replication_size_bytes": 10008,
    "store_ids": [
     3
    ],
    "table_id": 8,
    "table_name": "myTable8",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   }
  ]
 }
}

# sorts by column count
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?sortBy=columns"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 13,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:04Z",
    "percent_live_data": "0.511",
    "range_count": 15,
    "replication_size_bytes": 10005,
    "store_ids": [
     5,
     2
    ],
    "table_id": 5,
    "table_name": "myTable5",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 511
   },
   {
    "column_count": 14,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:06Z",
    "percent_live_data": "0.512",
    "range_count": 13,
    "replication_size_bytes": 10007,
    "store_ids": [
     9
    ],
    "table_id": 7,
    "table_name": "myTable7",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 512
   },
   {
    "column_count": 15,
    "index_count": 3,
    "last_updated": "2025-06-20T00:00:08Z",
    "percent_live_data": "0.513",
    "range_count": 11,
    "replication_size_bytes": 10009,
    "store_ids": [
     2
    ],
    "table_id": 9,
    "table_name": "myTable9",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 513
   },
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   },
   {
    "column_count": 17,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:02Z",
    "percent_live_data": "0.510",
    "range_count": 17,
    "replication_size_bytes": 10003,
    "store_ids": [
     1,
     8,
     9
    ],
    "table_id": 3,
    "table_name": "myTable3",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 510
   },
   {
    "column_count": 18,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:03Z",
    "percent_live_data": "0.52",
    "range_count": 16,
    "replication_size_bytes": 10004,
    "store_ids": [
     2,
     3
    ],
    "table_id": 4,
    "table_name": "myTable4",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 520
   },
   {
    "column_count": 19,
    "index_count": 2,
    "last_updated": "2025-06-20T00:00:05Z",
    "percent_live_data": "0.522",
    "range_count": 14,
    "replication_size_bytes": 10006,
    "store_ids": [
     7
    ],
    "table_id": 6,
    "table_name": "myTable6",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 522
   },
   {
    "column_count": 20,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:07Z",
    "percent_live_data": "0.523",
    "range_count": 12,
    "replication_size_bytes": 10008,
    "store_ids": [
     3
    ],
    "table_id": 8,
    "table_name": "myTable8",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   }
  ]
 }
}

# sorts by index count
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?sortBy=indexes"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 19,
    "index_count": 2,
    "last_updated": "2025-06-20T00:00:05Z",
    "percent_live_data": "0.522",
    "range_count": 14,
    "replication_size_bytes": 10006,
    "store_ids": [
     7
    ],
    "table_id": 6,
    "table_name": "myTable6",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 522
   },
   {
    "column_count": 15,
    "index_count": 3,
    "last_updated": "2025-06-20T00:00:08Z",
    "percent_live_data": "0.513",
    "range_count": 11,
    "replication_size_bytes": 10009,
    "store_ids": [
     2
    ],
    "table_id": 9,
    "table_name": "myTable9",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 513
   },
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   },
   {
    "column_count": 17,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:02Z",
    "percent_live_data": "0.510",
    "range_count": 17,
    "replication_size_bytes": 10003,
    "store_ids": [
     1,
     8,
     9
    ],
    "table_id": 3,
    "table_name": "myTable3",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 510
   },
   {
    "column_count": 18,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:03Z",
    "percent_live_data": "0.52",
    "range_count": 16,
    "replication_size_bytes": 10004,
    "store_ids": [
     2,
     3
    ],
    "table_id": 4,
    "table_name": "myTable4",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 520
   },
   {
    "column_count": 13,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:04Z",
    "percent_live_data": "0.511",
    "range_count": 15,
    "replication_size_bytes": 10005,
    "store_ids": [
     5,
     2
    ],
    "table_id": 5,
    "table_name": "myTable5",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 511
   },
   {
    "column_count": 14,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:06Z",
    "percent_live_data": "0.512",
    "range_count": 13,
    "replication_size_bytes": 10007,
    "store_ids": [
     9
    ],
    "table_id": 7,
    "table_name": "myTable7",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 512
   },
   {
    "column_count": 20,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:07Z",
    "percent_live_data": "0.523",
    "range_count": 12,
    "replication_size_bytes": 10008,
    "store_ids": [
     3
    ],
    "table_id": 8,
    "table_name": "myTable8",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   }
  ]
 }
}

# sorts by last_updated count in descending order
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?sortBy=lastUpdated&sortOrder=desc"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 15,
    "index_count": 3,
    "last_updated": "2025-06-20T00:00:08Z",
    "percent_live_data": "0.513",
    "range_count": 11,
    "replication_size_bytes": 10009,
    "store_ids": [
     2
    ],
    "table_id": 9,
    "table_name": "myTable9",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 513
   },
   {
    "column_count": 20,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:07Z",
    "percent_live_data": "0.523",
    "range_count": 12,
    "replication_size_bytes": 10008,
    "store_ids": [
     3
    ],
    "table_id": 8,
    "table_name": "myTable8",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 14,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:06Z",
    "percent_live_data": "0.512",
    "range_count": 13,
    "replication_size_bytes": 10007,
    "store_ids": [
     9
    ],
    "table_id": 7,
    "table_name": "myTable7",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 512
   },
   {
    "column_count": 19,
    "index_count": 2,
    "last_updated": "2025-06-20T00:00:05Z",
    "percent_live_data": "0.522",
    "range_count": 14,
    "replication_size_bytes": 10006,
    "store_ids": [
     7
    ],
    "table_id": 6,
    "table_name": "myTable6",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 522
   },
   {
    "column_count": 13,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:04Z",
    "percent_live_data": "0.511",
    "range_count": 15,
    "replication_size_bytes": 10005,
    "store_ids": [
     5,
     2
    ],
    "table_id": 5,
    "table_name": "myTable5",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 511
   },
   {
    "column_count": 18,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:03Z",
    "percent_live_data": "0.52",
    "range_count": 16,
    "replication_size_bytes": 10004,
    "store_ids": [
     2,
     3
    ],
    "table_id": 4,
    "table_name": "myTable4",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 520
   },
   {
    "column_count": 17,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:02Z",
    "percent_live_data": "0.510",
    "range_count": 17,
    "replication_size_bytes": 10003,
    "store_ids": [
     1,
     8,
     9
    ],
    "table_id": 3,
    "table_name": "myTable3",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 510
   },
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   },
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   }
  ]
 }
}


# retrieves first page
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?pageSize=1"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 1,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   }
  ]
 }
}

# retrieves second page of size 1
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?pageSize=1&pageNum=2"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 2,
   "PageSize": 1,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   }
  ]
 }
}

# will use default page size of 10
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?pageSize=0"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   },
   {
    "column_count": 17,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:02Z",
    "percent_live_data": "0.510",
    "range_count": 17,
    "replication_size_bytes": 10003,
    "store_ids": [
     1,
     8,
     9
    ],
    "table_id": 3,
    "table_name": "myTable3",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 510
   },
   {
    "column_count": 18,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:03Z",
    "percent_live_data": "0.52",
    "range_count": 16,
    "replication_size_bytes": 10004,
    "store_ids": [
     2,
     3
    ],
    "table_id": 4,
    "table_name": "myTable4",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 520
   },
   {
    "column_count": 13,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:04Z",
    "percent_live_data": "0.511",
    "range_count": 15,
    "replication_size_bytes": 10005,
    "store_ids": [
     5,
     2
    ],
    "table_id": 5,
    "table_name": "myTable5",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 511
   },
   {
    "column_count": 19,
    "index_count": 2,
    "last_updated": "2025-06-20T00:00:05Z",
    "percent_live_data": "0.522",
    "range_count": 14,
    "replication_size_bytes": 10006,
    "store_ids": [
     7
    ],
    "table_id": 6,
    "table_name": "myTable6",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 522
   },
   {
    "column_count": 14,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:06Z",
    "percent_live_data": "0.512",
    "range_count": 13,
    "replication_size_bytes": 10007,
    "store_ids": [
     9
    ],
    "table_id": 7,
    "table_name": "myTable7",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 512
   },
   {
    "column_count": 20,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:07Z",
    "percent_live_data": "0.523",
    "range_count": 12,
    "replication_size_bytes": 10008,
    "store_ids": [
     3
    ],
    "table_id": 8,
    "table_name": "myTable8",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 15,
    "index_count": 3,
    "last_updated": "2025-06-20T00:00:08Z",
    "percent_live_data": "0.513",
    "range_count": 11,
    "replication_size_bytes": 10009,
    "store_ids": [
     2
    ],
    "table_id": 9,
    "table_name": "myTable9",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 513
   },
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   }
  ]
 }
}

# will use default pageNum of 1
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?pageNum=0"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 10
  },
  "results": [
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   },
   {
    "column_count": 17,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:02Z",
    "percent_live_data": "0.510",
    "range_count": 17,
    "replication_size_bytes": 10003,
    "store_ids": [
     1,
     8,
     9
    ],
    "table_id": 3,
    "table_name": "myTable3",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 510
   },
   {
    "column_count": 18,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:03Z",
    "percent_live_data": "0.52",
    "range_count": 16,
    "replication_size_bytes": 10004,
    "store_ids": [
     2,
     3
    ],
    "table_id": 4,
    "table_name": "myTable4",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 520
   },
   {
    "column_count": 13,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:04Z",
    "percent_live_data": "0.511",
    "range_count": 15,
    "replication_size_bytes": 10005,
    "store_ids": [
     5,
     2
    ],
    "table_id": 5,
    "table_name": "myTable5",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 511
   },
   {
    "column_count": 19,
    "index_count": 2,
    "last_updated": "2025-06-20T00:00:05Z",
    "percent_live_data": "0.522",
    "range_count": 14,
    "replication_size_bytes": 10006,
    "store_ids": [
     7
    ],
    "table_id": 6,
    "table_name": "myTable6",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 522
   },
   {
    "column_count": 14,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:06Z",
    "percent_live_data": "0.512",
    "range_count": 13,
    "replication_size_bytes": 10007,
    "store_ids": [
     9
    ],
    "table_id": 7,
    "table_name": "myTable7",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 512
   },
   {
    "column_count": 20,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:07Z",
    "percent_live_data": "0.523",
    "range_count": 12,
    "replication_size_bytes": 10008,
    "store_ids": [
     3
    ],
    "table_id": 8,
    "table_name": "myTable8",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   },
   {
    "column_count": 15,
    "index_count": 3,
    "last_updated": "2025-06-20T00:00:08Z",
    "percent_live_data": "0.513",
    "range_count": 11,
    "replication_size_bytes": 10009,
    "store_ids": [
     2
    ],
    "table_id": 9,
    "table_name": "myTable9",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 513
   },
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   }
  ]
 }
}

# retrieves tables with name containing `Table1`
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?tableName=Table1"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 2
  },
  "results": [
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   }
  ]
 }
}

# retrieves tables in stores 1 or 2
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?storeId=1&storeId=2"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 7
  },
  "results": [
   {
    "column_count": 11,
    "index_count": 1,
    "last_updated": "2025-06-20T00:00:00Z",
    "percent_live_data": "0.509",
    "range_count": 19,
    "replication_size_bytes": 10001,
    "store_ids": [
     1,
     2,
     3
    ],
    "table_id": 1,
    "table_name": "myTable1",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 509
   },
   {
    "column_count": 16,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:01Z",
    "percent_live_data": "0.519",
    "range_count": 18,
    "replication_size_bytes": 10002,
    "store_ids": [
     1,
     5,
     6
    ],
    "table_id": 2,
    "table_name": "myTable2",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 519
   },
   {
    "column_count": 17,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:02Z",
    "percent_live_data": "0.510",
    "range_count": 17,
    "replication_size_bytes": 10003,
    "store_ids": [
     1,
     8,
     9
    ],
    "table_id": 3,
    "table_name": "myTable3",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 510
   },
   {
    "column_count": 18,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:03Z",
    "percent_live_data": "0.52",
    "range_count": 16,
    "replication_size_bytes": 10004,
    "store_ids": [
     2,
     3
    ],
    "table_id": 4,
    "table_name": "myTable4",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 520
   },
   {
    "column_count": 13,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:04Z",
    "percent_live_data": "0.511",
    "range_count": 15,
    "replication_size_bytes": 10005,
    "store_ids": [
     5,
     2
    ],
    "table_id": 5,
    "table_name": "myTable5",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 511
   },
   {
    "column_count": 15,
    "index_count": 3,
    "last_updated": "2025-06-20T00:00:08Z",
    "percent_live_data": "0.513",
    "range_count": 11,
    "replication_size_bytes": 10009,
    "store_ids": [
     2
    ],
    "table_id": 9,
    "table_name": "myTable9",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 513
   },
   {
    "column_count": 10,
    "index_count": 5,
    "last_updated": "2025-06-20T00:00:09Z",
    "percent_live_data": "0.523",
    "range_count": 10,
    "replication_size_bytes": 10001,
    "store_ids": [
     1
    ],
    "table_id": 10,
    "table_name": "myTable10",
    "total_data_bytes": 1000,
    "total_live_data_bytes": 523
   }
  ]
 }
}


# No results - no tables with store id 9999
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?storeId=9999"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 0
  }
 }
}

# No results - no tables with table name like `asdfa`
req
{
  "method": "GET",
  "uri": "/api/v2/metadata/database/1/tables/?tableName=asdfa"
}
----
{
 "status_code": 200,
 "body": {
  "paginationInfo": {
   "PageNum": 1,
   "PageSize": 10,
   "TotalResults": 0
  }
 }
}
