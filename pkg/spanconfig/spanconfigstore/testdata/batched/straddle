# Test semantics of batched updates that partially overlap with what's already
# present.

# keys    a  b  c  d  e  f  g  h  i  j
# state
# set        [--A--)  [--B--)
# ====================================
# result     [--A--)  [--B--)
apply
set [b,d):A
set [e,g):B
----
added [b,d):A
added [e,g):B

# keys    a  b  c  d  e  f  g  h  i  j
# state      [--A--)  [--B--)
# set           [---X----)
# ====================================
# result     [-A|----X---|-B)
apply dryrun
set [c,f):X
----
deleted [b,d)
deleted [e,g)
added [b,c):A
added [c,f):X
added [f,g):B

# keys    a  b  c  d  e  f  g  h  i  j
# state      [--A--)  [--B--)
# set           [---X-------)
# ====================================
# result     [-A|----X------)
apply dryrun
set [c,g):X
----
deleted [b,d)
deleted [e,g)
added [b,c):A
added [c,g):X

# keys    a  b  c  d  e  f  g  h  i  j
# state      [--A--)  [--B--)
# set        [---X-------)
# ====================================
# result     [-------X---|-B)
apply dryrun
set [b,f):X
----
deleted [b,d)
deleted [e,g)
added [b,f):X
added [f,g):B
