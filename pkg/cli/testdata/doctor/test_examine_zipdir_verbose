debug doctor zipdir --verbose
----
debug doctor zipdir testdata/doctor/debugzip --verbose
reading testdata/doctor/debugzip/system.descriptor.txt
reading testdata/doctor/debugzip/system.namespace.txt
reading testdata/doctor/debugzip/system.jobs.txt
Examining 37 descriptors and 42 namespace entries...
  ParentID   0, ParentSchemaID  0: database "system" (1): processed
  ParentID   1, ParentSchemaID 29: relation "descriptor" (3): processed
  ParentID   1, ParentSchemaID 29: relation "users" (4): processed
  ParentID   1, ParentSchemaID 29: relation "zones" (5): processed
  ParentID   1, ParentSchemaID 29: relation "settings" (6): processed
  ParentID   1, ParentSchemaID 29: relation "tenants" (8): processed
  ParentID   1, ParentSchemaID 29: relation "lease" (11): processed
  ParentID   1, ParentSchemaID 29: relation "eventlog" (12): processed
  ParentID   1, ParentSchemaID 29: relation "rangelog" (13): processed
  ParentID   1, ParentSchemaID 29: relation "ui" (14): processed
  ParentID   1, ParentSchemaID 29: relation "jobs" (15): processed
  ParentID   1, ParentSchemaID 29: relation "web_sessions" (19): processed
  ParentID   1, ParentSchemaID 29: relation "table_statistics" (20): processed
  ParentID   1, ParentSchemaID 29: relation "locations" (21): processed
  ParentID   1, ParentSchemaID 29: relation "role_members" (23): processed
  ParentID   1, ParentSchemaID 29: relation "comments" (24): processed
  ParentID   1, ParentSchemaID 29: relation "replication_constraint_stats" (25): processed
  ParentID   1, ParentSchemaID 29: relation "replication_critical_localities" (26): processed
  ParentID   1, ParentSchemaID 29: relation "replication_stats" (27): processed
  ParentID   1, ParentSchemaID 29: relation "reports_meta" (28): processed
  ParentID   1, ParentSchemaID 29: relation "namespace" (30): processed
  ParentID   1, ParentSchemaID 29: relation "protected_ts_meta" (31): processed
  ParentID   1, ParentSchemaID 29: relation "protected_ts_records" (32): processed
  ParentID   1, ParentSchemaID 29: relation "role_options" (33): processed
  ParentID   1, ParentSchemaID 29: relation "statement_bundle_chunks" (34): processed
  ParentID   1, ParentSchemaID 29: relation "statement_diagnostics_requests" (35): processed
  ParentID   1, ParentSchemaID 29: relation "statement_diagnostics" (36): processed
  ParentID   1, ParentSchemaID 29: relation "scheduled_jobs" (37): processed
  ParentID   1, ParentSchemaID 29: relation "sqlliveness" (39): processed
  ParentID   0, ParentSchemaID  0: database "defaultdb" (50): processed
  ParentID   0, ParentSchemaID  0: database "postgres" (51): processed
  ParentID  52, ParentSchemaID 29: relation "users" (53): referenced database ID 52: descriptor not found
  ParentID  52, ParentSchemaID 29: relation "users" (53): processed
  ParentID  52, ParentSchemaID 29: relation "vehicles" (54): referenced database ID 52: descriptor not found
  ParentID  52, ParentSchemaID 29: relation "vehicles" (54): processed
  ParentID  52, ParentSchemaID 29: relation "rides" (55): referenced database ID 52: descriptor not found
  ParentID  52, ParentSchemaID 29: relation "rides" (55): processed
  ParentID  52, ParentSchemaID 29: relation "vehicle_location_histories" (56): referenced database ID 52: descriptor not found
  ParentID  52, ParentSchemaID 29: relation "vehicle_location_histories" (56): processed
  ParentID  52, ParentSchemaID 29: relation "promo_codes" (57): referenced database ID 52: descriptor not found
  ParentID  52, ParentSchemaID 29: relation "promo_codes" (57): processed
  ParentID  52, ParentSchemaID 29: relation "user_promo_codes" (58): referenced database ID 52: descriptor not found
  ParentID  52, ParentSchemaID 29: relation "user_promo_codes" (58): processed
  ParentID   0, ParentSchemaID  0: namespace entry "defaultdb" (50): processed
  ParentID   0, ParentSchemaID  0: namespace entry "movr" (52): descriptor not found
  ParentID   0, ParentSchemaID  0: namespace entry "postgres" (51): processed
  ParentID   0, ParentSchemaID  0: namespace entry "system" (1): processed
  ParentID   1, ParentSchemaID  0: namespace entry "public" (29): processed
  ParentID   1, ParentSchemaID 29: namespace entry "comments" (24): processed
  ParentID   1, ParentSchemaID 29: namespace entry "descriptor" (3): processed
  ParentID   1, ParentSchemaID 29: namespace entry "eventlog" (12): processed
  ParentID   1, ParentSchemaID 29: namespace entry "jobs" (15): processed
  ParentID   1, ParentSchemaID 29: namespace entry "lease" (11): processed
  ParentID   1, ParentSchemaID 29: namespace entry "locations" (21): processed
  ParentID   1, ParentSchemaID 29: namespace entry "namespace" (30): processed
  ParentID   1, ParentSchemaID 29: namespace entry "protected_ts_meta" (31): processed
  ParentID   1, ParentSchemaID 29: namespace entry "protected_ts_records" (32): processed
  ParentID   1, ParentSchemaID 29: namespace entry "rangelog" (13): processed
  ParentID   1, ParentSchemaID 29: namespace entry "replication_constraint_stats" (25): processed
  ParentID   1, ParentSchemaID 29: namespace entry "replication_critical_localities" (26): processed
  ParentID   1, ParentSchemaID 29: namespace entry "replication_stats" (27): processed
  ParentID   1, ParentSchemaID 29: namespace entry "reports_meta" (28): processed
  ParentID   1, ParentSchemaID 29: namespace entry "role_members" (23): processed
  ParentID   1, ParentSchemaID 29: namespace entry "role_options" (33): processed
  ParentID   1, ParentSchemaID 29: namespace entry "scheduled_jobs" (37): processed
  ParentID   1, ParentSchemaID 29: namespace entry "settings" (6): processed
  ParentID   1, ParentSchemaID 29: namespace entry "sqlliveness" (39): processed
  ParentID   1, ParentSchemaID 29: namespace entry "statement_bundle_chunks" (34): processed
  ParentID   1, ParentSchemaID 29: namespace entry "statement_diagnostics" (36): processed
  ParentID   1, ParentSchemaID 29: namespace entry "statement_diagnostics_requests" (35): processed
  ParentID   1, ParentSchemaID 29: namespace entry "table_statistics" (20): processed
  ParentID   1, ParentSchemaID 29: namespace entry "tenants" (8): processed
  ParentID   1, ParentSchemaID 29: namespace entry "ui" (14): processed
  ParentID   1, ParentSchemaID 29: namespace entry "users" (4): processed
  ParentID   1, ParentSchemaID 29: namespace entry "web_sessions" (19): processed
  ParentID   1, ParentSchemaID 29: namespace entry "zones" (5): processed
  ParentID  50, ParentSchemaID  0: namespace entry "public" (29): processed
  ParentID  51, ParentSchemaID  0: namespace entry "public" (29): processed
  ParentID  52, ParentSchemaID  0: namespace entry "public" (29): processed
  ParentID  52, ParentSchemaID 29: namespace entry "promo_codes" (57): processed
  ParentID  52, ParentSchemaID 29: namespace entry "rides" (55): processed
  ParentID  52, ParentSchemaID 29: namespace entry "user_promo_codes" (58): processed
  ParentID  52, ParentSchemaID 29: namespace entry "users" (53): processed
  ParentID  52, ParentSchemaID 29: namespace entry "vehicle_location_histories" (56): processed
  ParentID  52, ParentSchemaID 29: namespace entry "vehicles" (54): processed
Examining 2 jobs...
Processing job 587337426939772929
Processing job 587337426984566785
job 587337426984566785: running schema change GC refers to missing table descriptor(s) [59]; existing descriptors that still need to be dropped []; job safe to delete: true.
ERROR: validation failed
