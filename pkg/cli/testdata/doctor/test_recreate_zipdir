debug doctor recreate zipdir testdata/doctor/debugzip
----
debug doctor recreate zipdir testdata/doctor/debugzip
BEGIN;
SELECT 1/(1-sign(count(*))) FROM system.descriptor WHERE id >= 104;
SELECT crdb_internal.unsafe_delete_descriptor(id, true) FROM system.descriptor WHERE id >= 100;
SELECT crdb_internal.unsafe_delete_namespace_entry("parentID", "parentSchemaID", name, id) FROM system.namespace WHERE id >= 100;
COMMIT;
BEGIN;
SELECT crdb_internal.unsafe_upsert_descriptor(100, decode('125b0a0964656661756c74646210641a300a0b0a0561646d696e100218020a0d0a067075626c696310801018000a0a0a04726f6f74100218021204726f6f741803220028013a0c0a067075626c69631202086540004a005a0210007000', 'hex'), true);
SELECT crdb_internal.unsafe_upsert_namespace_entry(0, 0, 'defaultdb', 100, true);
SELECT crdb_internal.unsafe_upsert_descriptor(101, decode('2249086412067075626c6963186522310a0b0a0561646d696e100218020a0d0a067075626c696310840418000a0a0a04726f6f7410021802120561646d696e18032a00300140004a007000', 'hex'), true);
SELECT crdb_internal.unsafe_upsert_namespace_entry(100, 0, 'public', 101, true);
SELECT crdb_internal.unsafe_upsert_descriptor(102, decode('125a0a08706f73746772657310661a300a0b0a0561646d696e100218020a0d0a067075626c696310801018000a0a0a04726f6f74100218021204726f6f741803220028013a0c0a067075626c69631202086740004a005a0210007000', 'hex'), true);
SELECT crdb_internal.unsafe_upsert_namespace_entry(0, 0, 'postgres', 102, true);
SELECT crdb_internal.unsafe_upsert_descriptor(103, decode('2249086612067075626c6963186722310a0b0a0561646d696e100218020a0d0a067075626c696310840418000a0a0a04726f6f7410021802120561646d696e18032a00300140004a007000', 'hex'), true);
SELECT crdb_internal.unsafe_upsert_descriptor(104, decode('0a83030a01741868206428013a0042260a016910011a0c08011040180030005014600020013000680070007800800100880100980100423a0a05726f77696410021a0c08011040180030005014600020002a0e756e697175655f726f77696428293001680070007800800100880100980100480352750a06745f706b6579100118012205726f7769642a0169300240004a10080010001a00200028003000380040005a0070017a0408002000800100880100900104980101a20106080012001800a80100b20100ba0100c00100c801d88aed86ddb7c5e517d00101e00100e9010000000000000000f2010060026a210a0b0a0561646d696e100218020a0a0a04726f6f74100218021204726f6f741803800101880103980100b2011b0a077072696d61727910001a01691a05726f776964200120022801b80101c20100e80100f2010408001200f801008002009202009a0200b20200b80200c00265c80200e00200800300880302a80300b00300d00300d80300e00300f80300880400980400a00400a80400', 'hex'), true);
COMMIT;
