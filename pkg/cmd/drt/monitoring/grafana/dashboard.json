{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": {
          "type": "grafana",
          "uid": "-- Grafana --"
        },
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "target": {
          "limit": 100,
          "matchAny": false,
          "tags": [],
          "type": "dashboard"
        },
        "type": "dashboard"
      },
      {
        "datasource": {
          "type": "datasource",
          "uid": "grafana"
        },
        "enable": false,
        "iconColor": "dark-purple",
        "name": "Dashboard annotations",
        "target": {
          "refId": "Anno",
          "type": "dashboard"
        }
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "v9Zz2K6nz"
        },
        "enable": false,
        "expr": "sys_cpu_combined_percent_normalized{instance=~\"$instances\"} > 0.7",
        "iconColor": "light-orange",
        "name": "High CPU",
        "tagKeys": "cpu",
        "textFormat": "High CPU detected on {{instance}}",
        "titleFormat": "High CPU"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "v9Zz2K6nz"
        },
        "enable": true,
        "expr": "# This should be > 0 but the key visualizer job currently doesn't properly mark itself as idle.\n# https://cockroachlabs.slack.com/archives/C0514GA30G3/p1681458391221229\n# Update: fixed in https://github.com/cockroachdb/cockroach/pull/101750 but still needs to be picked up\njobs_running_non_idle{instance=~\"$instances\"} > 1",
        "iconColor": "super-light-purple",
        "name": "Jobs",
        "textFormat": "Job running on gateway {{instance}}",
        "titleFormat": "Running jobs"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "v9Zz2K6nz"
        },
        "enable": false,
        "expr": "rate(admission_wait_durations_kv_sum{instance=~\"$instances\"}[$__rate_interval]) > 0",
        "iconColor": "red",
        "name": "CPU Admission Control",
        "textFormat": "{{instance}}",
        "titleFormat": "CPU AC"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "v9Zz2K6nz"
        },
        "enable": false,
        "expr": "rate(admission_wait_durations_kv_stores_sum{instance=~\"$instances\"}[$__rate_interval]) > 0",
        "iconColor": "red",
        "name": "IO Admission Control",
        "textFormat": "{{instance}}",
        "titleFormat": "IO AC"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "v9Zz2K6nz"
        },
        "enable": true,
        "expr": "rate(liveness_heartbeatfailures{instance=~\"$instances\"}[$__rate_interval]) > 0",
        "iconColor": "red",
        "name": "Liveness Failure",
        "textFormat": "{{instance}}",
        "titleFormat": "Liveness Heartbeat Failure"
      },
      {
        "datasource": {
          "type": "prometheus",
          "uid": "v9Zz2K6nz"
        },
        "enable": false,
        "expr": "# NB: this encompasses all of the other *_age_sec metrics too.\n# Cutoff is 48h.\nspanconfig_kvsubscriber_oldest_protected_record_nanos{instance=~\"$instances\"} > 48*3600*1E9",
        "iconColor": "red",
        "name": "Old protected timestamp",
        "titleFormat": "Old ProtectedTS"
      }
    ]
  },
  "editable": true,
  "fiscalYearStartMonth": 0,
  "graphTooltip": 1,
  "id": 137,
  "links": [],
  "liveNow": false,
  "panels": [
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 0
      },
      "id": 81,
      "panels": [],
      "title": "Overview",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "A heatmap in which each horizontal stripe reflects per-node CPU usage (0.0-1.0).",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "scaleDistribution": {
              "type": "linear"
            }
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 0,
        "y": 1
      },
      "id": 8,
      "maxPerRow": 2,
      "options": {
        "calculate": false,
        "cellGap": 0,
        "cellValues": {},
        "color": {
          "exponent": 0.8,
          "fill": "dark-red",
          "max": 0.8,
          "min": 0,
          "mode": "scheme",
          "reverse": false,
          "scale": "exponential",
          "scheme": "RdBu",
          "steps": 92
        },
        "exemplars": {
          "color": "rgba(255,0,255,0.7)"
        },
        "filterValues": {
          "le": 1e-9
        },
        "legend": {
          "show": false,
          "showLegend": true
        },
        "rowsFrame": {
          "layout": "auto"
        },
        "tooltip": {
          "show": true,
          "yHistogram": true
        },
        "yAxis": {
          "axisPlacement": "hidden",
          "reverse": false
        }
      },
      "pluginVersion": "9.4.7",
      "repeat": "g",
      "repeatDirection": "v",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sys_cpu_combined_percent_normalized{instance=~\"$instances\"}",
          "hide": false,
          "instant": false,
          "legendFormat": "{{instance}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "CPU",
      "type": "heatmap"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 8,
        "y": 1
      },
      "id": 165,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sum(ranges{cluster=\"$cluster\", instance=~\"$instances\"})",
          "format": "time_series",
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Range count",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 1
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 2,
        "w": 3,
        "x": 16,
        "y": 1
      },
      "id": 132,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "sum(ranges_unavailable{instance=~\"$instances\"})",
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Unavailable Ranges",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "orange",
                "value": 1
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 2,
        "w": 3,
        "x": 19,
        "y": 1
      },
      "id": 133,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "sum(ranges_underreplicated{instance=~\"$instances\"})",
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Under-Replicated",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "orange",
                "value": 1
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 2,
        "w": 2,
        "x": 22,
        "y": 1
      },
      "id": 134,
      "options": {
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "lastNotNull"
          ],
          "fields": "",
          "values": false
        },
        "textMode": "auto"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "sum(kv_replica_circuit_breaker_num_tripped_replicas{instance=~\"$instances\"})",
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Tripped Replicas",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 3,
        "x": 16,
        "y": 3
      },
      "id": 130,
      "options": {
        "colorMode": "none",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^Live Nodes$/",
          "values": false
        },
        "text": {
          "titleSize": 20
        },
        "textMode": "value"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "min (liveness_livenodes{instance=~\"$instances\"})",
          "legendFormat": "Live Nodes",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "min (liveness_livenodes{instance=~\"$instances\"})",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "Live Nodes",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 3,
        "x": 19,
        "y": 3
      },
      "id": 139,
      "options": {
        "colorMode": "none",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^Live Nodes$/",
          "values": false
        },
        "text": {
          "titleSize": 20
        },
        "textMode": "value"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "sum (replicas{instance=~\"$instances\"})",
          "legendFormat": "Live Nodes",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Replicas",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds"
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 3,
        "w": 2,
        "x": 22,
        "y": 3
      },
      "id": 140,
      "options": {
        "colorMode": "none",
        "graphMode": "none",
        "justifyMode": "center",
        "orientation": "auto",
        "reduceOptions": {
          "calcs": [
            "last"
          ],
          "fields": "/^Live Nodes$/",
          "values": false
        },
        "text": {
          "titleSize": 20
        },
        "textMode": "value"
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "sum (replicas_leaseholders{instance=~\"$instances\"})",
          "legendFormat": "Live Nodes",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Leaseholders",
      "type": "stat"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 34,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 9,
        "x": 0,
        "y": 6
      },
      "id": 77,
      "options": {
        "legend": {
          "calcs": [
            "lastNotNull"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(workload_tpcc_newOrder_success_total{cluster=\"cct-232-workloads\", job=\"workload-2112\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(workload_tpcc_delivery_success_total{cluster=\"cct-232-workloads\", job=\"workload-2112\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "B"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(workload_tpcc_orderStatus_success_total{cluster=\"cct-232-workloads\", job=\"workload-2112\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "C"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(workload_tpcc_payment_success_total{cluster=\"cct-232-workloads\", job=\"workload-2112\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "D"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(workload_tpcc_stockLevel_success_total{cluster=\"cct-232-workloads\", job=\"workload-2112\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "E"
        }
      ],
      "title": "TPCC regular workload successful QPS",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 34,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 7,
        "x": 9,
        "y": 6
      },
      "id": 161,
      "options": {
        "legend": {
          "calcs": [
            "lastNotNull"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "jobs_import_currently_running{cluster=\"$cluster\", instance=~\"$instances\"}",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "E"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "jobs_import_currently_paused{cluster=\"$cluster\", instance=~\"$instances\"}",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "jobs_import_currently_idle{cluster=\"$cluster\", instance=~\"$instances\"}",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "TPCC drop workload imports running",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 34,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": [
          {
            "__systemRef": "hideSeriesFrom",
            "matcher": {
              "id": "byNames",
              "options": {
                "mode": "exclude",
                "names": [
                  "{cluster=\"cct-232-workloads\", host_ip=\"10.142.1.104\", instance=\"cct-232-workloads-0001\", job=\"workload-2113\", project=\"cockroach-ephemeral\", region=\"us-east1\", zone=\"us-east1-b\"}"
                ],
                "prefix": "All except:",
                "readOnly": true
              }
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 7,
        "w": 8,
        "x": 16,
        "y": 6
      },
      "id": 159,
      "options": {
        "legend": {
          "calcs": [
            "lastNotNull"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(workload_tpcc_newOrder_success_total{cluster=\"cct-232-workloads\", job=\"workload-2113\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(workload_tpcc_delivery_success_total{cluster=\"cct-232-workloads\", job=\"workload-2113\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "B"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(workload_tpcc_orderStatus_success_total{cluster=\"cct-232-workloads\", job=\"workload-2113\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "C"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(workload_tpcc_payment_success_total{cluster=\"cct-232-workloads\", job=\"workload-2113\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "D"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(workload_tpcc_stockLevel_success_total{cluster=\"cct-232-workloads\", job=\"workload-2113\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "E"
        }
      ],
      "title": "TPCC drop workload successful QPS",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 34,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "line"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 0,
        "y": 13
      },
      "id": 160,
      "options": {
        "legend": {
          "calcs": [
            "lastNotNull"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "rate(workload_schemachange_opOk_duration_seconds_count{cluster=\"cct-232-workloads\", job=\"workload-2115\"}[$__rate_interval])",
          "hide": false,
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "rate(workload_schemachange_txnOk_duration_seconds_count{cluster=\"cct-232-workloads\", job=\"workload-2115\"}[$__rate_interval])",
          "hide": false,
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "B"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "rate(workload_schemachange_txnCmtErr_duration_seconds_count{cluster=\"cct-232-workloads\", job=\"workload-2115\"}[$__rate_interval])",
          "hide": false,
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "C"
        }
      ],
      "title": "Schemachange workload operations",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 34,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "line"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              },
              {
                "color": "#EAB839",
                "value": 10
              },
              {
                "color": "red",
                "value": 20
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 12,
        "y": 13
      },
      "id": 158,
      "options": {
        "legend": {
          "calcs": [
            "lastNotNull"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "histogram_quantile(0.95, sum(rate(workload_kv_read_duration_seconds_bucket{cluster=\"cct-232-workloads\",job=\"workload-2114\"}[$__rate_interval])) by (le))",
          "hide": false,
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "histogram_quantile(0.95, sum(rate(workload_kv_write_duration_seconds_bucket{cluster=\"cct-232-workloads\",job=\"workload-2114\"}[$__rate_interval])) by (le))",
          "hide": false,
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "KV workload p95 latencies",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green",
                "value": null
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 24,
        "x": 0,
        "y": 20
      },
      "id": 163,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "builder",
          "expr": "ranges{cluster=\"$cluster\", instance=~\"$instances\"}",
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Ranges",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "A heatmap in which each horizontal stripe reflects per-node CPU usage (0.0-1.0).",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "scaleDistribution": {
              "type": "linear"
            }
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 0,
        "y": 28
      },
      "id": 135,
      "maxPerRow": 2,
      "options": {
        "calculate": false,
        "cellGap": 0,
        "cellValues": {
          "unit": "ns"
        },
        "color": {
          "exponent": 0.1,
          "fill": "semi-dark-red",
          "max": 50000000,
          "min": 0,
          "mode": "scheme",
          "reverse": false,
          "scale": "exponential",
          "scheme": "RdBu",
          "steps": 128
        },
        "exemplars": {
          "color": "rgba(255,0,255,0.7)"
        },
        "filterValues": {
          "le": -0.1
        },
        "legend": {
          "show": false,
          "showLegend": true
        },
        "rowsFrame": {
          "layout": "auto",
          "value": "Delay"
        },
        "tooltip": {
          "show": true,
          "yHistogram": true
        },
        "yAxis": {
          "axisPlacement": "hidden",
          "reverse": false
        }
      },
      "pluginVersion": "9.4.7",
      "repeatDirection": "v",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "rate(admission_wait_durations_kv_sum{instance=~\"$instances\"}[$__rate_interval])",
          "hide": false,
          "instant": false,
          "legendFormat": "{{instance}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "CPU Admission Control",
      "type": "heatmap"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "A heatmap in which each horizontal stripe reflects per-node CPU usage (0.0-1.0).",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "scaleDistribution": {
              "type": "linear"
            }
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 8,
        "y": 28
      },
      "id": 138,
      "maxPerRow": 2,
      "options": {
        "calculate": false,
        "cellGap": 0,
        "cellValues": {
          "unit": "ns"
        },
        "color": {
          "exponent": 0.1,
          "fill": "semi-dark-red",
          "max": 50000000,
          "min": 0,
          "mode": "scheme",
          "reverse": false,
          "scale": "exponential",
          "scheme": "RdBu",
          "steps": 128
        },
        "exemplars": {
          "color": "rgba(255,0,255,0.7)"
        },
        "filterValues": {
          "le": -0.1
        },
        "legend": {
          "show": false,
          "showLegend": true
        },
        "rowsFrame": {
          "layout": "auto",
          "value": "Delay"
        },
        "tooltip": {
          "show": true,
          "yHistogram": true
        },
        "yAxis": {
          "axisPlacement": "hidden",
          "reverse": false
        }
      },
      "pluginVersion": "9.4.7",
      "repeatDirection": "v",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "rate(admission_wait_durations_kv_stores_sum{instance=~\"$instances\"}[$__rate_interval])",
          "hide": false,
          "instant": false,
          "legendFormat": "{{instance}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "IO Admission Control",
      "type": "heatmap"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "https://github.com/cockroachdb/cockroach/pull/101542",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "scaleDistribution": {
              "type": "linear"
            }
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 16,
        "y": 28
      },
      "id": 118,
      "maxPerRow": 2,
      "options": {
        "calculate": false,
        "cellGap": 0,
        "cellValues": {
          "unit": "percentunit"
        },
        "color": {
          "exponent": 0.8,
          "fill": "dark-red",
          "max": 1,
          "min": 0,
          "mode": "scheme",
          "reverse": false,
          "scale": "exponential",
          "scheme": "RdBu",
          "steps": 63
        },
        "exemplars": {
          "color": "rgba(255,0,255,0.7)"
        },
        "filterValues": {
          "le": 1e-9
        },
        "legend": {
          "show": false,
          "showLegend": true
        },
        "rowsFrame": {
          "layout": "auto"
        },
        "tooltip": {
          "show": true,
          "yHistogram": true
        },
        "yAxis": {
          "axisPlacement": "hidden",
          "reverse": false,
          "unit": "percentunit"
        }
      },
      "pluginVersion": "9.4.7",
      "repeatDirection": "v",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "sys_rss{instance=~\"$instances\"}/sys_totalmem{instance=~\"$instances\"}",
          "hide": false,
          "instant": false,
          "legendFormat": "{{instance}} s{{store}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "RSS % (23.2+ only)",
      "type": "heatmap"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 0,
        "y": 33
      },
      "id": 167,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "storage_disk_slow{cluster=\"$cluster\"}",
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "storage_disk_stalled{cluster=\"$cluster\"}",
          "hide": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "Disk slow / stalled events",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "Execution latencies as perceived by KV servers (i.e. not measuring time spent on the KV client).\n\nThese include contention, etc, so these being elevated does not imply that KV is causing high latencies.",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "scaleDistribution": {
              "type": "linear"
            }
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 12,
        "y": 33
      },
      "id": 115,
      "options": {
        "calculate": false,
        "calculation": {
          "xBuckets": {
            "mode": "size"
          },
          "yBuckets": {
            "mode": "count"
          }
        },
        "cellGap": 0,
        "cellValues": {
          "unit": "percentunit"
        },
        "color": {
          "exponent": 0.7,
          "fill": "text",
          "max": 1,
          "min": 0,
          "mode": "scheme",
          "reverse": false,
          "scale": "exponential",
          "scheme": "Blues",
          "steps": 64
        },
        "exemplars": {
          "color": "rgba(255,0,255,0.7)"
        },
        "filterValues": {
          "le": 1e-9
        },
        "legend": {
          "show": true,
          "showLegend": true
        },
        "rowsFrame": {
          "layout": "auto"
        },
        "tooltip": {
          "show": true,
          "yHistogram": true
        },
        "yAxis": {
          "axisPlacement": "left",
          "reverse": false,
          "unit": "ns"
        }
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum by (le) (rate(exec_latency_bucket{instance=~\"$instances\"}[$__rate_interval])) / ignoring(le) group_left sum (rate(exec_latency_count{instance=~\"$instances\"}[$__rate_interval]))",
          "format": "heatmap",
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "kv exec latencies",
      "type": "heatmap"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "scaleDistribution": {
              "type": "linear"
            }
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 0,
        "y": 39
      },
      "id": 114,
      "options": {
        "calculate": false,
        "calculation": {
          "xBuckets": {
            "mode": "size"
          },
          "yBuckets": {
            "mode": "count"
          }
        },
        "cellGap": 0,
        "cellValues": {
          "unit": "percentunit"
        },
        "color": {
          "exponent": 0.7,
          "fill": "text",
          "min": 0,
          "mode": "scheme",
          "reverse": false,
          "scale": "exponential",
          "scheme": "Blues",
          "steps": 64
        },
        "exemplars": {
          "color": "rgba(255,0,255,0.7)"
        },
        "filterValues": {
          "le": 1e-9
        },
        "legend": {
          "show": true
        },
        "rowsFrame": {
          "layout": "auto"
        },
        "tooltip": {
          "show": true,
          "yHistogram": true
        },
        "yAxis": {
          "axisPlacement": "left",
          "reverse": false,
          "unit": "ns"
        }
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "# We take the combined rate histogram of the latencies. Then we compute the rate count (i.e. how many requests/sec we are handling) and divide each entry of the histogram by that number. In other words, at each point in time, the buckets will now add up to 1 instead of adding up to the ops/s. This is nicer for coloring and you can say things like \"50% of all requests had a latency in this bucket\".\nsum by (le) (rate(sql_service_latency_bucket{instance=~\"$instances\"}[$__rate_interval])) / ignoring(le) group_left sum (rate(sql_service_latency_count{instance=~\"$instances\"}[$__rate_interval]))",
          "format": "heatmap",
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "sql service latencies",
      "type": "heatmap"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds",
            "seriesBy": "last"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "axisSoftMin": 0,
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 13,
            "gradientMode": "scheme",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "log": 10,
              "type": "symlog"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "mappings": [],
          "min": 100000000,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "yellow",
                "value": 100000000
              },
              {
                "color": "red",
                "value": 1000000000
              }
            ]
          },
          "unit": "ns"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 12,
        "y": 39
      },
      "id": 71,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "histogram_quantile(1.0, sum by (le)(rate(exec_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))",
          "hide": false,
          "legendFormat": "p_max",
          "range": true,
          "refId": "D"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "histogram_quantile(0.99, sum by (le)(rate(exec_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))",
          "hide": false,
          "legendFormat": "p_99",
          "range": true,
          "refId": "C"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "histogram_quantile(0.9, sum by (le)(rate(exec_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))",
          "legendFormat": "p_90",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "histogram_quantile(0.5, sum by (le)(rate(exec_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))",
          "hide": false,
          "legendFormat": "p_50",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "kv exec p50/90/99/max",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "thresholds",
            "seriesBy": "last"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "axisSoftMin": 0,
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 13,
            "gradientMode": "scheme",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "log": 10,
              "type": "symlog"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "dashed"
            }
          },
          "mappings": [],
          "min": 100000000,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "yellow",
                "value": 100000000
              },
              {
                "color": "red",
                "value": 1000000000
              }
            ]
          },
          "unit": "ns"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 0,
        "y": 45
      },
      "id": 17,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "multi",
          "sort": "desc"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "histogram_quantile(1.0, sum by (le)(rate(sql_service_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))",
          "hide": false,
          "legendFormat": "p_max",
          "range": true,
          "refId": "D"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "histogram_quantile(0.99, sum by (le)(rate(sql_service_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))",
          "hide": false,
          "legendFormat": "p_99",
          "range": true,
          "refId": "C"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "histogram_quantile(0.9, sum by (le)(rate(sql_service_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))",
          "legendFormat": "p_90",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "histogram_quantile(0.5, sum by (le)(rate(sql_service_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))",
          "hide": false,
          "legendFormat": "p_50",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "sql service p50/90/99/max",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 37,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 45
      },
      "id": 74,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(exec_latency_count{instance=~\"$instances\"}[$__rate_interval])",
          "legendFormat": "{{instance}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "KV QPS",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 37,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 51
      },
      "id": 73,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(sql_service_latency_count{instance=~\"$instances\"}[$__rate_interval])",
          "legendFormat": "{{instance}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "sql QPS",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "In a perfectly symmetrical cluster+workload, all nodes would consume roughly equal RSS. Heterogeneous topology and/or load imbalances can break this symmetry.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 52,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              }
            ]
          },
          "unit": "decbytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 12,
        "y": 53
      },
      "id": 68,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "sys_go_totalbytes{instance=~\"$instances\"}",
          "format": "time_series",
          "hide": false,
          "legendFormat": "{{instance}}",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "Go mem",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 34,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "none"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 0,
        "y": 59
      },
      "id": 78,
      "options": {
        "legend": {
          "calcs": [
            "lastNotNull"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "builder",
          "expr": "sum by(instance) (rate(sql_exec_latency_count{cluster=\"$cluster\"}[$__rate_interval]))",
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "sql_exec_latency",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "A heatmap in which each horizontal stripe reflects a store's fsync latency.\n\nOn 22.2 and before, we're using the logcommit latency. On 23.1, we prefer the WAL fsync latency.",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "scaleDistribution": {
              "type": "linear"
            }
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 5,
        "w": 8,
        "x": 12,
        "y": 59
      },
      "id": 79,
      "maxPerRow": 2,
      "options": {
        "calculate": false,
        "cellGap": 0,
        "cellValues": {
          "unit": "ns"
        },
        "color": {
          "exponent": 0.8,
          "fill": "dark-red",
          "max": 100000000,
          "min": 0,
          "mode": "scheme",
          "reverse": false,
          "scale": "exponential",
          "scheme": "RdBu",
          "steps": 71
        },
        "exemplars": {
          "color": "rgba(255,0,255,0.7)"
        },
        "filterValues": {
          "le": 1e-9
        },
        "legend": {
          "show": false,
          "showLegend": true
        },
        "rowsFrame": {
          "layout": "auto"
        },
        "tooltip": {
          "show": true,
          "yHistogram": true
        },
        "yAxis": {
          "axisPlacement": "hidden",
          "reverse": false
        }
      },
      "pluginVersion": "9.4.7",
      "repeatDirection": "v",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": false,
          "expr": "# NB: never OR histograms except if they have matching buckets, which is not the case here (at least when running 22.2 and 23.1 mixed). Here we OR the scalar quantiles, which is fine.\nhistogram_quantile(1, sum by (instance,store,le)(rate(storage_wal_fsync_latency_bucket{instance=~\"$instances\"}[$__rate_interval]))) or histogram_quantile(1, sum by (instance,store,le)(rate(raft_process_logcommit_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))",
          "hide": false,
          "instant": false,
          "legendFormat": "{{instance}} s{{store}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "WAL fsync pmax",
      "type": "heatmap"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "In a perfectly symmetrical cluster+workload, all nodes would consume roughly equal RSS. Heterogeneous topology and/or load imbalances can break this symmetry.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 52,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              }
            ]
          },
          "unit": "decbytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 0,
        "y": 66
      },
      "id": 141,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "sql_mem_root_current{instance=~\"$instances\"}",
          "format": "time_series",
          "hide": false,
          "legendFormat": "{{instance}}",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "SQL mem",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "This metric tracks difference between the current time and the oldest protected timestamp. We expect a steady increase the entire duration a protected timestamp record exists. Sudden drops indicate a record being released, perhaps after a job completes. An ever-increasing duration would indicate the oldest record sticking around and preventing GC if > the configured GC TTL. If the age exceeds >2 days, that's perhaps alarming -- we've potentially prevented MVCC GC for >48h and a sudden burst of it after the record is removed could be destabilizing.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "dashed+area"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 86400000000000
              }
            ]
          },
          "unit": "ns"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 0,
        "y": 72
      },
      "id": 143,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "spanconfig_kvsubscriber_oldest_protected_record_nanos{instance=~\"$instances\"}",
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Oldest protected timestamp age",
      "type": "timeseries"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 78
      },
      "id": 106,
      "panels": [],
      "title": "Runtime",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "Histogram of Go scheduler latencies, normalized to a sum of 1. In other words, if a bucket shows, say, 12%, this means that 12% of all goroutine schedules ended up in that bucket.",
      "fieldConfig": {
        "defaults": {
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "scaleDistribution": {
              "type": "linear"
            }
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 9,
        "w": 24,
        "x": 0,
        "y": 79
      },
      "id": 104,
      "options": {
        "calculate": false,
        "calculation": {
          "xBuckets": {
            "mode": "size"
          },
          "yBuckets": {
            "mode": "size"
          }
        },
        "cellGap": 1,
        "cellValues": {
          "unit": "percentunit"
        },
        "color": {
          "exponent": 1.1,
          "fill": "dark-orange",
          "max": 1,
          "min": 0,
          "mode": "scheme",
          "reverse": false,
          "scale": "linear",
          "scheme": "Blues",
          "steps": 83
        },
        "exemplars": {
          "color": "rgba(255,0,255,0.7)"
        },
        "filterValues": {
          "le": 1e-9
        },
        "legend": {
          "show": true,
          "showLegend": true
        },
        "rowsFrame": {
          "layout": "auto"
        },
        "tooltip": {
          "show": true,
          "yHistogram": true
        },
        "yAxis": {
          "axisPlacement": "left",
          "reverse": false,
          "unit": "ns"
        }
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "# Normalize the count so that it sums up to 1 across the histogram, so we can use a [0,1] color scale.\nrate(go_scheduler_latency_bucket{instance=~\"$instances\"}[$__rate_interval]) / ignoring(le) group_left rate(go_scheduler_latency_count{instance=~\"$instances\"}[$__rate_interval])",
          "format": "heatmap",
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Go scheduler latency",
      "type": "heatmap"
    },
    {
      "collapsed": false,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 88
      },
      "id": 83,
      "panels": [],
      "title": "Storage",
      "type": "row"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": ">= 1 enables admission control",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 89
      },
      "id": 128,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "storage_l0_num_files{instance=~\"$instances\"}/1000",
          "legendFormat": "{{instance}} L0 files",
          "range": true,
          "refId": "A"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "storage_l0_sublevels{instance=\"$instances\"}/20",
          "hide": false,
          "legendFormat": "{{instance}} sublevels",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "IO Admission Control Threshold",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "continuous-GrYlRd",
            "seriesBy": "last"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "axisSoftMin": 0,
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "area"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "#EAB839",
                "value": 20000000
              },
              {
                "color": "red",
                "value": 50000000
              }
            ]
          },
          "unit": "ns"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 12,
        "y": 89
      },
      "id": 86,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "histogram_quantile(0.99, sum by (instance,node_id,store,le)(rate(storage_wal_fsync_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))\nor histogram_quantile(0.99, sum by (instance,node_id,store,le)(rate(raft_process_logcommit_latency_bucket{instance=~\"$instances\"}[$__rate_interval])))",
          "hide": false,
          "legendFormat": "{{instance}} s{{store}}",
          "range": true,
          "refId": "D"
        }
      ],
      "title": "WAL fsync p99s",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 52,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              }
            ]
          },
          "unit": "decbytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 12,
        "y": 95
      },
      "id": 67,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(sys_host_disk_read_bytes{instance=~\"$instances\"}[$__rate_interval])",
          "format": "time_series",
          "hide": false,
          "legendFormat": "{{instance}}",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "stacked disk read",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "custom": {
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "scaleDistribution": {
              "type": "linear"
            }
          }
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 0,
        "y": 97
      },
      "id": 87,
      "options": {
        "calculate": false,
        "calculation": {
          "xBuckets": {
            "mode": "size"
          },
          "yBuckets": {
            "mode": "count"
          }
        },
        "cellGap": 0,
        "cellValues": {
          "unit": "percentunit"
        },
        "color": {
          "exponent": 0.5,
          "fill": "text",
          "max": 1,
          "min": 0,
          "mode": "scheme",
          "reverse": false,
          "scale": "exponential",
          "scheme": "Blues",
          "steps": 64
        },
        "exemplars": {
          "color": "rgba(255,0,255,0.7)"
        },
        "filterValues": {
          "le": 1e-9
        },
        "legend": {
          "show": false
        },
        "rowsFrame": {
          "layout": "auto"
        },
        "tooltip": {
          "show": true,
          "yHistogram": true
        },
        "yAxis": {
          "axisPlacement": "left",
          "reverse": false,
          "unit": "ns"
        }
      },
      "pluginVersion": "9.4.7",
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "exemplar": true,
          "expr": "sum by (le) (rate(storage_wal_fsync_latency_bucket{instance=~\"$instances\"}[$__rate_interval])) / ignoring(le) group_left sum (rate(storage_wal_fsync_latency_count{instance=~\"$instances\"}[$__rate_interval]))",
          "format": "heatmap",
          "instant": false,
          "legendFormat": "__auto",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "WAL fsync latencies (v23.1+ only)",
      "type": "heatmap"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic",
            "seriesBy": "last"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 50,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              }
            ]
          },
          "unit": "decbytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 12,
        "y": 101
      },
      "id": 69,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(rocksdb_compacted_bytes_written{instance=~\"$instances\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "{{instance}} s{{store}}",
          "range": true,
          "refId": "D"
        }
      ],
      "title": "stacked compaction writes",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 52,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "min": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              }
            ]
          },
          "unit": "decbytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 6,
        "w": 12,
        "x": 0,
        "y": 103
      },
      "id": 61,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(sys_host_disk_write_bytes{instance=~\"$instances\"}[$__rate_interval])",
          "format": "time_series",
          "hide": false,
          "legendFormat": "{{instance}}",
          "range": true,
          "refId": "B"
        }
      ],
      "title": "stacked disk write",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "Percent of time that a flush was active, per store.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "percentunit"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 108
      },
      "id": 153,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "storage_flush_utilization{instance=~\"$instances\"}",
          "legendFormat": "{{instance}} s{{store}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Flush utilization",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic",
            "seriesBy": "last"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 50,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineStyle": {
              "fill": "solid"
            },
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              }
            ]
          },
          "unit": "decbytes"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 7,
        "w": 12,
        "x": 0,
        "y": 109
      },
      "id": 124,
      "options": {
        "legend": {
          "calcs": [
            "mean"
          ],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(rocksdb_compacted_bytes_read{instance=~\"$instances\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "{{instance}} s{{store}}",
          "range": true,
          "refId": "D"
        }
      ],
      "title": "stacked compaction reads",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "The sum of bytes of keys that would've been elided by a flush or a compaction, but couldn't because of an open LSM snapshot.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "bars",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "Bps"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 116
      },
      "id": 151,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(storage_compactions_keys_pinned_bytes{instance=~\"$instances\"}[$__rate_interval])",
          "legendFormat": "{{instance}} s{{store}}",
          "range": true,
          "refId": "A"
        }
      ],
      "title": "Pebble snapshot-pinned bytes written stacked",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "axisSoftMax": 1,
            "axisSoftMin": 0,
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 0,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "linear",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "none"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          }
        },
        "overrides": [
          {
            "__systemRef": "hideSeriesFrom",
            "matcher": {
              "id": "byNames",
              "options": {
                "mode": "exclude",
                "names": [
                  "A {cluster=\"grinaker-231\", host_ip=\"10.142.0.175\", instance=\"grinaker-231-0004\", job=\"cockroachdb\", node_id=\"4\", project=\"cockroach-ephemeral\", region=\"us-east1\", store=\"4\", zone=\"us-east1-c\"}"
                ],
                "prefix": "All except:",
                "readOnly": true
              }
            },
            "properties": [
              {
                "id": "custom.hideFrom",
                "value": {
                  "legend": false,
                  "tooltip": false,
                  "viz": true
                }
              }
            ]
          }
        ]
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 116
      },
      "id": 145,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(rocksdb_block_cache_hits{instance=~\"$instances\"}[$__rate_interval])",
          "hide": true,
          "legendFormat": "__auto",
          "range": true,
          "refId": "Hits"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(rocksdb_block_cache_misses{instance=~\"$instances\"}[$__rate_interval])",
          "hide": true,
          "legendFormat": "__auto",
          "range": true,
          "refId": "Misses"
        },
        {
          "datasource": {
            "name": "Expression",
            "type": "__expr__",
            "uid": "__expr__"
          },
          "expression": "${Hits}/(${Hits}+${Misses})",
          "hide": false,
          "refId": "A",
          "type": "math"
        }
      ],
      "title": "Block cache hit rate",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "description": "The sum of the number of DELs, SINGLEDELs and RANGEDELs within each store at the current moment.",
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 52,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 124
      },
      "id": 147,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "storage_keys_tombstone_count{instance=~\"$instances\"}",
          "legendFormat": "{{instance}} s{{store}}",
          "range": true,
          "refId": "Pebble Tombstone Count"
        }
      ],
      "title": "Pebble tombstone counts stacked",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 52,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 124
      },
      "id": 149,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "storage_keys_range_key_set_count{instance=~\"$instances\"}",
          "legendFormat": "{{instance}} s{{store}}",
          "range": true,
          "refId": "Pebble range key sets"
        }
      ],
      "title": "Pebble RANGEKEYSETs stacked",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 52,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 5,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 0,
        "y": 132
      },
      "id": 157,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(storage_iterator_internal_seeks{instance=~\"$instances\"}[$__rate_interval])",
          "legendFormat": "internal s{{store}}",
          "range": true,
          "refId": "InternalSeeks"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(storage_iterator_external_seeks{instance=~\"$instances\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "external s{{store}}",
          "range": true,
          "refId": "ExternalSeeks"
        }
      ],
      "title": "Iterator seeks (stacked)",
      "type": "timeseries"
    },
    {
      "datasource": {
        "type": "prometheus",
        "uid": "v9Zz2K6nz"
      },
      "fieldConfig": {
        "defaults": {
          "color": {
            "mode": "palette-classic"
          },
          "custom": {
            "axisCenteredZero": false,
            "axisColorMode": "text",
            "axisLabel": "",
            "axisPlacement": "auto",
            "barAlignment": 0,
            "drawStyle": "line",
            "fillOpacity": 25,
            "gradientMode": "none",
            "hideFrom": {
              "legend": false,
              "tooltip": false,
              "viz": false
            },
            "lineInterpolation": "smooth",
            "lineWidth": 1,
            "pointSize": 1,
            "scaleDistribution": {
              "type": "linear"
            },
            "showPoints": "auto",
            "spanNulls": false,
            "stacking": {
              "group": "A",
              "mode": "normal"
            },
            "thresholdsStyle": {
              "mode": "off"
            }
          },
          "mappings": [],
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {
                "color": "green"
              },
              {
                "color": "red",
                "value": 80
              }
            ]
          },
          "unit": "short"
        },
        "overrides": []
      },
      "gridPos": {
        "h": 8,
        "w": 12,
        "x": 12,
        "y": 132
      },
      "id": 155,
      "options": {
        "legend": {
          "calcs": [],
          "displayMode": "list",
          "placement": "bottom",
          "showLegend": true
        },
        "tooltip": {
          "mode": "single",
          "sort": "none"
        }
      },
      "targets": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(storage_iterator_external_steps{instance=~\"$instances\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "external s{{store}}",
          "range": true,
          "refId": "ExternalSteps"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "editorMode": "code",
          "expr": "rate(storage_iterator_internal_steps{instance=~\"$instances\"}[$__rate_interval])",
          "hide": false,
          "legendFormat": "internal s{{store}}",
          "range": true,
          "refId": "InternalSteps"
        }
      ],
      "title": "Iterator steps (stacked)",
      "type": "timeseries"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 140
      },
      "id": 89,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 100
          },
          "id": 94,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(rocksdb_compacted_bytes_read{instance=~\"$instances\"}[$__rate_interval])",
              "legendFormat": "{{instance}} s{{store}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "compaction reads",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 100
          },
          "id": 95,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(rocksdb_compacted_bytes_written{instance=~\"$instances\"}[$__rate_interval])",
              "legendFormat": "{{instance}} s{{store}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "compaction writes",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 108
          },
          "id": 101,
          "options": {
            "legend": {
              "calcs": [
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rebalancing_readbytespersecond{instance=~\"$instances\"}",
              "legendFormat": "{{instance}} s{{store}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "BatchRequest reads (30m avg)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 108
          },
          "id": 119,
          "options": {
            "legend": {
              "calcs": [
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rebalancing_writebytespersecond{instance=~\"$instances\"}",
              "legendFormat": "{{instance}} s{{store}}",
              "range": true,
              "refId": "A"
            },
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "",
              "hide": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "BatchRequest writes (30m avg)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "Bytes passed out from the `(raft.Storage).Entries` method. This is the hot path through which Raft reads from disk. (The other hot path is log appends, which are writes).",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 10,
            "x": 0,
            "y": 116
          },
          "id": 126,
          "options": {
            "legend": {
              "calcs": [
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(raft_storage_read_bytes{instance=~\"$instances\"}[$__rate_interval])",
              "legendFormat": "{{instance}} s{{store}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "raft.Storage entry reads",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 2,
            "x": 10,
            "y": 116
          },
          "id": 113,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "title": "TODO raft log application writes",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "These were stepped into raft, so in all likelihood got written to the raft log and soon thereafter applied.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 116
          },
          "id": 99,
          "options": {
            "legend": {
              "calcs": [
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(raft_rcvd_stepped_bytes{instance=~\"$instances\"}[$__rate_interval])",
              "legendFormat": "{{instance}} s{{store}}",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "MsgApp append bytes",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 124
          },
          "id": 91,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(range_snapshots_sent_bytes{instance=~\"$instances\"}[$__rate_interval])",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "snapshot sent (reads)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 124
          },
          "id": 92,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(range_snapshots_rcvd_bytes{instance=~\"$instances\"}[$__rate_interval])",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "snapshot rcvd",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 132
          },
          "id": 111,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(sql_disk_distsql_spilled_bytes_read{instance=~\"$instances\"}[$__rate_interval])",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "SQL disk spill read",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 12,
            "y": 132
          },
          "id": 112,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(sql_disk_distsql_spilled_bytes_written{instance=~\"$instances\"}[$__rate_interval])",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "SQL disk spill write",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 50,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              },
              "unit": "ns"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 140
          },
          "id": 97,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(kv_rangefeed_catchup_scan_nanos{instance=~\"$instances\"}[$__rate_interval])",
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "catch-up scans (TODO: bytes instead of time spent)",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "we have processing nanos, but it's rate limited, we should have a metric for the bytes/sec processed.",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 0,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "linear",
                "lineWidth": 1,
                "pointSize": 5,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "none"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  },
                  {
                    "color": "red",
                    "value": 80
                  }
                ]
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 8,
            "w": 12,
            "x": 0,
            "y": 148
          },
          "id": 102,
          "options": {
            "legend": {
              "calcs": [],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "pluginVersion": "9.4.7",
          "title": "TODO: reads via ConsistencyChecker",
          "type": "timeseries"
        }
      ],
      "title": "I/O Sources (reads on the left, writes on the right)",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 141
      },
      "id": 123,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "In <23.1, this contains the raft entry fsync.\nin >=23.1, only sideloading needs to fsync in logcommit; regular entries are fsynced in a separate goroutine.",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 11,
            "x": 0,
            "y": 101
          },
          "id": 120,
          "options": {
            "calculate": false,
            "calculation": {
              "xBuckets": {
                "mode": "size"
              },
              "yBuckets": {
                "mode": "count"
              }
            },
            "cellGap": 0,
            "cellValues": {
              "unit": "percentunit"
            },
            "color": {
              "exponent": 0.5,
              "fill": "text",
              "max": 1,
              "min": 0,
              "mode": "scheme",
              "reverse": false,
              "scale": "exponential",
              "scheme": "Blues",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": false
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "show": true,
              "yHistogram": true
            },
            "yAxis": {
              "axisPlacement": "left",
              "reverse": false,
              "unit": "ns"
            }
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum by (le) (rate(raft_process_logcommit_latency_bucket{instance=~\"$instances\"}[$__rate_interval])) / ignoring(le) group_left sum (rate(raft_process_logcommit_latency_count{instance=~\"$instances\"}[$__rate_interval]))",
              "format": "heatmap",
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "logcommit latencies (v23.1+ only)",
          "type": "heatmap"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "Duration between enqueuing a replica in the raft scheduler to processing it.\n\nNote that concurrent processing of a Replica is single-threaded, so slow raft processing on a replica that has more work to do is reflected in this histogram.",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 11,
            "x": 11,
            "y": 101
          },
          "id": 121,
          "options": {
            "calculate": false,
            "calculation": {
              "xBuckets": {
                "mode": "size"
              },
              "yBuckets": {
                "mode": "count"
              }
            },
            "cellGap": 0,
            "cellValues": {
              "unit": "percentunit"
            },
            "color": {
              "exponent": 0.5,
              "fill": "text",
              "max": 1,
              "min": 0,
              "mode": "scheme",
              "reverse": false,
              "scale": "exponential",
              "scheme": "Blues",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": false
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "show": true,
              "yHistogram": true
            },
            "yAxis": {
              "axisPlacement": "left",
              "reverse": false,
              "unit": "ns"
            }
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum by (le) (rate(raft_scheduler_latency_bucket{instance=~\"$instances\"}[$__rate_interval])) / ignoring(le) group_left sum (rate(raft_scheduler_latency_count{instance=~\"$instances\"}[$__rate_interval]))",
              "format": "heatmap",
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "raft scheduler latencies",
          "type": "heatmap"
        }
      ],
      "title": "Replication",
      "type": "row"
    },
    {
      "collapsed": true,
      "gridPos": {
        "h": 1,
        "w": 24,
        "x": 0,
        "y": 142
      },
      "id": 85,
      "panels": [
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 52,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 11,
            "x": 0,
            "y": 244
          },
          "id": 49,
          "options": {
            "legend": {
              "calcs": [
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(sys_host_net_recv_bytes{instance=~\"$instances\"}[$__rate_interval])",
              "format": "time_series",
              "hide": false,
              "legendFormat": "{{instance}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "stacked net recv",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "",
          "fieldConfig": {
            "defaults": {
              "color": {
                "mode": "palette-classic"
              },
              "custom": {
                "axisCenteredZero": false,
                "axisColorMode": "text",
                "axisLabel": "",
                "axisPlacement": "auto",
                "barAlignment": 0,
                "drawStyle": "line",
                "fillOpacity": 52,
                "gradientMode": "none",
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "lineInterpolation": "smooth",
                "lineWidth": 1,
                "pointSize": 1,
                "scaleDistribution": {
                  "type": "linear"
                },
                "showPoints": "auto",
                "spanNulls": false,
                "stacking": {
                  "group": "A",
                  "mode": "normal"
                },
                "thresholdsStyle": {
                  "mode": "off"
                }
              },
              "mappings": [],
              "min": 0,
              "thresholds": {
                "mode": "absolute",
                "steps": [
                  {
                    "color": "green"
                  }
                ]
              },
              "unit": "decbytes"
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 11,
            "x": 11,
            "y": 244
          },
          "id": 55,
          "options": {
            "legend": {
              "calcs": [
                "mean"
              ],
              "displayMode": "list",
              "placement": "bottom",
              "showLegend": true
            },
            "tooltip": {
              "mode": "single",
              "sort": "none"
            }
          },
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "expr": "rate(sys_host_net_send_bytes{instance=~\"$instances\"}[$__rate_interval])",
              "format": "time_series",
              "hide": false,
              "legendFormat": "{{instance}}",
              "range": true,
              "refId": "B"
            }
          ],
          "title": "stacked net send",
          "type": "timeseries"
        },
        {
          "datasource": {
            "type": "prometheus",
            "uid": "v9Zz2K6nz"
          },
          "description": "measured from within CRDB, so unreliable under high CPU utilization.\nAlso heartbeats only happen every couple of seconds so this can miss transient spikes easily.\nThe heartbeats are subject to TCP head-of-line blocking.",
          "fieldConfig": {
            "defaults": {
              "custom": {
                "hideFrom": {
                  "legend": false,
                  "tooltip": false,
                  "viz": false
                },
                "scaleDistribution": {
                  "type": "linear"
                }
              }
            },
            "overrides": []
          },
          "gridPos": {
            "h": 6,
            "w": 11,
            "x": 0,
            "y": 250
          },
          "id": 125,
          "options": {
            "calculate": false,
            "calculation": {
              "xBuckets": {
                "mode": "size"
              },
              "yBuckets": {
                "mode": "count"
              }
            },
            "cellGap": 0,
            "cellValues": {
              "unit": "percentunit"
            },
            "color": {
              "exponent": 0.5,
              "fill": "text",
              "max": 1,
              "min": 0,
              "mode": "scheme",
              "reverse": false,
              "scale": "exponential",
              "scheme": "Blues",
              "steps": 64
            },
            "exemplars": {
              "color": "rgba(255,0,255,0.7)"
            },
            "filterValues": {
              "le": 1e-9
            },
            "legend": {
              "show": false
            },
            "rowsFrame": {
              "layout": "auto"
            },
            "tooltip": {
              "show": true,
              "yHistogram": true
            },
            "yAxis": {
              "axisPlacement": "left",
              "reverse": false,
              "unit": "ns"
            }
          },
          "pluginVersion": "9.4.7",
          "targets": [
            {
              "datasource": {
                "type": "prometheus",
                "uid": "v9Zz2K6nz"
              },
              "editorMode": "code",
              "exemplar": true,
              "expr": "sum by (le) (rate(round_trip_latency_bucket{instance=~\"$instances\"}[$__rate_interval])) / ignoring(le) group_left sum (rate(round_trip_latency_count{instance=~\"$instances\"}[$__rate_interval]))",
              "format": "heatmap",
              "instant": false,
              "legendFormat": "__auto",
              "range": true,
              "refId": "A"
            }
          ],
          "title": "round-trip latencies",
          "type": "heatmap"
        }
      ],
      "title": "Network",
      "type": "row"
    }
  ],
  "refresh": "1m",
  "revision": 1,
  "schemaVersion": 38,
  "style": "dark",
  "tags": [
    "drt",
    "cct",
    "resilience",
    "testing"
  ],
  "templating": {
    "list": [
      {
        "current": {
          "selected": false,
          "text": "cct-232",
          "value": "cct-232"
        },
        "datasource": {
          "type": "prometheus",
          "uid": "v9Zz2K6nz"
        },
        "definition": "sys_uptime{job=\"cockroachdb\"}",
        "hide": 0,
        "includeAll": false,
        "label": "Cluster",
        "multi": false,
        "name": "cluster",
        "options": [],
        "query": {
          "query": "sys_uptime{job=\"cockroachdb\"}",
          "refId": "StandardVariableQuery"
        },
        "refresh": 2,
        "regex": "/cluster=\"(cct[^\"]+)\"/",
        "skipUrlSync": false,
        "sort": 1,
        "type": "query"
      },
      {
        "current": {
          "selected": true,
          "text": [
            "All"
          ],
          "value": [
            "$__all"
          ]
        },
        "datasource": {
          "type": "prometheus",
          "uid": "v9Zz2K6nz"
        },
        "definition": "label_values(sys_uptime{job=\"cockroachdb\",cluster=\"$cluster\"},instance)",
        "hide": 0,
        "includeAll": true,
        "label": "Instances",
        "multi": true,
        "name": "instances",
        "options": [],
        "query": {
          "query": "label_values(sys_uptime{job=\"cockroachdb\",cluster=\"$cluster\"},instance)",
          "refId": "StandardVariableQuery"
        },
        "refresh": 2,
        "regex": "",
        "skipUrlSync": false,
        "sort": 1,
        "type": "query"
      }
    ]
  },
  "time": {
    "from": "now-6h",
    "to": "now"
  },
  "timepicker": {},
  "timezone": "utc",
  "title": "Resilience testing",
  "uid": "tQOYKAKIk",
  "version": 15,
  "weekStart": ""
}
