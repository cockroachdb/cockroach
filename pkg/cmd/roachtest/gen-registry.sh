#!/bin/bash

generated=GENERATED
file=FILE
do=DO
not=NOT
edit=EDIT

cat > registry.go <<EOF
// Code generated by gen-registry.sh; ${do} ${not} ${edit}
// ${generated} ${file} ${do} ${not} ${edit}
package main

func registerTests(r *registry) {
$(grep -h -E 'func register[^(]+\(.*registry\) {' *.go | \
    grep -E -o 'register[^(]+' | \
    sort | \
    awk '{printf "\t%s(r)\n", $0}')
}
EOF
