# my global config
global:
  scrape_interval:     "15s"
  evaluation_interval: "30s"
  # scrape_timeout is set to the global default (10s).

  external_labels:
    monitor: "prom-gce"

rule_files:
- "/opt/prom/prometheus/prometheus-alert.rules"


alerting:
  alertmanagers:
  - static_configs:
    - targets:
      - "127.0.0.1:9093"

remote_read:
   - url: "http://promtable:9202/read"
     read_recent: true
     remote_timeout: 5s

scrape_configs:
- job_name: 'prometheus'
  metrics_path: prometheus/metrics
  scrape_interval: 30s
  static_configs:
    - targets: ['localhost:9090']

# Scrape the Node Exporter every 30 seconds.
- job_name: 'node'
  scrape_interval: 30s
  static_configs:
    - targets: ['localhost:9100']


#  Dynamic GCE Exporters

# FIXME: need per-project zone list
# NOTE: make sure the prometheus node is _not_ scraped twice as the system job below may include it.

   
- job_name: 'sys-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-east1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-east1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-east1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-east1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-east1-d'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-east1-d'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-east1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east1-d
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-east4-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-east4-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-east4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-east4-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-east4-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-east4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-east4-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-east4-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-east4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east4-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-central1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-central1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-central1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-central1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-central1-f'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-central1-f'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-central1-f'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-f
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-f
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-central1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-central1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-central1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west4-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west4-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west4-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west4-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west4-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west4-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west4-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west1-d'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west1-d'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west1-d'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-d
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-d
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west3-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west3-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west3-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west3-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west3-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west3-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west3-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west2-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west2-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west2-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west2-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west2-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west2-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-east1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-east1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-east1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-east1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-east1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-east1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-southeast1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-southeast1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-southeast1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-southeast1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-southeast1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-southeast1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-northeast1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-northeast1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-northeast1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-northeast1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-northeast1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-northeast1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-south1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-south1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-south1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-south1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-south1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-south1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-australia-southeast1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-australia-southeast1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-australia-southeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-australia-southeast1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-australia-southeast1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-australia-southeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-australia-southeast1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-australia-southeast1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-australia-southeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-southamerica-east1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-southamerica-east1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-southamerica-east1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-southamerica-east1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-southamerica-east1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-southamerica-east1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-southamerica-east1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-southamerica-east1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-southamerica-east1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-east1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-east1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-east2-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-east2-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-east2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-east2-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-east2-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-east2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-east2-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-east2-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-east2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-east2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-east2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-northeast2-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-northeast2-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-northeast2-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-northeast2-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-northeast2-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-northeast2-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-northeast3-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-northeast3-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-northeast3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-northeast3-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-northeast3-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-northeast3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-northeast3-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-northeast3-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-northeast3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-northeast3-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-northeast3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-south2-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-south2-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-south2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-south2-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-south2-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-south2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-south2-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-south2-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-south2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-south2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-south2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-southeast2-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-southeast2-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-southeast2-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-southeast2-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-asia-southeast2-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-asia-southeast2-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-asia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: asia-southeast2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: asia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-australia-southeast2-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-australia-southeast2-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-australia-southeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-australia-southeast2-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-australia-southeast2-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-australia-southeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-australia-southeast2-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-australia-southeast2-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-australia-southeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: australia-southeast2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: australia-southeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-central2-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-central2-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-central2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-central2-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-central2-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-central2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-central2-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-central2-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-central2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-central2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-central2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-north1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-north1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-north1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-north1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-north1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-north1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-north1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-north1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-north1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-north1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-north1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-southwest1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-southwest1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-southwest1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-southwest1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-southwest1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-southwest1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-southwest1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-southwest1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-southwest1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-southwest1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-southwest1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west12-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west12-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west12-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west12-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west12-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west12-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west12-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west12-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west12-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west12-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west12-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west6-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west6-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west6-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west6-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west6-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west6-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west6-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west6-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west6-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west6-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west6-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west8-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west8-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west8-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west8-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west8-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west8-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west8-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west8-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west8-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west8-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west8-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west9-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west9-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west9-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west9-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west9-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west9-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-europe-west9-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-europe-west9-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-europe-west9-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: europe-west9-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: europe-west9-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-me-central1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-me-central1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-me-central1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-me-central1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-me-central1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-me-central1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-me-central1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-me-central1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-me-central1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-central1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-central1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-me-west1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-me-west1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-me-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-me-west1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-me-west1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-me-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-me-west1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-me-west1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-me-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: me-west1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: me-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-northamerica-northeast1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-northamerica-northeast1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-northamerica-northeast1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-northamerica-northeast1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-northamerica-northeast1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-northamerica-northeast1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-northamerica-northeast1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-northamerica-northeast1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-northamerica-northeast1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-northamerica-northeast2-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-northamerica-northeast2-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-northamerica-northeast2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-northamerica-northeast2-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-northamerica-northeast2-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-northamerica-northeast2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-northamerica-northeast2-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-northamerica-northeast2-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-northamerica-northeast2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: northamerica-northeast2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: northamerica-northeast2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-southamerica-west1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-southamerica-west1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-southamerica-west1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-southamerica-west1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-southamerica-west1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-southamerica-west1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-southamerica-west1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-southamerica-west1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-southamerica-west1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: southamerica-west1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: southamerica-west1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-east5-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-east5-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-east5-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-east5-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-east5-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-east5-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-east5-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-east5-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-east5-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-east5-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-east5-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-south1-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-south1-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-south1-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-south1-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-south1-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-south1-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-south1-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-south1-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-south1-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-south1-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-south1-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west2-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west2-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west2-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west2-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west2-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west2-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west2-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west2-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west2-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west2-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west2-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west3-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west3-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west3-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west3-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west3-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west3-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west3-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west3-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west3-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west3-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west3-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west4-a'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west4-a'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west4-a'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-a
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-a
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west4-b'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west4-b'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west4-b'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-b
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-b
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

      
- job_name: 'sys-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 9100
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}:9100'
      target_label: instance
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}-sys'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance_tags
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'sys-stan-cct-workload-ca-central1'
  static_configs:
  - targets: ['3.99.161.171:9100']
    labels: 
      host: 'stan-cct-workload-ca-central1'
      cluster: 'cct-aws-1'

#
# N.B. we use labels to filter on port 26258 instead of tags owing to https://github.com/prometheus/prometheus/issues/5499
#

- job_name: 'crdb-cockroach-ephemeral-us-west4-c'
  metrics_path: _status/vars
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance 
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'crdb-secure-cockroach-ephemeral-us-west4-c'
  scheme: https
  metrics_path: _status/vars
  tls_config:
      # N.B. certs are self-signed
      insecure_skip_verify: true
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      #filter: 'labels.prom:metrics-26258'
      port: 26258
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'cockroachdb'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 2112
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2112'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2113-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2113'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2114-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 2114
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2114'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2115-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 2115
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2115'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2116-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 2116
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2116'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2117-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 2117
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2117'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2118-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 2118
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2118'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2119-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 2119
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2119'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2120-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 2120
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'workload-2120'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - source_labels: [__meta_gce_label_test_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_name
    - source_labels: [__meta_gce_label_test_run_id]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: test_run_id
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

- job_name: 'workload-2112-stan-cct-workload-ca-central1'
  static_configs:
  - targets: ['3.99.161.171:2112']
    labels:
      host: 'stan-cct-workload-ca-central1'
      cluster: 'cct-aws-1'

- job_name: 'roachtest-runner-cockroach-ephemeral-us-west4-c'
  gce_sd_configs:
    - project: cockroach-ephemeral
      zone: us-west4-c
      port: 2113
  relabel_configs:
    - source_labels: [__meta_gce_private_ip]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: host_ip
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: 'roachtest-runner'
      target_label: job
    - source_labels: [__meta_gce_instance_name]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: instance
    - source_labels: [__meta_gce_tags]
      regex:  '(.*)'
      replacement: '${1}'
      # network tags
      target_label: instance_tags
    - source_labels: [__meta_gce_label_cluster]
      regex:  '(.*)'
      replacement: '${1}'
      target_label: cluster
    - target_label: project
      replacement: cockroach-ephemeral
    - target_label: zone
      replacement: us-west4-c
    - source_labels: [zone]
      regex: (^.+[0-9])(-[a-f]$)
      replacement: '${1}'
      target_label: region

   
