YACC="../../../../../bin/goyacc"

generate: irgen.go
.PHONY: generate

irgen.go: irgen.y Makefile
	set -eo pipefail; ret=`$(YACC) -o irgen.go.tmp -p irgen irgen.y`; \
	  ! echo "$$ret" | grep -F conflicts
	(echo '// Code generated by goyacc.'; \
	 echo '// GENERATED FILE DO NOT EDIT'; \
	 cat $@.tmp) >$@ && rm -f $@.tmp

clean:
	rm -f `cat .gitignore`
