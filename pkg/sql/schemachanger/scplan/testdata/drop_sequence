create-sequence
CREATE SEQUENCE defaultdb.SQ1
----

ops
DROP SEQUENCE defaultdb.SQ1 CASCADE
----
Stage 0
  transitions:
    from: [Sequence:{DescID: 52}, PUBLIC, DROP]
    to:   [Sequence:{DescID: 52}, TXN_DROPPED, DROP]
  ops:
    *scop.MarkDescriptorAsDroppedSynthetically
      DescID: 52
Stage 1 (non-revertible)
  transitions:
    from: [Sequence:{DescID: 52}, TXN_DROPPED, DROP]
    to:   [Sequence:{DescID: 52}, DROPPED, DROP]
  ops:
    *scop.MarkDescriptorAsDropped
      DescID: 52
Stage 2 (non-revertible)
  transitions:
    from: [Sequence:{DescID: 52}, DROPPED, DROP]
    to:   [Sequence:{DescID: 52}, ABSENT, DROP]
  ops:
    *scop.DrainDescriptorName
      TableID: 52
    *scop.LogEvent
      DescID: 52
      Direction: 2
      Element:
        sequence:
          sequenceId: 52
      Metadata:
        Statement: DROP SEQUENCE defaultdb.sq1 CASCADE
        TargetMetadata:
          SourceElementID: 1
          SubWorkID: 1
        Username: root
    *scop.CreateGcJobForDescriptor
      DescID: 52

create-table
CREATE TABLE defaultdb.blog_posts (id INT PRIMARY KEY, val int DEFAULT nextval('defaultdb.sq1'), title text)
----

create-table
CREATE TABLE defaultdb.blog_posts2 (id INT PRIMARY KEY, val int DEFAULT nextval('defaultdb.sq1'), title text)
----

ops
DROP SEQUENCE defaultdb.SQ1 CASCADE
----
Stage 0
  transitions:
    from: [DefaultExpression:{DescID: 53, ColumnID: 2}, PUBLIC, DROP]
    to:   [DefaultExpression:{DescID: 53, ColumnID: 2}, PUBLIC, DROP]
    from: [DefaultExpression:{DescID: 54, ColumnID: 2}, PUBLIC, DROP]
    to:   [DefaultExpression:{DescID: 54, ColumnID: 2}, PUBLIC, DROP]
    from: [Sequence:{DescID: 52}, PUBLIC, DROP]
    to:   [Sequence:{DescID: 52}, TXN_DROPPED, DROP]
  ops:
    *scop.MarkDescriptorAsDroppedSynthetically
      DescID: 52
Stage 1 (non-revertible)
  transitions:
    from: [DefaultExpression:{DescID: 53, ColumnID: 2}, PUBLIC, DROP]
    to:   [DefaultExpression:{DescID: 53, ColumnID: 2}, ABSENT, DROP]
    from: [DefaultExpression:{DescID: 54, ColumnID: 2}, PUBLIC, DROP]
    to:   [DefaultExpression:{DescID: 54, ColumnID: 2}, ABSENT, DROP]
    from: [Sequence:{DescID: 52}, TXN_DROPPED, DROP]
    to:   [Sequence:{DescID: 52}, DROPPED, DROP]
  ops:
    *scop.RemoveColumnDefaultExpression
      ColumnID: 2
      TableID: 53
    *scop.UpdateRelationDeps
      TableID: 53
    *scop.RemoveColumnDefaultExpression
      ColumnID: 2
      TableID: 54
    *scop.UpdateRelationDeps
      TableID: 54
    *scop.MarkDescriptorAsDropped
      DescID: 52
Stage 2 (non-revertible)
  transitions:
    from: [DefaultExpression:{DescID: 53, ColumnID: 2}, ABSENT, DROP]
    to:   [DefaultExpression:{DescID: 53, ColumnID: 2}, ABSENT, DROP]
    from: [DefaultExpression:{DescID: 54, ColumnID: 2}, ABSENT, DROP]
    to:   [DefaultExpression:{DescID: 54, ColumnID: 2}, ABSENT, DROP]
    from: [Sequence:{DescID: 52}, DROPPED, DROP]
    to:   [Sequence:{DescID: 52}, ABSENT, DROP]
  ops:
    *scop.DrainDescriptorName
      TableID: 52
    *scop.LogEvent
      DescID: 52
      Direction: 2
      Element:
        sequence:
          sequenceId: 52
      Metadata:
        Statement: DROP SEQUENCE defaultdb.sq1 CASCADE
        TargetMetadata:
          SourceElementID: 1
          SubWorkID: 1
        Username: root
    *scop.CreateGcJobForDescriptor
      DescID: 52


deps
DROP SEQUENCE defaultdb.SQ1 CASCADE
----
