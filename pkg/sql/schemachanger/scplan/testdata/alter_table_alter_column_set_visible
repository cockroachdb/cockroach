setup
CREATE TABLE defaultdb.t (
  i INT PRIMARY KEY,
  a INT,
  b INT NOT VISIBLE
);
----

ops
ALTER TABLE defaultdb.t ALTER COLUMN b SET VISIBLE;
----
StatementPhase stage 1 of 1 with 1 MutationType op
  transitions:
    [[ColumnHidden:{DescID: 104, ColumnID: 3}, ABSENT], PUBLIC] -> ABSENT
  ops:
    *scop.MakeColumnVisible
      ColumnID: 3
      TableID: 104
PreCommitPhase stage 1 of 2 with 1 MutationType op
  transitions:
    [[ColumnHidden:{DescID: 104, ColumnID: 3}, ABSENT], ABSENT] -> PUBLIC
  ops:
    *scop.UndoAllInTxnImmediateMutationOpSideEffects
      {}
PreCommitPhase stage 2 of 2 with 1 MutationType op
  transitions:
    [[ColumnHidden:{DescID: 104, ColumnID: 3}, ABSENT], PUBLIC] -> ABSENT
  ops:
    *scop.MakeColumnVisible
      ColumnID: 3
      TableID: 104

ops
ALTER TABLE defaultdb.t ALTER COLUMN a SET NOT VISIBLE;
----
StatementPhase stage 1 of 1 with 1 MutationType op
  transitions:
    [[ColumnHidden:{DescID: 104, ColumnID: 2}, PUBLIC], ABSENT] -> PUBLIC
  ops:
    *scop.MakeColumnHidden
      ColumnID: 2
      TableID: 104
PreCommitPhase stage 1 of 2 with 1 MutationType op
  transitions:
    [[ColumnHidden:{DescID: 104, ColumnID: 2}, PUBLIC], PUBLIC] -> ABSENT
  ops:
    *scop.UndoAllInTxnImmediateMutationOpSideEffects
      {}
PreCommitPhase stage 2 of 2 with 1 MutationType op
  transitions:
    [[ColumnHidden:{DescID: 104, ColumnID: 2}, PUBLIC], ABSENT] -> PUBLIC
  ops:
    *scop.MakeColumnHidden
      ColumnID: 2
      TableID: 104

ops
ALTER TABLE defaultdb.t ALTER COLUMN a SET VISIBLE;
----
StatementPhase stage 1 of 1 with no ops
  transitions:
  no ops
PreCommitPhase stage 1 of 1 with 1 MutationType op
  transitions:
  ops:
    *scop.UndoAllInTxnImmediateMutationOpSideEffects
      {}

ops
ALTER TABLE defaultdb.t ALTER COLUMN b SET NOT VISIBLE;
----
StatementPhase stage 1 of 1 with no ops
  transitions:
  no ops
PreCommitPhase stage 1 of 1 with 1 MutationType op
  transitions:
  ops:
    *scop.UndoAllInTxnImmediateMutationOpSideEffects
      {}
