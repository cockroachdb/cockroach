schema
i32: Int32
i64: Int64
u32: Uint32
s:   String
----

# Define 5 entities for use below. Note e5 and e1 are the same.
entities
e2: {i32: 1, i64: 1, u32: 2, s: hi}
e3: {i32: 1, i64: 1, u32: 1}
e4: {i32: 1, i64: 1}
e5: {i32: 1, i64: 1, u32: 1, s: 'hi'}
e6: {i32: 2, i64: 1, u32: 1, s: 'hi'}
e7: {i32: 2, i64: 1, u32: 2, s: yo}
e8: {i32: 2, i64: 1, u32: 2, s: sup}
e9: {i32: 3, i64: 2, u32: 2, s: yo}
e10: {i32: 4, i64: 2, u32: 2, s: howdy}
----



query name=q
- a[i32] = b[i32]
- a[i64] = b[i64]
- a[s] = 'hi'
- a[s] = b[s]
- a != b
----

new-db name=indexed
- [i32, i64]
- [s]
----

insert db=indexed
[e2, e3, e4, e5, e6, e7, e8, e9, e10]
----

eval db=indexed query=q
[a, b]
----
e2,e5
e5,e2

new-db name=moreindexed
- [s, i32, i64]
----

insert db=moreindexed
[e2, e3, e4, e5, e6, e7, e8, e9, e10]
----

eval db=moreindexed query=q
[a, b]
----
e2,e5
e5,e2

query name=q3
- a[i32] = b[i32]
- a[i64] = b[i64]
- a[u32] = 1
- b[u32] = 2
- c[s] = b[s]
- c != b
- a != c
----

eval db=indexed query=q3
[a, b, c]
----
e3,e2,e5
e3,e2,e6
e5,e2,e6
e6,e7,e9
