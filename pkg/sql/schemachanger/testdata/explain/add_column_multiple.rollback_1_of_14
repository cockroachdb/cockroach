/* setup */
CREATE DATABASE db;
CREATE TABLE db.public.tbl (i INT PRIMARY KEY, k INT);
CREATE SEQUENCE db.public.sq1;

/* test */
ALTER TABLE db.public.tbl ADD COLUMN l INT UNIQUE DEFAULT NULL, ADD COLUMN j INT NOT NULL DEFAULT 42, ADD COLUMN m INT NOT NULL DEFAULT 42;
EXPLAIN (ddl) rollback at post-commit stage 1 of 14;
----
Schema change plan for rolling back ALTER TABLE ‹db›.public.‹tbl› ADD COLUMN ‹l› INT8 UNIQUE DEFAULT ‹NULL›, ADD COLUMN ‹j› INT8 NOT NULL DEFAULT ‹42›, ADD COLUMN ‹m› INT8 NOT NULL DEFAULT ‹42›;
 └── PostCommitNonRevertiblePhase
      └── Stage 1 of 1 in PostCommitNonRevertiblePhase
           ├── 27 elements transitioning toward ABSENT
           │    ├── DELETE_ONLY   → ABSENT Column:{DescID: 106, ColumnID: 3}
           │    ├── PUBLIC        → ABSENT ColumnName:{DescID: 106, Name: l, ColumnID: 3}
           │    ├── PUBLIC        → ABSENT ColumnType:{DescID: 106, ColumnFamilyID: 0, ColumnID: 3}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 3, IndexID: 3}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 1, IndexID: 3}
           │    ├── DELETE_ONLY   → ABSENT TemporaryIndex:{DescID: 106, IndexID: 3, ConstraintID: 3, SourceIndexID: 1}
           │    ├── DELETE_ONLY   → ABSENT Column:{DescID: 106, ColumnID: 4}
           │    ├── PUBLIC        → ABSENT ColumnName:{DescID: 106, Name: j, ColumnID: 4}
           │    ├── PUBLIC        → ABSENT ColumnType:{DescID: 106, ColumnFamilyID: 0, ColumnID: 4}
           │    ├── PUBLIC        → ABSENT ColumnDefaultExpression:{DescID: 106, ColumnID: 4}
           │    ├── BACKFILL_ONLY → ABSENT PrimaryIndex:{DescID: 106, IndexID: 4, ConstraintID: 4, TemporaryIndexID: 5, SourceIndexID: 1}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 1, IndexID: 4}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 2, IndexID: 4}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 3, IndexID: 4}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 4, IndexID: 4}
           │    ├── PUBLIC        → ABSENT IndexData:{DescID: 106, IndexID: 4}
           │    ├── DELETE_ONLY   → ABSENT TemporaryIndex:{DescID: 106, IndexID: 5, ConstraintID: 5, SourceIndexID: 1}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 1, IndexID: 5}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 2, IndexID: 5}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 3, IndexID: 5}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 4, IndexID: 5}
           │    ├── DELETE_ONLY   → ABSENT Column:{DescID: 106, ColumnID: 5}
           │    ├── PUBLIC        → ABSENT ColumnName:{DescID: 106, Name: m, ColumnID: 5}
           │    ├── PUBLIC        → ABSENT ColumnType:{DescID: 106, ColumnFamilyID: 0, ColumnID: 5}
           │    ├── PUBLIC        → ABSENT ColumnDefaultExpression:{DescID: 106, ColumnID: 5}
           │    ├── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 5, IndexID: 4}
           │    └── PUBLIC        → ABSENT IndexColumn:{DescID: 106, ColumnID: 5, IndexID: 5}
           └── 26 Mutation operations
                ├── SetColumnName {"ColumnID":3,"Name":"crdb_internal_co...","TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":3,"IndexID":3,"TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":1,"IndexID":3,"Kind":1,"TableID":106}
                ├── MakeIndexAbsent {"IndexID":3,"TableID":106}
                ├── SetColumnName {"ColumnID":4,"Name":"crdb_internal_co...","TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":1,"IndexID":4,"TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":2,"IndexID":4,"Kind":2,"TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":3,"IndexID":4,"Kind":2,"Ordinal":1,"TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":4,"IndexID":4,"Kind":2,"Ordinal":2,"TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":1,"IndexID":5,"TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":2,"IndexID":5,"Kind":2,"TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":3,"IndexID":5,"Kind":2,"Ordinal":1,"TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":4,"IndexID":5,"Kind":2,"Ordinal":2,"TableID":106}
                ├── SetColumnName {"ColumnID":5,"Name":"crdb_internal_co...","TableID":106}
                ├── RemoveColumnDefaultExpression {"ColumnID":5,"TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":5,"IndexID":4,"Kind":2,"Ordinal":3,"TableID":106}
                ├── RemoveColumnFromIndex {"ColumnID":5,"IndexID":5,"Kind":2,"Ordinal":3,"TableID":106}
                ├── RemoveColumnDefaultExpression {"ColumnID":4,"TableID":106}
                ├── MakeIndexAbsent {"IndexID":4,"TableID":106}
                ├── CreateGCJobForIndex {"IndexID":4,"TableID":106}
                ├── MakeIndexAbsent {"IndexID":5,"TableID":106}
                ├── MakeDeleteOnlyColumnAbsent {"ColumnID":3,"TableID":106}
                ├── MakeDeleteOnlyColumnAbsent {"ColumnID":5,"TableID":106}
                ├── MakeDeleteOnlyColumnAbsent {"ColumnID":4,"TableID":106}
                ├── RemoveJobStateFromDescriptor {"DescriptorID":106}
                └── UpdateSchemaChangerJob {"IsNonCancelable":true,"RunningStatus":"all stages compl..."}
