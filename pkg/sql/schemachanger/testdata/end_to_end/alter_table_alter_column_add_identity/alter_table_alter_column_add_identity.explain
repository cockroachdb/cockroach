/* setup */
CREATE TABLE t (
    i INT,
    j INT NOT NULL
);

/* test */
EXPLAIN (DDL) ALTER TABLE t ALTER COLUMN j ADD GENERATED ALWAYS AS IDENTITY;
----
Schema change plan for ALTER TABLE ‹defaultdb›.‹public›.‹t› ALTER COLUMN ‹j› ADD GENERATED ALWAYS AS IDENTITY;
 ├── StatementPhase
 │    └── Stage 1 of 1 in StatementPhase
 │         ├── 17 elements transitioning toward PUBLIC
 │         │    ├── ABSENT → PUBLIC Sequence:{DescID: 105 (t_j_seq+)}
 │         │    ├── ABSENT → PUBLIC Namespace:{DescID: 105 (t_j_seq+), Name: "t_j_seq", ReferencedDescID: 101 (public)}
 │         │    ├── ABSENT → PUBLIC SchemaChild:{DescID: 105 (t_j_seq+), ReferencedDescID: 101 (public)}
 │         │    ├── ABSENT → PUBLIC TableData:{DescID: 105 (t_j_seq+), ReferencedDescID: 100 (defaultdb)}
 │         │    ├── ABSENT → PUBLIC Column:{DescID: 105 (t_j_seq+), ColumnID: 1 (value+)}
 │         │    ├── ABSENT → PUBLIC ColumnType:{DescID: 105 (t_j_seq+), ColumnFamilyID: 0, ColumnID: 1 (value+), TypeName: "INT8"}
 │         │    ├── ABSENT → PUBLIC ColumnNotNull:{DescID: 105 (t_j_seq+), ColumnID: 1 (value+), IndexID: 0}
 │         │    ├── ABSENT → PUBLIC ColumnName:{DescID: 105 (t_j_seq+), Name: "value", ColumnID: 1 (value+)}
 │         │    ├── ABSENT → PUBLIC PrimaryIndex:{DescID: 105 (t_j_seq+), IndexID: 1 (primary+)}
 │         │    ├── ABSENT → PUBLIC IndexName:{DescID: 105 (t_j_seq+), Name: "primary", IndexID: 1 (primary+)}
 │         │    ├── ABSENT → PUBLIC IndexColumn:{DescID: 105 (t_j_seq+), ColumnID: 1 (value+), IndexID: 1 (primary+)}
 │         │    ├── ABSENT → PUBLIC Owner:{DescID: 105 (t_j_seq+)}
 │         │    ├── ABSENT → PUBLIC UserPrivileges:{DescID: 105 (t_j_seq+), Name: "admin"}
 │         │    ├── ABSENT → PUBLIC UserPrivileges:{DescID: 105 (t_j_seq+), Name: "root"}
 │         │    ├── ABSENT → PUBLIC SequenceOwner:{DescID: 104 (t), ColumnID: 2 (j), ReferencedDescID: 105 (t_j_seq+)}
 │         │    ├── ABSENT → PUBLIC ColumnDefaultExpression:{DescID: 104 (t), ColumnID: 2 (j), ReferencedSequenceIDs: [105 (t_j_seq+)], Expr: nextval(105:::REGCLASS)}
 │         │    └── ABSENT → PUBLIC ColumnGeneratedAsIdentity:{DescID: 104 (t), ColumnID: 2 (j), GeneratedAsIdentityType: GENERATED_ALWAYS, Value: ""}
 │         ├── 1 element transitioning toward TRANSIENT_PUBLIC
 │         │    └── PUBLIC → ABSENT TableSchemaLocked:{DescID: 104 (t)}
 │         └── 29 Mutation operations
 │              ├── SetTableSchemaLocked {"TableID":104}
 │              ├── CreateSequenceDescriptor {"SequenceID":105}
 │              ├── SetNameInDescriptor {"DescriptorID":105,"Name":"t_j_seq"}
 │              ├── AddDescriptorName {"Namespace":{"DatabaseID":100,"DescriptorID":105,"Name":"t_j_seq","SchemaID":101}}
 │              ├── SetObjectParentID {"ObjParent":{"ChildObjectID":105,"SchemaID":101}}
 │              ├── MakeAbsentColumnDeleteOnly {"Column":{"ColumnID":1,"TableID":105}}
 │              ├── UpsertColumnType {"ColumnType":{"ColumnID":1,"TableID":105}}
 │              ├── SetColumnName {"ColumnID":1,"Name":"value","TableID":105}
 │              ├── MakeAbsentIndexBackfilling {"Index":{"IndexID":1,"IsUnique":true,"TableID":105}}
 │              ├── AddColumnToIndex {"ColumnID":1,"IndexID":1,"TableID":105}
 │              ├── UpdateOwner {"Owner":{"DescriptorID":105,"Owner":"root"}}
 │              ├── UpdateUserPrivileges {"Privileges":{"DescriptorID":105,"Privileges":2,"UserName":"admin","WithGrantOption":2}}
 │              ├── UpdateUserPrivileges {"Privileges":{"DescriptorID":105,"Privileges":2,"UserName":"root","WithGrantOption":2}}
 │              ├── AddSequenceOwner {"ColumnID":2,"OwnedSequenceID":105,"TableID":104}
 │              ├── AddOwnerBackReferenceInSequence {"ColumnID":2,"SequenceID":105,"TableID":104}
 │              ├── AddColumnDefaultExpression {"Default":{"ColumnID":2,"TableID":104}}
 │              ├── UpdateTableBackReferencesInSequences {"BackReferencedColumnID":2,"BackReferencedTableID":104}
 │              ├── AddColumnGeneratedAsIdentity {"GeneratedAsIdentity":{"ColumnID":2,"TableID":104,"Type":1}}
 │              ├── MakeDeleteOnlyColumnWriteOnly {"ColumnID":1,"TableID":105}
 │              ├── MakeAbsentColumnNotNullWriteOnly {"ColumnID":1,"TableID":105}
 │              ├── MakeBackfillingIndexDeleteOnly {"IndexID":1,"TableID":105}
 │              ├── MakeValidatedColumnNotNullPublic {"ColumnID":1,"TableID":105}
 │              ├── MakeBackfilledIndexMerging {"IndexID":1,"TableID":105}
 │              ├── MakeWriteOnlyColumnPublic {"ColumnID":1,"TableID":105}
 │              ├── MakeMergedIndexWriteOnly {"IndexID":1,"TableID":105}
 │              ├── SetIndexName {"IndexID":1,"Name":"primary","TableID":105}
 │              ├── MakeValidatedPrimaryIndexPublic {"IndexID":1,"TableID":105}
 │              ├── InitSequence {"SequenceID":105}
 │              └── MarkDescriptorAsPublic {"DescriptorID":105}
 ├── PreCommitPhase
 │    ├── Stage 1 of 2 in PreCommitPhase
 │    │    ├── 17 elements transitioning toward PUBLIC
 │    │    │    ├── PUBLIC → ABSENT Sequence:{DescID: 105 (t_j_seq+)}
 │    │    │    ├── PUBLIC → ABSENT Namespace:{DescID: 105 (t_j_seq+), Name: "t_j_seq", ReferencedDescID: 101 (public)}
 │    │    │    ├── PUBLIC → ABSENT SchemaChild:{DescID: 105 (t_j_seq+), ReferencedDescID: 101 (public)}
 │    │    │    ├── PUBLIC → ABSENT TableData:{DescID: 105 (t_j_seq+), ReferencedDescID: 100 (defaultdb)}
 │    │    │    ├── PUBLIC → ABSENT Column:{DescID: 105 (t_j_seq+), ColumnID: 1 (value+)}
 │    │    │    ├── PUBLIC → ABSENT ColumnType:{DescID: 105 (t_j_seq+), ColumnFamilyID: 0, ColumnID: 1 (value+), TypeName: "INT8"}
 │    │    │    ├── PUBLIC → ABSENT ColumnNotNull:{DescID: 105 (t_j_seq+), ColumnID: 1 (value+), IndexID: 0}
 │    │    │    ├── PUBLIC → ABSENT ColumnName:{DescID: 105 (t_j_seq+), Name: "value", ColumnID: 1 (value+)}
 │    │    │    ├── PUBLIC → ABSENT PrimaryIndex:{DescID: 105 (t_j_seq+), IndexID: 1 (primary+)}
 │    │    │    ├── PUBLIC → ABSENT IndexName:{DescID: 105 (t_j_seq+), Name: "primary", IndexID: 1 (primary+)}
 │    │    │    ├── PUBLIC → ABSENT IndexColumn:{DescID: 105 (t_j_seq+), ColumnID: 1 (value+), IndexID: 1 (primary+)}
 │    │    │    ├── PUBLIC → ABSENT Owner:{DescID: 105 (t_j_seq+)}
 │    │    │    ├── PUBLIC → ABSENT UserPrivileges:{DescID: 105 (t_j_seq+), Name: "admin"}
 │    │    │    ├── PUBLIC → ABSENT UserPrivileges:{DescID: 105 (t_j_seq+), Name: "root"}
 │    │    │    ├── PUBLIC → ABSENT SequenceOwner:{DescID: 104 (t), ColumnID: 2 (j), ReferencedDescID: 105 (t_j_seq+)}
 │    │    │    ├── PUBLIC → ABSENT ColumnDefaultExpression:{DescID: 104 (t), ColumnID: 2 (j), ReferencedSequenceIDs: [105 (t_j_seq+)], Expr: nextval(105:::REGCLASS)}
 │    │    │    └── PUBLIC → ABSENT ColumnGeneratedAsIdentity:{DescID: 104 (t), ColumnID: 2 (j), GeneratedAsIdentityType: GENERATED_ALWAYS, Value: ""}
 │    │    ├── 1 element transitioning toward TRANSIENT_PUBLIC
 │    │    │    └── ABSENT → PUBLIC TableSchemaLocked:{DescID: 104 (t)}
 │    │    └── 1 Mutation operation
 │    │         └── UndoAllInTxnImmediateMutationOpSideEffects
 │    └── Stage 2 of 2 in PreCommitPhase
 │         ├── 17 elements transitioning toward PUBLIC
 │         │    ├── ABSENT → PUBLIC Sequence:{DescID: 105 (t_j_seq+)}
 │         │    ├── ABSENT → PUBLIC Namespace:{DescID: 105 (t_j_seq+), Name: "t_j_seq", ReferencedDescID: 101 (public)}
 │         │    ├── ABSENT → PUBLIC SchemaChild:{DescID: 105 (t_j_seq+), ReferencedDescID: 101 (public)}
 │         │    ├── ABSENT → PUBLIC TableData:{DescID: 105 (t_j_seq+), ReferencedDescID: 100 (defaultdb)}
 │         │    ├── ABSENT → PUBLIC Column:{DescID: 105 (t_j_seq+), ColumnID: 1 (value+)}
 │         │    ├── ABSENT → PUBLIC ColumnType:{DescID: 105 (t_j_seq+), ColumnFamilyID: 0, ColumnID: 1 (value+), TypeName: "INT8"}
 │         │    ├── ABSENT → PUBLIC ColumnNotNull:{DescID: 105 (t_j_seq+), ColumnID: 1 (value+), IndexID: 0}
 │         │    ├── ABSENT → PUBLIC ColumnName:{DescID: 105 (t_j_seq+), Name: "value", ColumnID: 1 (value+)}
 │         │    ├── ABSENT → PUBLIC PrimaryIndex:{DescID: 105 (t_j_seq+), IndexID: 1 (primary+)}
 │         │    ├── ABSENT → PUBLIC IndexName:{DescID: 105 (t_j_seq+), Name: "primary", IndexID: 1 (primary+)}
 │         │    ├── ABSENT → PUBLIC IndexColumn:{DescID: 105 (t_j_seq+), ColumnID: 1 (value+), IndexID: 1 (primary+)}
 │         │    ├── ABSENT → PUBLIC Owner:{DescID: 105 (t_j_seq+)}
 │         │    ├── ABSENT → PUBLIC UserPrivileges:{DescID: 105 (t_j_seq+), Name: "admin"}
 │         │    ├── ABSENT → PUBLIC UserPrivileges:{DescID: 105 (t_j_seq+), Name: "root"}
 │         │    ├── ABSENT → PUBLIC SequenceOwner:{DescID: 104 (t), ColumnID: 2 (j), ReferencedDescID: 105 (t_j_seq+)}
 │         │    ├── ABSENT → PUBLIC ColumnDefaultExpression:{DescID: 104 (t), ColumnID: 2 (j), ReferencedSequenceIDs: [105 (t_j_seq+)], Expr: nextval(105:::REGCLASS)}
 │         │    └── ABSENT → PUBLIC ColumnGeneratedAsIdentity:{DescID: 104 (t), ColumnID: 2 (j), GeneratedAsIdentityType: GENERATED_ALWAYS, Value: ""}
 │         ├── 1 element transitioning toward TRANSIENT_PUBLIC
 │         │    └── PUBLIC → ABSENT TableSchemaLocked:{DescID: 104 (t)}
 │         └── 33 Mutation operations
 │              ├── SetTableSchemaLocked {"TableID":104}
 │              ├── CreateSequenceDescriptor {"SequenceID":105}
 │              ├── SetNameInDescriptor {"DescriptorID":105,"Name":"t_j_seq"}
 │              ├── AddDescriptorName {"Namespace":{"DatabaseID":100,"DescriptorID":105,"Name":"t_j_seq","SchemaID":101}}
 │              ├── UpdateTTLScheduleMetadata {"NewName":"t_j_seq","TableID":105}
 │              ├── SetObjectParentID {"ObjParent":{"ChildObjectID":105,"SchemaID":101}}
 │              ├── MakeAbsentColumnDeleteOnly {"Column":{"ColumnID":1,"TableID":105}}
 │              ├── UpsertColumnType {"ColumnType":{"ColumnID":1,"TableID":105}}
 │              ├── SetColumnName {"ColumnID":1,"Name":"value","TableID":105}
 │              ├── MakeAbsentIndexBackfilling {"Index":{"IndexID":1,"IsUnique":true,"TableID":105}}
 │              ├── AddColumnToIndex {"ColumnID":1,"IndexID":1,"TableID":105}
 │              ├── UpdateOwner {"Owner":{"DescriptorID":105,"Owner":"root"}}
 │              ├── UpdateUserPrivileges {"Privileges":{"DescriptorID":105,"Privileges":2,"UserName":"admin","WithGrantOption":2}}
 │              ├── UpdateUserPrivileges {"Privileges":{"DescriptorID":105,"Privileges":2,"UserName":"root","WithGrantOption":2}}
 │              ├── AddSequenceOwner {"ColumnID":2,"OwnedSequenceID":105,"TableID":104}
 │              ├── AddOwnerBackReferenceInSequence {"ColumnID":2,"SequenceID":105,"TableID":104}
 │              ├── AddColumnDefaultExpression {"Default":{"ColumnID":2,"TableID":104}}
 │              ├── UpdateTableBackReferencesInSequences {"BackReferencedColumnID":2,"BackReferencedTableID":104}
 │              ├── AddColumnGeneratedAsIdentity {"GeneratedAsIdentity":{"ColumnID":2,"TableID":104,"Type":1}}
 │              ├── MakeDeleteOnlyColumnWriteOnly {"ColumnID":1,"TableID":105}
 │              ├── MakeAbsentColumnNotNullWriteOnly {"ColumnID":1,"TableID":105}
 │              ├── MakeBackfillingIndexDeleteOnly {"IndexID":1,"TableID":105}
 │              ├── MakeValidatedColumnNotNullPublic {"ColumnID":1,"TableID":105}
 │              ├── MakeBackfilledIndexMerging {"IndexID":1,"TableID":105}
 │              ├── MakeWriteOnlyColumnPublic {"ColumnID":1,"TableID":105}
 │              ├── MakeMergedIndexWriteOnly {"IndexID":1,"TableID":105}
 │              ├── SetIndexName {"IndexID":1,"Name":"primary","TableID":105}
 │              ├── MakeValidatedPrimaryIndexPublic {"IndexID":1,"TableID":105}
 │              ├── InitSequence {"SequenceID":105}
 │              ├── MarkDescriptorAsPublic {"DescriptorID":105}
 │              ├── SetJobStateOnDescriptor {"DescriptorID":104,"Initialize":true}
 │              ├── SetJobStateOnDescriptor {"DescriptorID":105,"Initialize":true}
 │              └── CreateSchemaChangerJob {"RunningStatus":"Pending: Updatin..."}
 └── PostCommitPhase
      └── Stage 1 of 1 in PostCommitPhase
           ├── 1 element transitioning toward TRANSIENT_PUBLIC
           │    └── ABSENT → TRANSIENT_PUBLIC TableSchemaLocked:{DescID: 104 (t)}
           └── 4 Mutation operations
                ├── SetTableSchemaLocked {"Locked":true,"TableID":104}
                ├── RemoveJobStateFromDescriptor {"DescriptorID":104}
                ├── RemoveJobStateFromDescriptor {"DescriptorID":105}
                └── UpdateSchemaChangerJob {"IsNonCancelable":true,"RunningStatus":"all stages compl..."}
