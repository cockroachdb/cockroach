/* setup */
CREATE DATABASE db;
CREATE SCHEMA db.sc;

/* test */
EXPLAIN (DDL) DROP SCHEMA db.sc;
----
Schema change plan for DROP SCHEMA ‹db›.‹sc›;
 ├── StatementPhase
 │    └── Stage 1 of 1 in StatementPhase
 │         ├── 6 elements transitioning toward ABSENT
 │         │    ├── PUBLIC → ABSENT  Namespace:{DescID: 10002 (sc-), Name: "sc", ReferencedDescID: 10000 (db)}
 │         │    ├── PUBLIC → ABSENT  Owner:{DescID: 10002 (sc-)}
 │         │    ├── PUBLIC → ABSENT  UserPrivileges:{DescID: 10002 (sc-), Name: "admin"}
 │         │    ├── PUBLIC → ABSENT  UserPrivileges:{DescID: 10002 (sc-), Name: "root"}
 │         │    ├── PUBLIC → DROPPED Schema:{DescID: 10002 (sc-)}
 │         │    └── PUBLIC → ABSENT  SchemaParent:{DescID: 10002 (sc-), ReferencedDescID: 10000 (db)}
 │         └── 6 Mutation operations
 │              ├── MarkDescriptorAsDropped {"DescriptorID":10002}
 │              ├── RemoveSchemaParent {"Parent":{"ParentDatabaseID":10000,"SchemaID":10002}}
 │              ├── DrainDescriptorName {"Namespace":{"DatabaseID":10000,"DescriptorID":10002,"Name":"sc"}}
 │              ├── NotImplementedForPublicObjects {"DescID":10002,"ElementType":"scpb.Owner"}
 │              ├── RemoveUserPrivileges {"DescriptorID":10002,"User":"admin"}
 │              └── RemoveUserPrivileges {"DescriptorID":10002,"User":"root"}
 ├── PreCommitPhase
 │    ├── Stage 1 of 2 in PreCommitPhase
 │    │    ├── 6 elements transitioning toward ABSENT
 │    │    │    ├── ABSENT  → PUBLIC Namespace:{DescID: 10002 (sc-), Name: "sc", ReferencedDescID: 10000 (db)}
 │    │    │    ├── ABSENT  → PUBLIC Owner:{DescID: 10002 (sc-)}
 │    │    │    ├── ABSENT  → PUBLIC UserPrivileges:{DescID: 10002 (sc-), Name: "admin"}
 │    │    │    ├── ABSENT  → PUBLIC UserPrivileges:{DescID: 10002 (sc-), Name: "root"}
 │    │    │    ├── DROPPED → PUBLIC Schema:{DescID: 10002 (sc-)}
 │    │    │    └── ABSENT  → PUBLIC SchemaParent:{DescID: 10002 (sc-), ReferencedDescID: 10000 (db)}
 │    │    └── 1 Mutation operation
 │    │         └── UndoAllInTxnImmediateMutationOpSideEffects
 │    └── Stage 2 of 2 in PreCommitPhase
 │         ├── 6 elements transitioning toward ABSENT
 │         │    ├── PUBLIC → ABSENT  Namespace:{DescID: 10002 (sc-), Name: "sc", ReferencedDescID: 10000 (db)}
 │         │    ├── PUBLIC → ABSENT  Owner:{DescID: 10002 (sc-)}
 │         │    ├── PUBLIC → ABSENT  UserPrivileges:{DescID: 10002 (sc-), Name: "admin"}
 │         │    ├── PUBLIC → ABSENT  UserPrivileges:{DescID: 10002 (sc-), Name: "root"}
 │         │    ├── PUBLIC → DROPPED Schema:{DescID: 10002 (sc-)}
 │         │    └── PUBLIC → ABSENT  SchemaParent:{DescID: 10002 (sc-), ReferencedDescID: 10000 (db)}
 │         └── 9 Mutation operations
 │              ├── MarkDescriptorAsDropped {"DescriptorID":10002}
 │              ├── RemoveSchemaParent {"Parent":{"ParentDatabaseID":10000,"SchemaID":10002}}
 │              ├── DrainDescriptorName {"Namespace":{"DatabaseID":10000,"DescriptorID":10002,"Name":"sc"}}
 │              ├── NotImplementedForPublicObjects {"DescID":10002,"ElementType":"scpb.Owner"}
 │              ├── RemoveUserPrivileges {"DescriptorID":10002,"User":"admin"}
 │              ├── RemoveUserPrivileges {"DescriptorID":10002,"User":"root"}
 │              ├── SetJobStateOnDescriptor {"DescriptorID":10000,"Initialize":true}
 │              ├── SetJobStateOnDescriptor {"DescriptorID":10002,"Initialize":true}
 │              └── CreateSchemaChangerJob {"NonCancelable":true,"RunningStatus":"PostCommitNonRev..."}
 └── PostCommitNonRevertiblePhase
      └── Stage 1 of 1 in PostCommitNonRevertiblePhase
           ├── 1 element transitioning toward ABSENT
           │    └── DROPPED → ABSENT Schema:{DescID: 10002 (sc-)}
           └── 4 Mutation operations
                ├── DeleteDescriptor {"DescriptorID":10002}
                ├── RemoveJobStateFromDescriptor {"DescriptorID":10000}
                ├── RemoveJobStateFromDescriptor {"DescriptorID":10002}
                └── UpdateSchemaChangerJob {"IsNonCancelable":true,"RunningStatus":"all stages compl..."}
