statement ok
CREATE PROCEDURE p() LANGUAGE SQL AS 'SELECT 1'

# The isProcedure field of the descriptor should be set to true for a procedure.
query T
SELECT d->'function'->'isProcedure' FROM (
  SELECT crdb_internal.pb_to_json('cockroach.sql.sqlbase.Descriptor', descriptor, false) d
  FROM system.descriptor
) WHERE d->'function'->'name' = '"p"'
----
true

statement ok
CREATE SEQUENCE s

statement ok
CREATE OR REPLACE PROCEDURE p() LANGUAGE SQL AS $$
  SELECT nextval('s');
$$

statement error pgcode 0A000 unimplemented: procedures not supported
CALL p()
