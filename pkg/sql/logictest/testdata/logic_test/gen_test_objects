# LogicTest: local

subtest example
subtest show_names
subtest randomize_columns
subtest templates/more_tables_generated_than_templates
subtest templates/fewer_tables_generated_than_templates

statement ok
CREATE DATABASE newdb2; SET database = newdb2

# More templates than tables requested: we get a random
# selection of the templates; there is no numbering.
query T
SELECT crdb_internal.generate_test_objects('{"seed":123,"counts":[10],"table_templates":["system.*"]}'::JSONB)->'generated_counts'
----
{"databases": 0, "schemas": 0, "tables": 10}

query T
SELECT table_name FROM [SHOW TABLES]
ORDER BY table_name
----
database_role_setting s
event log
external_connections
job_in'f  o
reports_metä́
role_options
settings
span_stats_samples
statement_diagnostics_requests
tenant_usag"e

# Again, the column names are randomized.
query TTT
SELECT quote_ident(table_name), quote_ident(column_name), data_type FROM "".information_schema.columns
WHERE table_catalog = 'newdb2' AND table_schema = 'public'
ORDER BY table_name, column_name
LIMIT 20
----
"database_role_setting s"  "!role__nam e"  text
"database_role_setting s"  database_id     oid
"database_role_setting s"  rowid           bigint
"database_role_setting s"  settings        ARRAY
"event log "               "
info"                 text
"event log "          "eventTyp̤e"        text
"event log "          "repo̻rtingI͢D"     bigint
"event log "          rowid               bigint
"event log "          "targetID"          bigint
"event log "          "timestamp|""       "                            timestamp without time zone
"event log "          "uniqueID"          bytea
external_connections  "cOnnection_name"   text
external_connections  "connection_'type"  text
external_connections  connection_details  bytea
external_connections  created             timestamp without time zone
external_connections  "ow  ner"           text
external_connections  rowid               bigint
external_connections  updated             timestamp without time zone
"job_in'f  o"         "i!Nfo_key"         bytea
"job_in'f  o"         job_id              bigint

subtest templates/different_templates_in_each_db
subtest show_config
subtest zero_dbs
subtest nonzero_dbs_zero_schemas
subtest nonzero_dbs_nonzero_schemas_zero_tables
subtest implicit_db
subtest implicit_db/zero_schemas
subtest implicit_db/zero_tables
subtest implicit_db/nonzero_schemas_zero_tables
subtest implicit_schema
subtest gen_dbs_and_public_tables_but_no_schema
subtest missing_pattern
subtest target_check_on_zero_count
subtest inv_name
subtest inv_privs
subtest inv_privs/many_descriptors
subtest disable_feature
subtest temp_schema
