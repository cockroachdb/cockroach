query TTTTTT
SELECT show_trgm(''), show_trgm('a'), show_trgm('ab'), show_trgm('abc'), show_trgm('abcd'), show_trgm(NULL)
----
{}  {"  a"," a "}  {"  a"," ab","ab "}  {"  a"," ab",abc,"bc "}  {"  a"," ab",abc,bcd,"cd "}  NULL

# Test that we sort the output trigrams.
query T
SELECT show_trgm('dcba')
----
{"  d"," dc","ba ",cba,dcb}

# Test that we downcase the input string.
query T
SELECT show_trgm('Foo')
----
{"  f"," fo",foo,"oo "}

# Test that we de-duplicate the output trigrams.
query T
SELECT show_trgm('aaaa')
----
{"  a"," aa","aa ",aaa}

# Test that we split at word boundaries.
query T
SELECT show_trgm('a b,c|d_e3 bl  ')
----
{"  a","  b","  c","  d","  e"," a "," b "," bl"," c "," d "," e3","bl ","e3 "}

# Test the similarity builtin.
query FFFF
SELECT similarity('foo', 'bar'), similarity('foo', 'far'), similarity('foo', 'for'), similarity('foo', 'foo')
----
0  0.142857149243355  0.333333343267441 1

query FFFF
SELECT similarity('f', 'bfr'), similarity('foo', 'foobar'), similarity('', 'blah'), similarity('blah', '')
----
0  0.375  0  0

query FFFF
SELECT similarity('FOO', 'foo'), similarity('foobar', 'foo'), similarity('foobar', 'barfoo'), similarity('blorp', 'z')
----
1  0.375  0.16666667163372  0
