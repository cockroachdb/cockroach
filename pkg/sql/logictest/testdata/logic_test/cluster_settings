statement ok
SET CLUSTER SETTING sql.log.slow_query.latency_threshold = '1ms'

statement error pq: cannot set sql.log.slow_query.latency_threshold to a negative duration
SET CLUSTER SETTING sql.log.slow_query.latency_threshold = '-1ms'

statement error pq: invalid cluster setting argument type
SET CLUSTER SETTING sql.log.slow_query.latency_threshold = '1'

statement error pq: invalid cluster setting argument type
SET CLUSTER SETTING sql.log.slow_query.latency_threshold = '-1'

statement error pq: could not parse "true" as type interval: interval
SET CLUSTER SETTING sql.log.slow_query.latency_threshold = 'true'

statement error pq: invalid cluster setting argument type
SET CLUSTER SETTING sql.log.slow_query.latency_threshold = true

statement error buffer message size must be at least 16 kB
SET CLUSTER SETTING sql.conn.max_read_buffer_message_size = '1b'

statement ok
SET CLUSTER SETTING sql.conn.max_read_buffer_message_size = '64MB'

# Test permissions for modifying cluster settings.

user testuser

statement error pq: only users with the MODIFYCLUSTERSETTING privilege are allowed to set 'sql.defaults.default_int_size'
SET CLUSTER SETTING sql.defaults.default_int_size = 4

statement error pq: only users with the admin role are allowed to set 'cloudstorage.gs.default.key'
SET CLUSTER SETTING cloudstorage.gs.default.key = 'foo'

user root

statement ok
ALTER USER testuser MODIFYCLUSTERSETTING

user testuser

statement ok
SET CLUSTER SETTING sql.defaults.default_int_size = 4

statement error pq: only users with the admin role are allowed to set 'cloudstorage.gs.default.key'
SET CLUSTER SETTING cloudstorage.gs.default.key = 'foo'

user root

statement ok
ALTER USER testuser NOMODIFYCLUSTERSETTING

user testuser

statement error pq: only users with the MODIFYCLUSTERSETTING privilege are allowed to set 'sql.defaults.default_int_size'
SET CLUSTER SETTING sql.defaults.default_int_size = 4

user root

statement ok
GRANT admin TO testuser

user testuser

statement ok
SET CLUSTER SETTING cloudstorage.gs.default.key = 'foo'