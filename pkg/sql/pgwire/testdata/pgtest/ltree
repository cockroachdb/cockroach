send
Query {"String": "DROP TABLE IF EXISTS ltree_table"}
Query {"String": "CREATE TABLE ltree_table (id INT4 PRIMARY KEY, t LTREE NOT NULL)"}
----

until ignore=NoticeResponse
ReadyForQuery
ReadyForQuery
----
{"Type":"CommandComplete","CommandTag":"DROP TABLE"}
{"Type":"ReadyForQuery","TxStatus":"I"}
{"Type":"CommandComplete","CommandTag":"CREATE TABLE"}
{"Type":"ReadyForQuery","TxStatus":"I"}

# binary 654666 is "A.B" in ASCII, the 01 in the beginning is a version byte.
send
Parse {"Query": "INSERT INTO ltree_table (t,id) VALUES ($1,$2)", "Name": "insert_0"}
Describe {"Name": "insert_0", "ObjectType": "S"}
Bind {"ParameterFormatCodes": [0,0], "PreparedStatement": "insert_0", "Parameters": [{"text":"A.B"}, {"text":"1"}]}
Execute
Sync
----

until
ReadyForQuery
----
{"Type":"ParseComplete"}
{"Type":"ParameterDescription","ParameterOIDs":[90010,23]}
{"Type":"NoData"}
{"Type":"BindComplete"}
{"Type":"CommandComplete","CommandTag":"INSERT 0 1"}
{"Type":"ReadyForQuery","TxStatus":"I"}


# Check with sending ParameterOIDs.
send
Parse {"Query": "SELECT u0.id, u0.t FROM ltree_table AS u0 WHERE (u0.t = $1)", "Name": "select_0", "ParameterOIDs": [90010]}
Describe {"Name": "select_0", "ObjectType": "S"}
Bind {"ParameterFormatCodes": [0], "PreparedStatement": "select_0", "Parameters": [{"text":"A.B"}], "ResultFormatCodes": [0,0]}
Execute
Sync
----

until ignore_table_oids
ReadyForQuery
----
{"Type":"ParseComplete"}
{"Type":"ParameterDescription","ParameterOIDs":[90010]}
{"Type":"RowDescription","Fields":[{"Name":"id","TableOID":0,"TableAttributeNumber":1,"DataTypeOID":23,"DataTypeSize":4,"TypeModifier":-1,"Format":0},{"Name":"t","TableOID":0,"TableAttributeNumber":2,"DataTypeOID":90010,"DataTypeSize":-1,"TypeModifier":-1,"Format":0}]}
{"Type":"BindComplete"}
{"Type":"DataRow","Values":[{"text":"1"},{"text":"A.B"}]}
{"Type":"CommandComplete","CommandTag":"SELECT 1"}
{"Type":"ReadyForQuery","TxStatus":"I"}

# Check without sending ParameterOIDs.
#send
#Parse {"Query": "SELECT u0.id, u0.t FROM ltree_table AS u0 WHERE (u0.t = $1)", "Name": "select_1"}
#Describe {"Name": "select_1", "ObjectType": "S"}
#Bind {"ParameterFormatCodes": [1], "PreparedStatement": "select_1", "Parameters": [{"binary":"..."}], "ResultFormatCodes": [0,0]}
#Execute
#Sync
#----
#
#until ignore_table_oids
#ReadyForQuery
#----
