index-constraints vars=(int, int) index=(@1)
@1 = 1 AND @2 = 2
----
[/1 - /1]
Remaining filter: @2 = 2

index-constraints vars=(int, int) index=(@2)
@1 = 1 AND @2 = 2
----
[/2 - /2]
Remaining filter: @1 = 1

index-constraints vars=(int, int) index=(@1, @2)
@1 = 1 AND @2 > NULL
----

index-constraints vars=(int, int) index=(@1, @2)
@2 = 1 AND @1 > NULL
----

index-constraints vars=(int) index=(@1)
@1 > 2 AND @1 < 4
----
[/3 - /3]

index-constraints vars=(int) index=(@1)
@1 >= 2 AND @1 <= 4
----
[/2 - /4]

index-constraints vars=(int, int) index=(@1, @2)
@1 > 2 AND @2 > 5
----
[/3/6 - ]
Remaining filter: @2 > 5

index-constraints vars=(int, int) index=(@1, @2 desc)
@1 > 2 AND @2 < 5
----
[/3/4 - ]
Remaining filter: @2 < 5

index-constraints vars=(int, int) index=(@1, @2)
@1 != 1 AND @2 > 5
----
(/NULL - /0]
[/2/6 - ]
Remaining filter: @2 > 5

index-constraints vars=(int, int) index=(@1, @2)
@1 != 1 AND @2 < 5
----
(/NULL - /0/4]
(/2/NULL - ]
Remaining filter: @2 < 5

index-constraints vars=(int) index=(@1)
@1 >= 1 AND @1 <= 5 AND @1 != 3
----
[/1 - /2]
[/4 - /5]

index-constraints vars=(int, int) index=(@1, @2)
@1 >= 1 AND @1 <= 2 AND @2 >= 8 AND @2 <= 9
----
[/1/8 - /2/9]
Remaining filter: (@2 >= 8) AND (@2 <= 9)

index-constraints vars=(int, int) index=(@1 desc, @2)
@1 >= 1 AND @1 <= 2 AND @2 >= 8 AND @2 <= 9
----
[/2/8 - /1/9]
Remaining filter: (@2 >= 8) AND (@2 <= 9)

index-constraints vars=(int, int) index=(@1, @2 desc)
@1 >= 1 AND @1 <= 2 AND @2 >= 8 AND @2 <= 9
----
[/1/9 - /2/8]
Remaining filter: (@2 >= 8) AND (@2 <= 9)

index-constraints vars=(int, int) index=(@1, @2)
@1 > 1 AND @1 < 4 AND @2 > 5 AND @2 < 8
----
[/2/6 - /3/7]
Remaining filter: (@2 > 5) AND (@2 < 8)

index-constraints vars=(int, int) index=(@1, @2)
@1 > 1 AND @1 < 4 AND @2 = 5
----
[/2/5 - /3/5]
Remaining filter: @2 = 5

index-constraints vars=(int, int) index=(@1, @2)
@1 = 1 AND @2 > 3 AND @2 < 5
----
[/1/4 - /1/4]

index-constraints vars=(int, int) index=(@1, @2)
@1 = 1 AND @2 > 3 AND @2 < 8
----
[/1/4 - /1/7]

index-constraints vars=(int) index=(@1)
@1 > 2 AND @1 < 1
----

index-constraints vars=(int, int) index=(@1, @2)
@1 = 1 AND @2 != 2
----
(/1/NULL - /1/1]
[/1/3 - /1]

index-constraints vars=(int, int) index=(@1, @2)
(@1 = 0 AND @2 = 0) OR (@1 = 10 AND @2 = 10)
----
[/0/0 - /0/0]
[/10/10 - /10/10]

# Note: columns 2 and 3 are not null so that (@2, @3) <= (15, 25) generates a
# tight span.
index-constraints vars=(int, int, int) index=(@1, @2 not null, @3 not null)
(@1 = 1) OR (@1 = 2 AND (@2, @3) >= (10, 20) AND (@2, @3) <= (15, 25))
----
[/1 - /1]
[/2/10/20 - /2/15/25]

index-constraints vars=(int, int) index=(@1, @2)
@1 >= 1 AND @1 <= 5 AND @2 != 2
----
(/1/NULL - /5]
Remaining filter: @2 != 2

index-constraints vars=(int, int, int) index=(@1, @2, @3)
@1 = 1 AND (@3 > 0 OR @3 < 10)
----
[/1 - /1]
Remaining filter: (@3 > 0) OR (@3 < 10)

index-constraints vars=(string, int) index=(@1, @2)
(((@1,) > ('us-east1',)) AND ((@1,) < ('us-west1',))) OR ((((@1,) > ('europe-west2',)) AND ((@1,) < ('us-east1',))) OR (((@1,) > ('us-west1',)) OR ((@1,) < ('europe-west2',))))
----
(/NULL - /'europe-west2')
[/e'europe-west2\x00' - /'us-east1')
[/e'us-east1\x00' - /'us-west1')
[/e'us-west1\x00' - ]

# The spans for @3 are applied after that for @2, so we lose information that
# [/1/76/10 - /1/76/10] and [/3/76/5 - /3/76/5] are not possible.
index-constraints vars=(int, int, int) index=(@1 not null, @2 not null, @3 not null)
((@1 = 1 AND @3 = 5) OR (@1 = 3 AND @3 = 10)) AND (@2 = 76)
----
[/1/76/5 - /1/76/5]
[/1/76/10 - /1/76/10]
[/3/76/5 - /3/76/5]
[/3/76/10 - /3/76/10]
Remaining filter: ((@1 = 1) AND (@3 = 5)) OR ((@1 = 3) AND (@3 = 10))

# Unlike the previous example, we can generate 2 column spans for the individual
# ORed sub-expressions, so the spans are tight.
index-constraints vars=(int, int, int) index=(@1 not null, @2 not null, @3 not null)
((@1 = 1 AND @2 = 5) OR (@1 = 3 AND @2 = 10)) AND (@3 = 76)
----
[/1/5/76 - /1/5/76]
[/3/10/76 - /3/10/76]
