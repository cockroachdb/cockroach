# LogicTest: local-opt

statement ok
CREATE TABLE x(a INT)

statement ok
CREATE TABLE y(a INT)

statement ok
insert into y values (1), (2), (3), (4)

query TTTTT
EXPLAIN (VERBOSE)
  WITH t AS (SELECT a FROM y) SELECT * FROM t JOIN t AS q ON true
----
root                        ·             ·          (a, a)  ·
 ├── hash-join              ·             ·          (a, a)  ·
 │    │                     type          cross      ·       ·
 │    ├── scan buffer node  ·             ·          (a)     ·
 │    └── scan buffer node  ·             ·          (a)     ·
 └── subquery               ·             ·          (a, a)  ·
      │                     id            @S1        ·       ·
      │                     original sql  <unknown>  ·       ·
      │                     exec mode     all rows   ·       ·
      └── buffer node       ·             ·          (a)     ·
           └── scan         ·             ·          (a)     ·
·                           table         y@primary  ·       ·
·                           spans         ALL        ·       ·

query TTTTT
EXPLAIN (VERBOSE)
  WITH t AS (SELECT a FROM y) SELECT * FROM t
----
root                   ·             ·          (a)  ·
 ├── scan buffer node  ·             ·          (a)  ·
 └── subquery          ·             ·          (a)  ·
      │                id            @S1        ·    ·
      │                original sql  <unknown>  ·    ·
      │                exec mode     all rows   ·    ·
      └── buffer node  ·             ·          (a)  ·
           └── scan    ·             ·          (a)  ·
·                      table         y@primary  ·    ·
·                      spans         ALL        ·    ·
