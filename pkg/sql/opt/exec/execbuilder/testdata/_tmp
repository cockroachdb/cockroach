statement ok
CREATE TABLE ab (a INT PRIMARY KEY USING HASH, b INT);

query T
EXPLAIN INSERT INTO ab VALUES (1, 2), (2, 3) ON CONFLICT (crdb_internal_a_shard_16, a) DO UPDATE SET b = excluded.b;
----
distribution: local
vectorized: true
·
• upsert
│ into: ab(crdb_internal_a_shard_16, a, b)
│ auto commit
│ arbiter indexes: ab_pkey
│
└── • render
    │
    └── • lookup join (left outer)
        │ table: ab@ab_pkey
        │ equality: (crdb_internal_a_shard_16_comp, column1) = (crdb_internal_a_shard_16, a)
        │ equality cols are key
        │
        └── • distinct
            │ estimated row count: 2
            │ distinct on: crdb_internal_a_shard_16_comp, column1
            │ nulls are distinct
            │ error on duplicate
            │
            └── • render
                │
                └── • values
                      size: 2 columns, 2 rows
