# LogicTest: local

statement ok
CREATE TABLE x (
  a INT PRIMARY KEY,
  b INT,
  INDEX (b),
  FAMILY "primary" (a, b)
)

statement ok
ALTER TABLE x INJECT STATISTICS '[
  {
    "columns": ["a"],
    "created_at": "2018-01-01 1:00:00.00000+00:00",
    "row_count": 123123,
    "distinct_count": 100,
    "histo_buckets": []
  },
  {
    "columns": ["b"],
    "created_at": "2018-01-01 1:00:00.00000+00:00",
    "row_count": 123123,
    "distinct_count": 123123,
    "histo_buckets": []
  }
]'

statement ok
CREATE TABLE y (
  u INT PRIMARY KEY,
  v INT REFERENCES x,
  INDEX (v),
  FAMILY "primary" (u, v)
)

query T
EXPLAIN (OPT, ENV) SELECT * FROM x WHERE b = 3
----
https://cockroachdb.github.io/text/decode.html#eJy0VuFO40YQ_o2fYpQ_B1UCDukPFHRSc8FV04aAEt_1EEKrtT12tqx3l911SKgq3UPwhDxJtZsAocLxSdXlRxRv5puZnfm-GXc68AW1YVL0YSjTWy1pOj_7BLjENKkYz1CDRWNhsbYKgk4HKOfyniiNimok1BCpLFGcCphTA3aOkGFOK25hQXmFfZB57nCpVCuSU2OJonZOUNCEY9YIMpaYlApD7pmdk40VSSUnhj1gAzyjLv0Vr7UbzS7acH525Y03vpmwO32fbBtbTYWhqWVSEKWZ1Myu6oBC6pLyOvRdRTmzKyJzYlAvWFqbgMai4lTXOdJIMyIFr83juTjvYCuDJJeuw6i9I9PkhJk1IfKKc2JdT9f92oWbRbEDWnPH4aM7OQV4TejZklZWuhBrphBWKs5SZolBjqkludSkUq7DtaHEe_Dt6zofCbXpnBhLLZYobH3ib7wJg9q-0vm7QGXFLVPuh8xYzlLqcjCu4b5uDZXeOHlgxQMtyF-S1QtuHXSpXJmoyAgrhNRIhLRkwQxzblLJq1IYwgRxwmyIzYRFvaB8p5aUNLbQaByAU13gmhOODUTL-9rCdsMw9BiZbhSgLCvZA2ZEUW2ZqxJmhIkMl97b7nsLF1TqDDVmhFNjG-7mWO9pRDTOZYku18bp5CO5wWcUZ-sJRTgrWW2w4_Dnkw3G3017qc2ZsbLQtGxg3VuU55GfgJY28fUtcpsBvp7YpG9VEKuL8tCwknHqphuxc41mLnltdcLDnodqzFETLuVtpTxhjRdcftsYVEtFC9cSJlRl191komiAafSGm1A72-F7Ye44MTTHTf-bsnKrhImCvJbUbyeF2lY68WKurcj7eDc8XSt0xZEoLROaML5jgdS40VRksiQG6wm7RrISH6SoFfDneOjMKpFKYaymzMlOSDchFr7-Wxr8zv29wNRKvWtRiyAYTqNBHEE8-DSOQFUJZ-nhEvaDPQqjSXwCk4sYJp_H43awl2xO1k_Di8ksng5GkxiWRN3iCi6no_PB9Ar-iK5gn8JgNjxoB3ujyVn0FZYkISxbwn7iz4OD0yAYjONo-t_Io8nv0TCGWTyIR7N4NJzBh-sAAOBv_-0-Lboo_EtCqw9h-_V4M1Zbfbh-OVzbt16eb7btNVKLGaG21YfWcdg96YTdTtiFsNsPw34YtraM3cpkInVvP5VwgG64HdsPE_9mZFfKJdbaBvux-Azchrlx9-LwuNc97vn__mn_3ysnP-TKPsMfd-vg5sNpEERfL8eD0QT2Ly7jNkSTLwcwi8aOFD_Br9OLc1jCn79F0wgS-Ai906DT6XQCv5qWv2xoFsDT4-PT47enx2_woifbh6Pjo24fro960IGj3k3wbwAAAP__d0bX6g==


statement error ENV only supported with \(OPT\) option
EXPLAIN (ENV) SELECT * FROM x WHERE b = 3

#
# Multiple Tables.
#

query T
EXPLAIN (OPT, ENV) SELECT * FROM x, y WHERE b = 3
----
https://cockroachdb.github.io/text/decode.html#eJy0Vt1u2zYUvq6e4sA3dQa7kZNdBA4KzHXVzVvqFLbatSgKgpKOZC4UyZKUYmcYUOwZcrmny5MMpJzEWSOrwNBcBDb9fef3O4ccDuEdasOkGMNUphda0nT18gXgGtOkYjxDDRaNhbpBBcFwCJRzeUmURkU1EmqIVJYoTgWsqAG7QsgwpxW3UFNe4RhknjteKtWG5NRYoqhdERQ04Zh1kowlJqXCkEtmV2SLIqnkxLAr7KBn1IW_4a242fJ8AK9ffvDgrW0m7F7bJ7tgq6kwNLVMCqI0k5rZTRtRSF1S3sb-XFHO7IbInBjUNUtbA9BYVJzqNkMaaUak4K1x3BbnEW5lkOTSdRi1N2S6jDDTCCKvOCfW9bTp1z7eMood0ZrPHJ67k1OA-4BukbSy0rlolEJYqThLmSUGOaaW5FKTSrkOt7oSj9F303U2EmrTFTGWWixR2PbAH1gTBrW9l_M3kcqKW6bcB5mxnKXUxWBcw33dOiq9NXLFiitakD8kax-4xulauTJRkRFWCKmRCGlJzQxzZlLJq1IYwgRxg9nhmwmLuqZ87ywpaWyh0TgCp7rARhNODUTLy9bCjsIw9ByZbidAWVayK8yIotoyVyXMCBMZrr21_XkL51TqDDVmhFNjO3JzqvcyIhpXskQXa-d28p7c4jOKs2ZDEc5K1ursKPzxZMvxuWk_aitmrCw0LTtU95DldeQ3oKVden3I3FWAryd2zbcqiNVF-cywknHqthuxK41mJXlrdcJnx56qMUdNuJQXlfKCNX7g8otOp1oqWriWMKEq23STiaKDptEDt672tsP3wnzmxNAct_3vispdJUwU5L6k_nZSqG2lEz_MrRV5nO-Wp2uFrjgSpWVCE8b3XCAtZjQVmSyJwXbBNkxW4pUUrQP8Np46WCVSKYzVlLmxE9JtiNrXf2cGv_H-rjG1Uu-7qEUQTBfRJI4gnrw4i0BVCWfpszX0gycUZvP4BObnMczfnp0NgifJ9qT5Nj2fL-PFZDaPYU3UBW7gzWL2erL4AL9FH6BPYbKcHgyCJ7P5y-g9rElCWLaGfuLPg4PTIJicxdHiv55n81-jaQzLeBLPlvFsuoSnHwMAgD_9f_fXo3XhHwm9MYSD--PtWu2N4ePdYYPv3X3_tIvXSC1mhNreGHpH4ehkGI6G4QjC0TgMx2HY2wG7K5OJ1L1-KuEIo3DXt18m_mVkN8oF1tsl-7V4S9yluXV3Z_DoeHR07H_7a_B_U06-S8o-wu-XdfDp6enjitw4RVZfKbJuU-TmEUVWt4p8gKtJ7pCvzhfR7Od5g6wPYBG9ihbRfBot76TZp_dydjwv53qvnDePytlnGb1_czaZzaF__iYeQDR_dwDL6Mxhf4BXi_PXsB7ABn7_JVpEkMBzOD4NhsPhMGBCoB76F0g_1dKYgwBurv-5uf5yc_0F_A29-epk_dN2_twvf7ta31xfbwF3-8aO4fDocDSGj4fHMITD40_BDixn3KI20Le6woPg3wAAAP__Lxg7NA==

#
# Same table twice should only show up once.
#

query T
EXPLAIN (OPT, ENV) SELECT * FROM x one, x two
----
https://cockroachdb.github.io/text/decode.html#eJy0Vs1u2zgQPldPMfClzsIu5HQPgYMeXNcLeNd1ClstWhQFQUsjmRuKZMiRY2exQB8ix326PMmClJM4i8gqsKgPhkTON7_fzKjfh09ondBqCGOdXlrN0_W7t4BbTFeVkBlaIHQEm1oqivp94FLqa2YsGm6Rcce0IWYkV7DmDmiNkGHOK0mw4bLCIeg897hUmx3LuSNmOK0ZKr6SmLWCHDGXcuXYtaA120uxVEvmxA22wDPu3d_JRrnp8qIH7999CcJ73ULRUd1nh8JkuXI8JaEVM1ZoK2jXBFTallw2oa8qLgXtmM6ZQ7sRaaMDFotKctukyCLPmFay0Y_75DyDrRyyXPsKow2KXJsS4WpC5JWUjHxN63odwy0niQeSu5Lwxp-cAzw6dC_JK9LeRM0UJkojRSqIOZSYEsu1ZZXxFW40pZ6DH4brdaw4pWvmiBOWqKjZ8SfalENLj3T-IVBZSRLGP-hM5CLl3gfnCx7y1pLpvZIbUdzwgv2pRXPD1Ua3xqeJq4yJQmmLTGliG-GEV5NqWZXKMaGYb8wW20IR2g2XR3vJaEeFRecBktsCa054NjCrrxsTO4jjOGB0uu8AQ6IUN5gxwy0JnyXMmFAZboO243Erb1TbDC1mTHJHLbF51gcaMYtrXaL3tXU6BUt-8DkjRT2hmBSlaDR2Gv96tseE2GxotbVwpAvLyxbWPUUFHoUJSLyNr0-RhwwI-cS2_jYFI1uUr5woheR-ujFaW3RrLRuzE796HaAWc7RMan1ZmUBYFxouv2w1arXhhS-JUKaiuppCFS0wi0Fwb-poOUIt3JVkjue4r3-bV36VCFWwx5SG7WTQUmVXoZkbM_I83g9PXwpbSWTG6hVfCXlkgTSosVxlumQOmwlbI0WJN1o1NvDHZOzFKpVq5chy4dtOaT8hNiH_Bz34g_t7gylpe2xRqygaLyajZALJ6O1sAqZaSZG-2kI3esFhOk_OYH6RwPzjbNaLXqz2J_Xb-GK-TBaj6TyBLTOXuIMPi-n70eIL_DH5Al0Oo-X4pBe9mM7fTT7Dlq2YyLbQXYXz6OQ8ikazZLL4r-Xp_PfJOIFlMkqmy2Q6XsLLrxEAwF_h3_86fFOEj4TOEOLe4_F-rHaG8PXhsJbvPLx_O5S3yAkzxqkzhM5pPDjrx4N-PIB4MIzjYRx3DoT9yhQq9V8_lfKAQXxoOwyT8GVEO-Md6xyCw1i8Bx7C_Lh7UHj6enD6Otz93fu_Ia9-SsjBw58XdfTt5XkUTT5_mI2mc-hefEh6MJl_OoHlZOZJ8Qv8trh4D1sYLUEr7NVPdK3Po36_34-EUmj7YTt3U6udO4ng7vafu9vvd7ffIWyvLXzl7o1W-K3hiq51uLrdX-VCEloHXbIVnkT_BgAA__-XpvBe

#
# Set a relevant session variable to a non-default value and ensure it shows up
# in the environment dump.
#

statement ok
SET reorder_joins_limit = 63

query T
EXPLAIN (OPT, ENV) SELECT * FROM y WHERE u = 3
----
https://cockroachdb.github.io/text/decode.html#eJyMVcFO40gQPY-_om4DKwLMslohEIdMMLvZDQ5KPLODRqNSxy47vbS7m-62ITnNR_CFfMmq22GBEY7nllj1XlXXe1U1GMBnMpYreQIjld0YxbLl-Uege8oWNRc5GXBkHTRtVBQNBsCEUHeoDWlmCJlFpR1qwSQsmQW3JMipYLVw0DBR0wmoovC4TOkVFsw61MwtkSRbCMp7QdahzZi0eMfdEjdRmCmBlq-pB54zX_5KdMaN59M9uDy_DsEbbi7dVu7jl8HOMGlZ5riSqA1XhrtVF1AqUzHRhb6tmeBuhapAS6bhWWcBhspaMNNFZIjlqKTorOOpOW9ga0tYKK8wmUBk-0i4bQ1R1EKg85q2em3DzePUA529FXDmv5wCPBf0FMlqp3yK1inIKy14xh1aEpQ5LJTBWnuFO1PJt-Avn-s5FsxlS7SOOapIuu7CX7FJS8Y92_mnQFUtHNf-h8p5wTPma7Be8NC3nk5vSNa8XLMS_1W8e-DapPfat4nJHHkplSGUymHDLfc0mRJ1JS1yiX4we3Jz6cg0TGydJa2sKw1ZDxDMlNR6wrsBjbrrbOyHw8PDgFHZZgK04xVfU46aGcd9lyhHLnO6D2zb3y19UmVyMpSjYNb1vM27PtgIDS1VRb7W3u0UMvnFZ7Xg7YZCwSvemezXw9-ON5jwNhNGbcmtU6VhVY_rXqOCj8IGdKzPr6-RLx0Q-kl9861LdKas9i2vuGB-u6FbGrJLJTq7c7h_FKCGCjIolLqpdTCsDQNX3PQmNUqz0kvCpa5dqyaXZd9OMRQiN7laPc7g96M310uQw94KtKygjQX6CvPXhMsSn7saDpQm42qzCPPc2ZS38X5_ejVMLQi1UQu24GLLDemgMUzmqkJL3Z5tkbyitZKdM_wpHfmwWmZKWmcY95MnlV8STZDgxRj-5AlvKHPKbLvVMopGs3iYxpAOP05i0PVC8Gx_BTvRuxrGSXoMyTSF5NNkshe9azZf2n-jaTJPZ8NxksIK9Q2t4Go2vhzOruHv-Bp2ahjOR7s_xjVY-MiL6Swe_5G0kc0uzOKLeBYno3j-VML9DvPgcXIefwk4nt_DThNIo93TKBpO0nj2Y9nj5K94lMI8HabjeToezeH912_vT6Mo_nI1GY4T2JlepXsQJ593YR5PfOwvcDGbXsIK_vkznsVQwxkcnUaDwWAQhY23iuDx4eHx4fvjw3f4Xxt3AgcfTuDrwREM4ODoW_RfAAAA__929HcQ

# Make sure it shows up correctly even if it matches the cluster setting.
statement ok
SET CLUSTER SETTING sql.defaults.reorder_joins_limit = 63


query T
EXPLAIN (OPT, ENV) SELECT * FROM y WHERE u = 3
----
https://cockroachdb.github.io/text/decode.html#eJyMVcFO40gQPY-_om4DKwLMslohEIdMMLvZDQ5KPLODRqNSxy47vbS7m-62ITnNR_CFfMmq22GBEY7nllj1XlXXe1U1GMBnMpYreQIjld0YxbLl-Uege8oWNRc5GXBkHTRtVBQNBsCEUHeoDWlmCJlFpR1qwSQsmQW3JMipYLVw0DBR0wmoovC4TOkVFsw61MwtkSRbCMp7QdahzZi0eMfdEjdRmCmBlq-pB54zX_5KdMaN59M9uDy_DsEbbi7dVu7jl8HOMGlZ5riSqA1XhrtVF1AqUzHRhb6tmeBuhapAS6bhWWcBhspaMNNFZIjlqKTorOOpOW9ga0tYKK8wmUBk-0i4bQ1R1EKg85q2em3DzePUA529FXDmv5wCPBf0FMlqp3yK1inIKy14xh1aEpQ5LJTBWnuFO1PJt-Avn-s5FsxlS7SOOapIuu7CX7FJS8Y92_mnQFUtHNf-h8p5wTPma7Be8NC3nk5vSNa8XLMS_1W8e-DapPfat4nJHHkplSGUymHDLfc0mRJ1JS1yiX4we3Jz6cg0TGydJa2sKw1ZDxDMlNR6wrsBjbrrbOyHw8PDgFHZZgK04xVfU46aGcd9lyhHLnO6D2zb3y19UmVyMpSjYNb1vM27PtgIDS1VRb7W3u0UMvnFZ7Xg7YZCwSvemezXw9-ON5jwNhNGbcmtU6VhVY_rXqOCj8IGdKzPr6-RLx0Q-kl9861LdKas9i2vuGB-u6FbGrJLJTq7c7h_FKCGCjIolLqpdTCsDQNX3PQmNUqz0kvCpa5dqyaXZd9OMRQiN7laPc7g96M310uQw94KtKygjQX6CvPXhMsSn7saDpQm42qzCPPc2ZS38X5_ejVMLQi1UQu24GLLDemgMUzmqkJL3Z5tkbyitZKdM_wpHfmwWmZKWmcY95MnlV8STZDgxRj-5AlvKHPKbLvVMopGs3iYxpAOP05i0PVC8Gx_BTvRuxrGSXoMyTSF5NNkshe9azZf2n-jaTJPZ8NxksIK9Q2t4Go2vhzOruHv-Bp2ahjOR7s_xjVY-MiL6Swe_5G0kc0uzOKLeBYno3j-VML9DvPgcXIefwk4nt_DThNIo93TKBpO0nj2Y9nj5K94lMI8HabjeToezeH912_vT6Mo_nI1GY4T2JlepXsQJ593YR5PfOwvcDGbXsIK_vkznsVQwxkcnUaDwWAQhY23iuDx4eHx4fvjw3f4Xxt3AgcfTuDrwREM4ODoW_RfAAAA__929HcQ

statement ok
SET enable_zigzag_join = false

query T
EXPLAIN (OPT, ENV) SELECT * FROM y WHERE u = 3
----
https://cockroachdb.github.io/text/decode.html#eJyMVV9P40YQfz5_ink7qAhwpaoQiIdcMG3a4KDEdz10Oo029tjZst5ddteG5Ok-BJ-QT1LtOhQ44fjeIJrfzPj3Z3YwgM9kLFfyBEYquzGKZcvzj0D3lC1qLnIy4Mg6aNqqKBoMgAmh7lAb0swQMotKO9SCSVgyC25JkFPBauGgYaKmE1BF4XGZ0issmHWomVsiSbYQlPeCrEObMWnxjrslbqowUwItX1MPPGd-_ZXorBvPp3tweX4dije9uXRbex-_LHaGScsyx5VEbbgy3K26gFKZioku9G3NBHcrVAVaMg3POhcwVNaCma5GhliOSorOPZ7IeQNbW8JCeYXJhEa2rwm3rSGKWgh0XtNWr224eZx6oLO3As78L6cAzws9VbLaKT-idQrySguecYeWBGUOC2Ww1l7hzlHyLfjLz_U9FsxlS7SOOapIuu7FX3WTlox7tvNPgapaOK79HyrnBc-Y38F6wQNvfYxtuqx5uWYl_qu43ELeZvC99lQxmSMvpTKEUjlsuOW-U6ZEXUmLXKIPZ4_SXDoyDRNb86SVdaUh6wGCmZJaX3hHoFF3neR-ODw8DBiVbVKgHa_4mnLUzDjumaIcuczpPnTbTrj0Q5XJyVCOglnX823e-cFKaGipKvK79l6oMMkfP6sFb68UCl7xzmG_Hv52vMGEbzMhbktunSoNq3qc9xoVvBSuoGN9nn2NfOmAwCf1ZVyX6ExZ7VteccH8hUO3NGSXSnSyc7h_FKCGCjIolLqpdfCsDaErbnqHGqVZ6SXhUteuVZPLsi8lhkLlZlarxxn8fvRmSoIc9lagZQVtLNC3mH9RuCzxmdXwSGkyrjaLkOlOUt7G-xvq1TC1INRGLdiCiy3vSEcbw2SuKrTU7dkWyStaK9mZ4U_pyJfVMlPSOsO4T55U_kg0QYIXMfzJZ7yhzCmz7b2WUTSaxcM0hnT4cRKDrheCZ_sr2Ine1TBO0mNIpikknyaTvehds_ml_W80TebpbDhOUlihvqEVXM3Gl8PZNfwdX8NODcP5aPfHugYLX3kxncXjP5K2stmFWXwRz-JkFM-fVrjfYR48Ts7jLwHH83vYaULTaPc0ioaTNJ79uPY4-SsepTBPh-l4no5Hc3j_9dv70yiKv1xNhuMEdqZX6R7EyeddmMcTX_sLXMyml7CCf_6MZzHUcAZHp9FgMBhE4eKtInh8eHh8-P748B3-18adwMGHE_h6cAQDODj6Fv0XAAD__02dd3I=

statement ok
SET optimizer_use_histograms = false

query T
EXPLAIN (OPT, ENV) SELECT * FROM y WHERE u = 3
----
https://cockroachdb.github.io/text/decode.html#eJyMVcFO40gQPY-_om4DKwLMslohEIdMMLvZDQ5KPLODRqNSxy47vbS7m-62ITnNR_CFfMmq22GBEY7nBlG9V-X3XlUPBvCZjOVKnsBIZTdGsWx5_hHonrJFzUVOBhxZB01bFUWDATAh1B1qQ5oZQmZRaYdaMAlLZsEtCXIqWC0cNEzUdAKqKDwuU3qFBbMONXNLJMkWgvJekHVoMyYt3nG3xE0VZkqg5WvqgefMj78SnXXj-XQPLs-vQ_GGm0u3lfv4ZbEzTFqWOa4kasOV4W7VBZTKVEx0oW9rJrhboSrQkml41jmAobIWzHQRGWI5Kik653gS5w1sbQkL5R0mE4hsHwm3bSCKWgh03tPWr224eZx6oLO3As78L6cAzwM9VbLaKd-iTQrySguecYeWBGUOC2Ww1t7hzlbyLfjLz_UcC-ayJVrHHFUkXffgr9ikJeOe4_xToKoWjmv_h8p5wTPmZ7De8KBbn2IbljUv16zEfxWXW8TbNL7XXiomc-SlVIZQKocNt9wzZUrUlbTIJfrl7HGaS0emYWLrPmllXWnIeoBgpqQ2Fz4RaNRdp7gfDg8PA0Zlmy3Qjld8TTlqZhz3SlGOXOZ0H9i2Cy59U2VyMpSjYNb1fJtPfogSGlqqivysvRcqdPLHz2rB2yuFgle8s9mvh78dByefPs6EfVty61RpWGV7_XwNDHkKl9Cxvty-Rr5MQdCU-vZcl-hMWe1bXnHB_JVDtzRkl0p0KnS4fxSghgoyKJS6qXXIrQ2LV9z0NjVKs9LbwqWuXesol2XfphgKlZterSdn8PvRm8qGc25vBVpW0CYGfYP5V4XLEp9VDQ-VJuNqswh73SnK23h_R70bphaE2qgFW3Cx5S3poDFM5qpCS925bZG8orWSnXv8KR35slpmSlpnGPfbJ5U_FE2w4MUq_uRT3lDmlNn2ZssoGs3iYRpDOvw4iUHXC8Gz_RXsRO9qGCfpMSTTFJJPk8le9K7Z_NL-N5om83Q2HCcprFDf0AquZuPL4ewa_o6vYaeG4Xy0-2Ndg4WvvJjO4vEfSVvZ7MIsvohncTKK508j3O8wDx4n5_GXgOP5Pew0gTTaPY2i4SSNZz-OPU7-ikcpzNNhOp6n49Ec3n_99v40iuIvV5PhOIGd6VW6B3HyeRfm8cTX_gIXs-klrOCfP-NZDDWcwdFpNBgMBlG4eqsIHh8eHh--Pz58h_-9cSdw8OEEvh4cwQAOjr5F_wUAAP__FVZ31A==

statement ok
SET optimizer_use_multicol_stats = false

query T
EXPLAIN (OPT, ENV) SELECT * FROM y WHERE u = 3
----
https://cockroachdb.github.io/text/decode.html#eJyMVdFS20YUfY6-4r4FOjGQ0ukwMDw4RrRujczYShomk7mzlq6kLavdZXclME_5CL6QL-nsyhSaIitv4Lnn3Ktzzr07GsEnMpYreQwTlV0bxbLq7APQHWWrhoucDDiyDtquKopGI2BCqFvUhjQzhMyi0g61YBIqZsFVBDkVrBEOWiYaOgZVFB6XKb3GglmHmrkKSbKVoHwQZB3ajEmLt9xVuKnCTAm0_J4G4Dnz469Fb910OX8HF2dXoXjDzaXbyn30stgZJi3LHFcSteHKcLfuA0plaib60DcNE9ytURVoybQ86x3AUNkIZvqIDLEclRS9czyJ8wq2sYSF8g6TCUR2iITbLhBFIwQ672nn1zbcMk490NkbAaf-lxOA54GeKlnjlG_RJQV5rQXPuENLgjKHhTLYaO9wbyv5Gvzl53qOFXNZhdYxRzVJ1z_4f9ikJeOe4_xDoLoRjmv_h8p5wTPmZ7De8KDbkGIblnte3rMS_1ZcbhFv0_hOe6mYzJGXUhlCqRy23HLPlCnR1NIil-iXc8BpLh2Zlomt-6SVdaUh6wGCmZK6XPhEoFG3veK-Pzg4CBiVbbZAO17ze8pRM-O4V4py5DKnu8C2XXDpmyqTk6EcBbNu4Nt88kOU0FClavKzDl6o0MkfP6sF764UCl7z3mY_H_xyFJx8-jgT9q3i1qnSsNpu9_P_yBCocAodcwPobtYX4JdJCLrS0K7rEp0p6z3Lay6Yv3ToKkO2UqJXpYO9wwA1VJBBodR1o0N2bVi-4nqwqVGald4aLnXjOle5LIe2xVCo3PTqfDmFXw9f1SecdHsj0LKCNlEYGsy_LFyW-KxqeKw0GdeYVdjtXlFex_tb6t0wjSDURq3Yiost70kPjWEyVzVa6s9uh-Q13SvZu8sf04kva2SmpHWGcb-BUvlj0QYLXqzjDz7nLWVOmW3vtoyiySIepzGk4w-zGHSzEjzbW8NO9KaBaZIeQTJPIfk4m72L3rSbX7r_JvNkmS7G0ySFNeprWsPlYnoxXlzBn_EV7DQwXk52v69rsfCV5_NFPP0t6SrbXVjE5_EiTibx8mmEux3mwdPkLP4ccDy_g502kEa7J1E0nqXx4vuxp8kf8SSFZTpOp8t0OlnC2y9f355EUfz5cjaeJrAzv0zfQZx82oVlPPO1P8H5Yn4Ba_jr93gRQwOncHgSjUajURQu3zqCx4eHx4dvjw_f4F9v3DHsvz-GL_uHMIL9w6_RPwEAAP__H3F4Ng==

statement ok
RESET reorder_joins_limit

statement ok
RESET enable_zigzag_join

statement ok
RESET optimizer_use_histograms

statement ok
RESET optimizer_use_multicol_stats

#
# Test sequences.
#

statement ok
CREATE SEQUENCE seq

query T
EXPLAIN (OPT, ENV) SELECT * FROM seq
----
https://cockroachdb.github.io/text/decode.html#eJyMVcFu20gMvfsr5ri7qAMnbptsgx68rhYIEDvd2Am6J2IsURI3o5kxh3ISf_1iRi6SAJHVm2DzkRy-98jxWN0jB3L2i5q7_IGdzutvfyl8wnzTkimQlWAQteuiRqPxWGlj3CN4Rq8ZQQdwXsAbbVWtg5IaVYGlbo2onTYtflGuLCMud_4ZSh0EvJYa0OqNwWIQFARCrm2AR5IaDlGQOwOB9jgAL3Rs_9n0xl2tbj6oxbd_U_AhN1k5mvvidbCwtkHnQs6CZ3JM8twHtI4bbfrQ21YbkmdwJQTkHeW9DTBWrdHcl4hRF-Cs6e3j53DewbYBoXSRYeSUKAwlodAJomyNAYmcdnwdw62ydQRK2Br1Nf5yqdRLQz8jdSsuluiUAtR4QzkJBDSYC5SOofWR4d5S9j346-fGHBsteQ1BtGCDVvobf5PNBmR5kfMvgZrWCPn44QoqKdexhxAJT3MbmPQhyZ6qva7gP0f9huuKPvk4Jm0LoMo6RrBOYEeBYprcmbaxAchCNOZAbbKCvNPmqJe8C1IxhggwmivsNBHVAOweewd7OplMEsblBwd4oYb2WIDXLBSnhAWQLfApZTv-bhuLOi6QsQCjgwy8Lao-yQgYa9dg7HVwO6VKcfEFb6jbUGCood5iZ5OPFwdMehsnq9UUxFWsmwHVvUUlHaUNKHpIr2-RrxWQ5olD_vYVCFfNSaCGjI7bDaRmDLUzvdOZnEwTlLFEBuPcQ-uTYEMyXPkwWJSd11WkhKxvpWOTbDW0UxhT5KFWx8dX9Xn67npJdIStgaBLPEhgqLF4TchW8DLVdKA8srS8SX7uHcr7-Lg_IxvcGgTPbqM3ZI7ckJ40rG3hGgjYr9kOSQ3une318N16HsNamzsbhDVF51kXl8QuUfDKhr94wneYi-Njt9qORvPbbLbO1Cr75y5bzjPl242h_CTgVi2ulvez67tMnarF7Ef3-efZ2XR6fjaZfr749PH8_NPF5FxdLee32SJbrtWpWq1nt2t1ejkaZT--X8-uluq3m-_rDypb3v-uVtl1Nl-rP9TftzcLFXB7ORqPx-NRwG2LNsdxd2DiP6P_AwAA__8gd0SB

#
# Test views.
#

statement ok
CREATE VIEW v AS SELECT a, b, u, v FROM x, y WHERE b = 3

query T
EXPLAIN (OPT, ENV) SELECT * FROM v
----
https://cockroachdb.github.io/text/decode.html#eJy0Vt1u2zYUvo6e4sA3jQc7keNhCBwUmOuqm7fUKWz1D0VBUNKRzIUiVZJS7QwDij1DLvd0eZKBlJ04q2UVGNqLIqK_7_x-55D9PrxBpZkUI5jI-FpJGi-fPwNcYRyVjCeowKA2UNUoz-v3gXIuP5NCYUEVEqqJLAwpOBWwpBrMEiHBlJbcQEV5iSOQaWp5sSzWJKXakIKaJUFBI45JK0kbomMqNPnMzJJsUCSWnGh2gy30hNrw17wRN11c9eDl8_cOvLHNhDlo-3wXbBQVmsaGSUEKxaRiZt1EFFLllDexP5WUM7MmMiUaVcXixgAUZiWnqsmQQpoQKXhjHNvi7OGWGkkqbYdROUO6zQjTtSDSknNibE_rfh3iLYLQEo3-xOGpPbkAeAhoi6SlkdZFrRTC8oKzmBmikWNsSCoVKQvb4UZXYh99N11rI6ImXhJtqMEchWkO_JE1oVGZBzl_EykvuWGF_UMmLGUxtTFo23BXt5ZKb4zcsOyGZuQPyZoHrna6KmyZqEgIy4RUSIQ0pGKaWTOx5GUuNGGC2MFs8c2EQVVRfnCWCqlNplBbAqcqw1oTVg1Eyc-NhR34vu84Mt5MQGFYzm4wIQVVhtkqYUKYSHDlrB3OW1inUiWoMCGcatOSm1W9kxFRuJQ52lhbt5PzZBefLjirNxThLGeNzs78H883HJebcqO2ZNrITNG8RXWPWU5HbgMa2qbXx8xdBbh6Ytt8FxkxKstPNMsZp3a7EbNUqJeSN1bHPxk6qsIUFeFSXpeFE6x2A5detzpVsqCZbQkTRWnqbjKRte0UhQ658VX34yn8NNy7Xlw79CdONE1xI4G2wOxtwkRGHqrqLqgClSlV5Oa5sSj7-XZ_2m6okiMplIxoxPiBO6TBjKIikTnR2KzZmslyvJGicYZfhxMLK0UshTaKMjt5QtolUbkW7IzhN17hFcZGqkN3tfC8yTwYhwGE42eXARRlxFl8soJj74jCdBaew-wqhNnry8uedxRtTuqvydVsEc7H01kIK1Jc4xpezacvx_P38HvwHo4pjBeTbs87ms6eB-9gRSLCkhUcR-7c61543vgyDOb_9Tyd_RZMQliE43C6CKeTBTz54AEA_On-t_86tMrcO6EzAr_3cLzZrJ0RfLg_rPGd---Pu3iF1GBCqOmMoHPmD877_qDvD8AfjHx_5PudHbC9NZmI7QOoFJYw8Hd9u33iHkdmXdjAOrtktxm3xF2a3Xj3Bs-Gg7Oh--2v3v9NOfouKbsIv1_W3scnF_sVubaKLL9SZNWkyPUeRZZbRT7CVSS1yBdX82D6y6xGVl2YBy-CeTCbBIt7aR7TBzlbnpNzdVDO671y3s3yzTR4u0VXbuzsoPW8o9Km53VhvIBFcGlt0B5EPSh7UMGL-dVLt4tOtsH1Hn2u4e2vwTyACJ7C8MLzgnevLsfTGRxfvQp7EMzedLdGf6htVRdev9_ve0wIVH33xDmOldS668Hd7T93t1_ubr-AewKsvzpZ_byZbvvL37aTd7e3G8D9NjMjOD07HYzgw-kQ-nA6_OjtwFLGDSoNx0aV2PX-DQAA___DklTE

#
# Test tables in user-defined schemas.
#

statement ok
CREATE SCHEMA s;
CREATE TABLE s.t (a int primary key)

query T
EXPLAIN (OPT, ENV) SELECT * FROM s.t;
----
https://cockroachdb.github.io/text/decode.html#eJyMVV1v20YQfA5_xb3FLizDbYrCiJEHRVEBtbJsSExQoygWJ3JJbn28O-8t5Y9fH9xRgW3AFPMmCDuzy52ZvclEfUMO5OxHNXPFLTtdNF8-K3zAYtuRKZGVYBC166uybDJR2hh3D57Ra0bQAZwX8EZb1eigpEFVYqU7I2qnTYcflauqiCucf4RKBwGvpQG0emuwHAUFgVBoG-CepIF9FRTOQKAnHIGXOo7_aAbrFpurE3X55SYV77nJykHu85fFwtoGXQg5C57JMcnjENA6brUZQt912pA8gqsgIO-oGByAse6M5iEiRl2Cs2Zwjh_LeQPbBYTKRYWRE1EYI6HQG6LqjAGJmvZ6HcJt5nkESrgz6lP850Kp54F-VOpOXGzROwWo9YYKEghosBCoHEPno8KDrexb8JefGzm2WooGgmjBFq0MD_6KzQZkebbzT4Hazgj5-MOVVFGh4wwhCp72NrLpPckT1U-6hv8dDQeub_rg45q0LYFq6xjBOoEdBYo0hTNdawOQhRjMkd5kBXmnzcEseRekZgwRYDTX2HsiugHY3Q8u9tezs7OEccU-AV6opScswWsWilvCEsiW-JDYDn-3jU0dl8hYgtFBRr4tuj7ZCBgb12KcdfQ6pU7x8AVvqL9QYKilwWa_nf1-vsekb-MUtYaCuJp1O-K616jko3QBRY_59TXypQPSPnEs374G4bo9DdSS0fG6gTSMoXFmcDtnpx8SlLFCBuPcbeeTYUMKXHU72pSd13WUhKzvpFeTbD12UxhT5b5Xr8cn9ceHN89LkiPcGQi6wr0FxgaLrwnZGp63mh4ojywdb1OeB5fyNj7ez6gGdwbBs9vqLZkDb8gADWtbuhYCDnu2R1KLT84OZvhrPotlnS2cDcKaYvKsi0dilyR4EcOffMJ3WIjjQ2-1zbLZej7N5yqffl7OVTgVdZS902qxys_V6ipXq6_L5Un2bna12uTr6WKVKwF_i4_qer24nK5v1N_zG3Wk1XQzO86OL7Jsuszn6xd0i9Vf81muNvk0X2zyxWyj3v_73_uLLJv_c72cLlbq6Oo6P1Hz1bdjtZkvY-0v6s_11WVEX2STyWSSpdMj2fcAAAD__92TRyk=

#
# Test default_transaction_quality_of_service settings.
#

statement ok
SET default_transaction_quality_of_service=background

query T
EXPLAIN (OPT, ENV) VALUES(1);
----
https://cockroachdb.github.io/text/decode.html#eJyMVcFu20gMvfsr5pgAceFsF4uiRQ7dNocC3bZA0mD3RNASJXEzGk44lJP41I_IF-ZLihm5SAJYVm-CwEdy-N4jl0t3RZpYwlv3QaprFay6j387uqNqPbCvSZ1RMrcZoxaL5dKh93ILUSmiEmACiQbRY3AdJmcduZoaHLy5DfqB3jppmoyrJN5Dg8kgonVAAdee6llQMkgVhgS3bB3soqASD4m3NAOvMbd_7yfjPl18PXH_fPyvBO9yc7CDud88DzbFkLAylgBRWZTtfgoYRHv0i4vzy73wmwE92z1IA4l0wxW5M7fG6rpVGUL9zrmnur9SKrWDR53qSAlrkOAnW_o1pz3YIRE0kskmLYnSXBJOozaawXuwTO9I3SFcGQYnSzfeneU_e5-Jg0kuMYoGuI-eKzZI5KkyaERhiJnsyVJhH_z5c3OONVrVQTI06inYdOMvsoVEak_K_i1QP3jjmD-k5oYrzD2kTH2Z28ykd0m23G6xhf-Fp703Fr2LeUwYauA2iBIEMdhw4pymEj_0IQEHyB6dqc3BSDfoD9oqSrJWKWWAR21p1ERWA6jcTg72dLVaFYxUOy9E4563VENENc5Toho41HRXsh1-d8hFRWtSqsFjspm3ZdUXGYFSJz3lXmcXVamUd2CKnsdlBZ57niz2x-rPNztMeZsWq3WcTFrFfkZ1L1FFR2UZGs7p9SXyuQLKPGnO37EF07Z_lbhnj3nRgXVKqRM_OZ3Vq9cFqtSQghe5HmIRbCqGa65ni6pEbDMlHOJgI5sc2rmdolQid7VGPs7cX6_3rpdCR7rxkLChnQTmGsuHhUMLT1MttyqS2qDr4ufJoezH5_2Z2dDBE0SVNa7ZHzgnE2kUQy09JJrW7IjknrYSJj38_fJDDhtCJSGZImfnBclLYlMoeGbD37zmG6pM9NDZDovF-b_fPr__9MUdff12eeLOv1wdu6v3n7-fX7ij0-N3i-VyuVyU8LRwjw8Pjw8_Hh9-uKPTk-PFzwAAAP__97Ywfg==

statement ok
SET default_transaction_quality_of_service=critical

query T
EXPLAIN (OPT, ENV) VALUES(1);
----
https://cockroachdb.github.io/text/decode.html#eJyMVcFu20gMvfsr5pgAceFsF4uiRQ7dNocC3bZA0mD3RNASJXEzGk44lJP41I_IF-ZLihm5SAJYVm-CwEdy-N4jl0t3RZpYwlv3QaprFay6j387uqNqPbCvSZ1RMrcZoxaL5dKh93ILUSmiEmACiQbRY3AdJmcduZoaHLy5DfqB3jppmoyrJN5Dg8kgonVAAdee6llQMkgVhgS3bB3soqASD4m3NAOvMbd_7yfjPl18PXH_fPyvBO9yc7CDud88DzbFkLAylgBRWZTtfgoYRHv0i4vzy73wmwE92z1IA4l0wxW5M1cpG1fo3zn3VPVXQqV28KhT_ShhDRL8ZEO_prQHOySCRjLVpCVRmkvCaVRGM3gPlskdiTuEK6PgZOnGu7P8Z-8zcTDJJUbJAPfRc8UGiTxVBo0oDDFTPVkq7IM_f27OsUarOkiGRj0Fm278RbaQSO1J178F6gdvHPOH1NxwhbmHlIkvc5uZ9C7JltsttvC_8LTzxqJ3MY8JQw3cBlGCIAYbTpzTVOKHPiTgANmhM7U5GOkG_UFTRUnWKqUM8KgtjZrIagCV28nBnq5Wq4KRaueEaNzzlmqIqMZ5SlQDh5ruSrbD7w65qGhNSjV4TDbztqz6IiNQ6qSn3OvsmiqV8gZM0fO4qsBzz5PF_lj9-WaHKW_TYrWOk0mr2M-o7iWq6KisQsM5vb5EPldAmSfN-Tu2YNr2rxL37DGvObBOKXXiJ6ezevW6QJUaUvAi10Msgk3FcM31bFGViG2mhEMcbGSTQzu3U5RK5K7WyMeZ--v13vVS6Eg3HhI2tJPAXGP5rHBo4Wmq5VJFUht0Xfw8OZT9-Lw_Mxs6eIKossY1-wPHZCKNYqilh0TTmh2R3NNWwqSHv19-yGFDqCQkU-TsvCB5SWwKBc9s-Ju3fEOViR462mGxOP_32-f3n764o6_fLk_c-ZerY3f1_vP38wt3dHr8brFcLpeLEp4W7vHh4fHhx-PDD3d0enK8-BkAAP__0KovqQ==
