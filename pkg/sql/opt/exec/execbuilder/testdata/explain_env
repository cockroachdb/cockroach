# LogicTest: local

statement ok
CREATE TABLE x (
  a INT PRIMARY KEY,
  b INT,
  INDEX (b),
  FAMILY "primary" (a, b)
)

statement ok
ALTER TABLE x INJECT STATISTICS '[
  {
    "columns": ["a"],
    "created_at": "2018-01-01 1:00:00.00000+00:00",
    "row_count": 123123,
    "distinct_count": 100,
    "histo_buckets": []
  },
  {
    "columns": ["b"],
    "created_at": "2018-01-01 1:00:00.00000+00:00",
    "row_count": 123123,
    "distinct_count": 123123,
    "histo_buckets": []
  }
]'

statement ok
CREATE TABLE y (
  u INT PRIMARY KEY,
  v INT REFERENCES x,
  INDEX (v),
  FAMILY "primary" (u, v)
)

query T
EXPLAIN (OPT, ENV) SELECT * FROM x WHERE b = 3
----
https://cockroachdb.github.io/text/decode.html#eJy0lOGO4jYQxz-vn2KUL8dWpCTwZRV0UnNcqqblwgrS651WK8tJnOBi7JztQJaq0j0ET7hPUjnALapKUVUtH5A8-f9m_jOexHXhI1WaSRHAROYrJUm-fP8OaEvzrGG8oAoM1QY2BxVCrguKSlVQhX-XTGjM2ZoZWBINZkmhoCVpuIEN4Q0N4M7qqSAZp3jHqh2pOuqSXAqrl7Vha7ajCjea4iXTRlaKrPV_odYNNyyXHGtDzBWSy5xwZp7wKUWBa6IMM0wKWmAmCtpinZMrtmsla1IRQzETdWNwNyQmqotUWR4wWlKFuZSrpj7OtJQKl6vLtg9kwTThXG5x2XCOTTdka_Max4mq6AGycqzk9iLie55nmVxqc0iOt8ws8VGGuxGzHb1m9Sg3ighNcjtZ_KU5Tr3EmqoNyy8mUbRqOFFoEaW2aaO_cHhrU48BXpKf1KQx0tbc0NxI9W_eRJfxuJ7dKGpOcrqUdu9xSbTBNTFLW0v8Y6mTMTSZR2EaQRq-m0ZQNxln-fct9NANgThJ7yCZpZD8Op320U12jBxOk1mySOdhnKTQ4npFn-B-Hn8I55_hl-gz9AiEi8ltH93EyfvoE7Q4w6xooZd1cXQ7RiicptH875Xj5OdoksIiDdN4kcaTBbx5QAAAf3T_9ueQTdVdnROA138J55I3a6GdAB6-BQ9659v58VyvKDG0wMQ4AThDz79zPd_1fPD8wPMCz3POxPb2mMjt3jTCAr53Xrt717udMk-1Neacw8Ju7Ak8x5TcviQcjvzhqHv2Z___tpy9Ssudw9frGj2-GSMUfbqfhnECvdl92oco-XgLi2hql-I7-HE--wAt_PZTNI8gg7cwGiPXdV3UfeTaH45rhuB5v3_ef33ef4VcCm0UYcIEMBgO_AAeBiNwYTB6RH8FAAD__xi7684=

statement error ENV only supported with \(OPT\) option
EXPLAIN (ENV) SELECT * FROM x WHERE b = 3

#
# Multiple Tables.
#

query T
EXPLAIN (OPT, ENV) SELECT * FROM x, y WHERE b = 3
----
https://cockroachdb.github.io/text/decode.html#eJy0ld1u4kYUx6_jpzjiZqHCjQk3kaOVyrKT1i1rIuNudxVFo8EewzTDjHc-HEhVadVn4LJPlyepZoCEdsOiahUukHz8-5-v-Q-EIbynSjMpYhjK4lZJUszfvgG6pMXUMl5SBYZqA82GCoIwBEWlKqnCv0smNOZswQzMiQYzp1DSilhuoCHc0hjOHU8FmXKK79nsnsy86hAuheNlbdiC3VOFraZ4zrSRM0UW-v-oFpYbVkiOtSHmiJLLgnBmVniXosQ1UYYZJgUtMRMlXWJdkCNt10rWZEYMxUzU1mC_JCZmB1VVtZHRiirMpby19XanlVS4uj3c9kZZMk04l3e4spxj45fs2jym40TN6EbkcKzk3UFJL4oipymkNpvk-I6ZOd5i2K-Y3dNjrW5xo4jQpHCbxZ_sdusV1lQ1rDiYRNGZ5UQFE5S7oY3-xOG1S30B8JR8RxNrpKvZ0MJI9bXehM-4tadfRc1JQefS-R5XRBtcEzN3tcSzpXaNBcMMDXIE-eDNCEFtp5wV3y-hHZwQSNL8HNJxDumvo1E3OJluI5un4Tid5NkgSXNY4vqWruAqS94Nso_wC_oIbQKDybDTDU6S9C36AEs8xaxcQnvq40HnIggGoxxl_62cpD-jYQ6TfJAnkzwZTuDVdQAA8If_dp8WaWb-6FoxRN2ncCG5XQjdiuH6MbjhW4_PN_u8osTQEhPTiqF1FvXOw6gXRj2IenEUxVHU2oPd6TFRON9Y4QS9aL-2v-veU2ZVu8Za-2LhHLsT7suUvHtKeNbvnfX9uz-73zry9EVG9h2-3NTBzauL5x25co60XziyOeTI1TOOtDtH_otrcOXIy3GGkh_TDdl0IEOXKEPpEE0erdkmT3Z2Om_n5qt2Xj1rZz8l-nA1GiQptMdXeRdQ-r4DEzRy7HdwmY3fwbILK_jtJ5QhmMJr6F8EYRiGAROCqtD_FbULJbXuBPCw_vth_flh_Rn8b_3qi8jyh-39c2_-crt-WK-3QCGFNoowYWI4PTvtxXB92ocQTvs3wR5WMW6o0tA2ytJO8E8AAAD__zedTxg=

#
# Same table twice should only show up once.
#

query T
EXPLAIN (OPT, ENV) SELECT * FROM x one, x two
----
https://cockroachdb.github.io/text/decode.html#eJy0VMFu4zYQPYdfMdBl7cIq5OwlcLAHrVcF1HqVwFIXuwgCgpZGMhua1JKUraQosB-RY78uX1KQcjZGUdcoivhgmDPvzbx5HDMM4RNqw5WcwVyVd1qxcv3hPWCP5arjokINFo2F7YAiJAxBo9IVavqb4tJQwTfcwpoZsGuECmvWCQtbJjqcwYXDo2QrgfSBNw-s8axjcCUdXrWWb_gDatoZpGturGo025j_wtp0wvJSCWossyeYQpVMcHtPn0tUtGXacsuVxIpyWWFPTclOyG61alnDLFIu285SbxKXzVFWXQ80rFFTodRd1-49rZWm9d1x2QOz4oYJoXa07oSg1pvsZJ7iCaYbHEgOTrXaHaVMoyhynFIZOxSnO27XdA-j3mL-gKek7uFWM2lY6ZylX7u96zU1qLe8PFpEY9MJpkmeFG5oa74KeOdKXwK8FH9Gs84q13OLpVX637RJX3G_nt6KVrAS18rtPa2ZsbRldu16yX9s9SyMzJdJXCRQxO8XCbTdSvDyxx5G5IxBmhUXkF0VkP26WEzI2WofGU7zqywvlnGaFdDT9g7v4XqZfoyXX-CX5AuMGMT5fDwhZ2n2IfkMPV1RXvUwWvk4GV8SEi-KZPn3zmn2czIvIC_iIs2LdJ7DmxsCAPC7_3afgG0bf3XBDKLJS7hUottIE8zg5ntwwAffz7eHeI3MYkWZDWYQnEfTizCahtEUouksimZRFByA3e1xWbq96aQjTKPD3v6_7nfK3rdOWHBIlm5jn4mHNK12LwXP307P3_rcH5P_O_LqVUb2Cl9vanL75pKQ5PP1Ik4zGF1dFxNIsk9jyJOFW4of4Kfl1UfoIc5BSZwMv-xOXZIwDEPCpUQd-md6VGplzJjA0-OfT4_fnh6_gX8He7hh5p2SeHskZXfKpx73qZoLi9rAyOoOx-SvAAAA__8b3wRR

#
# Set a relevant session variable to a non-default value and ensure it shows up
# in the environment dump.
#

statement ok
SET reorder_joins_limit = 63

query T
EXPLAIN (OPT, ENV) SELECT * FROM y WHERE u = 3
----
https://cockroachdb.github.io/text/decode.html#eJyUk81O20wYhdfMVbw7kk_4AxSpQolYGDO0boODbJeCEBoN9tieZjJj5sckWXERuUKupLIdNog06jLR85w5OnrteXDLtOFKjiFQ2VwrmlWXF8CWLHtyXORMg2XGQtNTCCU4Bc2UzpkmvxWXhgi-4BbO4ctoAuB5kLOCOmGhocKxMZwhzwMm6ZNgZM3LNS07DypqwFbsI65ky6va8gVfM02cYaTixqpS04X5F2vhhOWZEsRYaveYQmVUcLsi7xE5qam23HIlWU64zNmSmIzuqV1rVdOSWka4rJ0l3Uxcljutoug1VjBNhFJzV29XLZQmxXx37d7MuaFCqBdSOCGI7UZua-7zBNUl66UWJ1q97FROT05OWidTxvbh5IXbimwx0k3M12xf1S1uNZWGZu2y5NltVy-IYbrh2c4QzUonqO7OL-fGmmcB5230pzdHnVXtmw3LrNJ_6ya7xO15dlPUgmasUu3pk4IaS2pqq_Yt-elT78VQEGM_xZD6F1MMtXsSPPt_BQN04CCM0jOIZilEP6fTI3TQbP_pfwWzKEljP4xSWJF6zlZwE4fXfnwPP_A9DBz4STD8yDWkaMmrWYzDr1FPNkOI8RWOcRTg5L3CckBbOYwu8V3n8XwJg6YLRcMJQv40xfHH2mH0HQcpJKmfhkkaBgkcPjweThDCdzdTP4xgMLtJjwBHt0NI8LRl_4OreHYNK_j1DccYHJzDaII8z_NQ9-GsELxtNm-b17fNK2RKGqspl3YMx6djeDgegQfHo0f0JwAA__86RYr0

# Make sure it shows up correctly even if it matches the cluster setting.
statement ok
SET CLUSTER SETTING sql.defaults.reorder_joins_limit = 63


query T
EXPLAIN (OPT, ENV) SELECT * FROM y WHERE u = 3
----
https://cockroachdb.github.io/text/decode.html#eJyUk81O20wYhdfMVbw7kk_4AxSpQolYGDO0boODbJeCEBoN9tieZjJj5sckWXERuUKupLIdNog06jLR85w5OnrteXDLtOFKjiFQ2VwrmlWXF8CWLHtyXORMg2XGQtNTCCU4Bc2UzpkmvxWXhgi-4BbO4ctoAuB5kLOCOmGhocKxMZwhzwMm6ZNgZM3LNS07DypqwFbsI65ky6va8gVfM02cYaTixqpS04X5F2vhhOWZEsRYaveYQmVUcLsi7xE5qam23HIlWU64zNmSmIzuqV1rVdOSWka4rJ0l3Uxcljutoug1VjBNhFJzV29XLZQmxXx37d7MuaFCqBdSOCGI7UZua-7zBNUl66UWJ1q97FROT05OWidTxvbh5IXbimwx0k3M12xf1S1uNZWGZu2y5NltVy-IYbrh2c4QzUonqO7OL-fGmmcB5230pzdHnVXtmw3LrNJ_6ya7xO15dlPUgmasUu3pk4IaS2pqq_Yt-elT78VQEGM_xZD6F1MMtXsSPPt_BQN04CCM0jOIZilEP6fTI3TQbP_pfwWzKEljP4xSWJF6zlZwE4fXfnwPP_A9DBz4STD8yDWkaMmrWYzDr1FPNkOI8RWOcRTg5L3CckBbOYwu8V3n8XwJg6YLRcMJQv40xfHH2mH0HQcpJKmfhkkaBgkcPjweThDCdzdTP4xgMLtJjwBHt0NI8LRl_4OreHYNK_j1DccYHJzDaII8z_NQ9-GsELxtNm-b17fNK2RKGqspl3YMx6djeDgegQfHo0f0JwAA__86RYr0

statement ok
SET enable_zigzag_join = false

query T
EXPLAIN (OPT, ENV) SELECT * FROM y WHERE u = 3
----
https://cockroachdb.github.io/text/decode.html#eJyMk99O2z4cxa_xU3zvaH8iP0CVJtSKixDMlq2kKMkYCCHLJE7i1bWD_4S2VzxEn5AnmZIUaUIUdpnofM736OjY8-CaacOVHEOgsrlWNKvOz4AtWfbguMiZBsuMhaZXIZTgFDRTOmea_FZcGiL4gls4hS-jCYDnQc4K6oSFhgrHxnDSIUzSB8HImpdrWnYgnIIqincRJZHngaotX_A108QZRipurCo1XRioqAFbsX-hFk5YnilBjKX2E1KojApuV-TVIic11ZZbriTLCZc5WxKTUfmxTa1VTUtqGeGydpZ0VXFZ7qSKosdYwTQRSs1dvW22UJoU892xezLnhgqhnkjhhCC267mN-RknqC5ZD7VyotXTTuT46OioZTJlbG9OnrityFZGuor5mn0WdSu3mkpDs7ZZ8ui2rRfEMN3wbKeJZqUTVHd7yrmx5lF8MCLqrGpvNiyzSn-UTf690K6KWtCMVaqdPymosaSmtmpvyXdPvQZDQYz9FEPqn00x1O5B8Oz_FQzQnoMwSk8gmqUQ_ZxOD9Bes_3TfwWzKEljP4xSWJF6zlZwFYeXfnwLP_AtDBz4STB8q2tI0SovZjEOv0a9shlCjC9wjKMAJ68RlgPawmF0jm86judLGDSdKRpOEPKnKY7fxg6j7zhIIUn9NEzSMEhg_-5-f4IQvrma-mEEg9lVegA4uh5Cgqet9j-4iGeXsIJf33CMwcEpjCbI8zwPdQ9nheBls3nZPL9sniFT0lhNubRjODwew93hCDw4HN2jPwEAAP__f9iLVg==

statement ok
SET optimizer_use_histograms = false

query T
EXPLAIN (OPT, ENV) SELECT * FROM y WHERE u = 3
----
https://cockroachdb.github.io/text/decode.html#eJyEk91O4zoUha_xU-w72iNyAFU6Qq24CMGcyUxJUZJhQAhZJnEST107-Ce0veIh-oQ8yShJkUaIlktb61t7aWlvz4Nbpg1XcgyByuZa0ay6vAC2ZNmT4yJnGiwzFppehVCCU9BM6Zxp8ltxaYjgC27hHP4bTQA8D3JWUCcsNFQ4NoazDmGSPglG1rxc07ID4RxUUXyKKNkxqrZ8wddME2cYqbixqtR0YfaTnvcBXDhheaYEMZZaAxU1YCv2OSlURgW3K_JukZOaasstV5LlhMucLYnJqNxvU2tV05JaRrisnSVdXVyWO6mi6DFWME2EUnNXb9stlCbFfHfsnsy5oUKoF1I4IYjtum5jfsUJqkvWQ62caPWyEzk9OTlpmUwZ25uTF24rspWRrmK-Zl9F3cqtptLQrG2WPLtt6wUxTDc822miWekE1d1-5NxY8yz2rAN1VrUzG5ZZpfdlk39vaVdFLWjGKtWeACmosaSmtmpnyU9HvQdDQYz9FEPqX0wx1O5J8OzfFQzQgYMwSs8gmqUQ_ZxOj9BBs_3pX8EsStLYD6MUVqSesxXcxOG1H9_DD3wPAwd-Egw_6hpStMqrWYzD_6Ne2Qwhxlc4xlGAk_cIywFt4TC6xHcdx_MlDJrOFA0nCPnTFMcfY4fRdxykkKR-GiZpGCRw-PB4OEEI391M_TCCwewmPQIc3Q4hwdNW-w9cxbNrWMGvbzjG4OAcRhPkeZ6HusNZIXjbbN42r2-bV8iUNFZTLu0Yjk_H8HA8Ag-OR4_oTwAAAP__ApiLuA==

statement ok
SET optimizer_use_multicol_stats = false

query T
EXPLAIN (OPT, ENV) SELECT * FROM y WHERE u = 3
----
https://cockroachdb.github.io/text/decode.html#eJyUk89O4zwUxdf4Ke6O9hP5AFUaoVYsQjEzmSkpSjIMCCHLOE7iqWsH_wltVzxEn5AnGSUt0ggB1SwTnd-5R-f6BgFcc2OFVkMYazYzmrLq_Az4grMHL2TODThuHTQbFUIpzsBwbXJuyG8tlCVSzIWDU_gyGAEEAeS8oF46aKj0fAgnHcIVfZCcrES5omUHwinoongX0apjdO3EXKy4Id5yUgnrdGno3P4rOffSCaYlsY66HXQQgNSMSuGW5NUlJzU1TjihFc-JUDlfEMuogopacBV_36Y2uqYldZwIVXtHusqEKj-kimKD8YIbIrWe-XrbcKENKWZ2B5kLS6XUT6TwUhLX9d3G3MVJakq-gVo5MfrpQ-T46OioZZi2bmNOnoSryFZGupbFiu-KupU7Q5WlrG2WPPpt6wWx3DSCfWhieOklNd2mc2GdfZSfLJV6p9uZDWdOm8-yqb9faldFLSnjlW7PgBTUOlJTV7Wz1LujXoOhcYLDDEMWnk0w1P5BCvb_Enpoz0MUZycQTzOIf04mB2iv2f7ZfI2ncZolYRRnsCT1jC_hKokuw-QWfuBb6HkI03H_ra4hRau8mCY4-hpvlE0fEnyBExyPcfoaYdGjLRzF5_im40S-gF7TmaL-CKFwkuHkbewo_o7HGaRZmEVpFo1T2L-73x8hhG-uJmEUQ296lR0Ajq_7kOJJq_0PLpLpJSzh1zecYPBwCoMRCoIgQN3hLBG8rNcv6-eX9TMwrawzVCg3hMPjIdwdDiCAw8E9-hMAAP__x6uMGg==

statement ok
RESET reorder_joins_limit

statement ok
RESET enable_zigzag_join

statement ok
RESET optimizer_use_histograms

statement ok
RESET optimizer_use_multicol_stats

#
# Test sequences.
#

statement ok
CREATE SEQUENCE seq

query T
EXPLAIN (OPT, ENV) SELECT * FROM seq
----
https://cockroachdb.github.io/text/decode.html#eJyUksFu2zwQhO96ij3-f1EVdtzEaYIcXJcFAsRKaitGbguaWkmsaVIml3bqpy8kOZcirtEbAc43OxhMmsKSfNDO3sDUqbV3UtXfvgK9klpFbQrywBQYdr0qSRYiB0_OF-Txp9M2oNEbzXAHV6NbgDSFgkoZDcNOmkg3cJ2kKZCVK0N40NVBVh0HtQzANf0pd7bVu4b1Rh_IYwyEtQ7sKi834V-oTTSslTMYWPIZ0jgljeZf-GZRYCM9a9bOUoHaFvSKQckzsRvvGllJJtS2iYxdTdpWJ6my7DEqyaNxbh2bY6ul81iuT8fuyUIHaYzbYxmNQe5KbmOe44z0FfVQK0fv9ieR4WAwaBnlAvfmuNdc41GGXcX6QOeiHuXspQ1Stc3iNh5bLzGQ32l10sRTFY303fwKHThsDdy11u9uTkZ27c0dKXb-b9ls53icZ1dFY6Si2rXTx1IGxkZy3d6y7556C5ZM52KSC1iIH88imwpo4spo9SnQFmb32XLy8CxgCLPJS__8cnExGo0vBqOr68vP4_Hl9WAM99l0LmYiy2EIi3wyz2F4myTi5elhcp_Bf49P-UcQ2fJ_WIgHMc3hA3yfP84g0PY2SdM0TQJtI1lFaSBDituf5HcAAAD__0oaWGU=

#
# Test views.
#

statement ok
CREATE VIEW v AS SELECT a, b, u, v FROM x, y WHERE b = 3

query T
EXPLAIN (OPT, ENV) SELECT * FROM v
----
https://cockroachdb.github.io/text/decode.html#eJy0ld1u2zYYho_Dq_jgk9qD1MgxMBQOAsx1lU2bqwSylrYIAoKWKJsLTar8UewMA4pdgw93dbmSgbSduK3dYBjqAwOk3vf740MwDOGKKs2k6MNQFrdKkmL25jXQBS0mlvGSKjBUG2jWKoTGcQ6KSlVShf-QTGjM2ZwZOIMfe6cAYQglrYjlBhrCLe3DKxSGQAWZcIrv2fSeTL0PZkSDmdEv5VI4vawNm7N7qrDVFM-YNnKqyFz_F9fccsMKybE2xDzj5LIgnJkl3oYocU2UYYZJQUvMREkXWBfkmbJrJWsyJYZiJmprsB8TE9ODrqpa22hFFeZS3tp6M9VKKlzdHi577SyZJpzLO1xZzrHxQ3ZlPufjRE3p2uTkWMm7g5ZuFEXOU0ht1sHxHTMzvJFhP2J2T58rdSM3ighNCjdZ_NFupl5hTVXDioNBFJ1aTpTHr2Ta6I8czlzovcwRa6TL2dDCSPWt2oSPuMHTj6LmpKAz6dDHFdEG18TMXC6xN9W2MDTM4kEeQz54PYqhthPOipcLaKMjAkmav4L0Iof099EoQEeTzc56NbxIx3k2SNIcFri-pUu4zJK3g-wD_BZ_gDaBwXjYCdBRkr6J38MCTzArF9Ce-H3UOUVoMMrj7MvMSfprPMxhnA_yZJwnwzG8uEYAAH_6f_drkWbqj67Vhyh42i4kt3OhW324ftxc61uP65tdvaLE0BIT0-pD6yTqvgqjbhh1Ier2o6gfRa0dsTs9JgrHjRXO0I12c_u77pkyy9oV1to1C0fs1rhrU_LuKeBJr3vS89_-Cv5vy5Pv0rKv8Pt1jW5enO4ncumItF8R2RwicrmHSLsl8jNdgyunPL_I4uTndK1sOpDF53EWp8N4_Ihmmzzh7Hwe5-abOC_34rzb5VUSv9uqG3_t3EUL0JF17aEODMYwjkcuBglgEoANoIHz7OKtf-BebosLPlsu4d0vcRbDBM6gd4pQ_P5yNEhSaF9c5gHE6VVnG_SHdazmFIVhGCImBFWhf-jahZJadxA8rP55WH16WH0C_5Isv9pZ_LS53e7L3-4kH1arjaCQQhtFmDB9OD457vbh-rgHIRz3btCOrGLcUKWhbZSlHfRvAAAA__9GOWio

#
# Test tables in user-defined schemas.
#

statement ok
CREATE SCHEMA s;
CREATE TABLE s.t (a int primary key)

query T
EXPLAIN (OPT, ENV) SELECT * FROM s.t;
----
https://cockroachdb.github.io/text/decode.html#eJyUklFr204QxJ9zn2LfkvyJ_qQUSojJg-KqoNaRg3UNDaUsG2klXX3WKXcrJ_GnL5IdKCWu6fv8ZoZhogju2Afj2kuYumLpHRXNx2vgZy4eemNL9iAcBNZblVJ5osGz8yV7_OlMG9CalRG4gg_vJwBRBCVX1FuBNdmeL-FCRRFwSw-WcWPqDdUjBw0FkIb_lLt20LtOzMps2GMfGBsTxNWeVuFfqFVvxRTOYhCSA6R1BVkjL_hqUWJHXowY13KJpi35GUNBB2p33nVUkzCatusFx5lMW--lqmqLccUerXPLvtutWjmP1XJ_7S1ZmkDWuiesemtRxpGHmoc4S77mLTTI0bunvci78_PzgSlckK05PhlpcCfDcWKz4UNVd3Lx1AYqhmXxsd-tXmFgvzbFXhPPdW_Jj_crTZDwaOFqsH7zc9SLGzLXXIjzf-vWjo67e45TdJYKbtxwfawoCHYkzZDVvhn1WkxNF0msE9Dx9SyB8L_AiToiSDN9AdlcQ_Z1NjtTR9N5lutFnGYaBLslv8DtIr2JF_fwJbmHE4I4n56q04lS8Uwni9_s0uxzMtWQ61inuU6nORx__3E8USr5djuL0wxO5rf6DJLs7hTyZDZo_4NPi_nNQE9UFEWRGh8s6lcAAAD__4FAWw0=

#
# Test default_transaction_quality_of_service settings.
#

statement ok
SET default_transaction_quality_of_service=background

query T
EXPLAIN (OPT, ENV) VALUES(1);
----
https://cockroachdb.github.io/text/decode.html#eJyUk8FqGzEQhu_7FHO0IQs2hVISfEhbHwohDSQ1vQ1j7eyualmzkUZ26lMewk_oJynadS4ltsn9_379fIzKEhYcohV_Dd_ErIKQab9_BX5hs0zWVRxAOSpshlRRPM6fILCEigP-EesjOru2CjP4_OkGoCyh4pqSU9iQS3wNX4qyBPa0dIw72-yo6TloKYK2_H9cfM5Lp3ZtdxwwRcbWRpUm0Dp-hFonp9aIw6ikF0gnhpzVv_hWUWFHQa1a8Vyh9RW_YDR0YXYXpKOGlNH6Lin2mqxvTlJ1PWBcc0Anskrd0WotAevV6dkDWdlIzskW6-Qcai85z7zEOQoND1COY5DtSWQ6mUwyYyTqUI5bqy0eY9grtjs-92S-mre8BvKRTFaLz-movcbIYWMNwwyWZFZNkOSrdw8qcJMchaHTRo3PDmb5lXfTlFTy-g0blXBupu8bj5faW-kcGW4l_wKsKSp2pG1-y58dVsx_P9zd_riH0c-HpyuY3y_GsLi9-zV_hNF0fFOUZVkWPRMLOOz3h_3rYf8Ko-nVuPgXAAD__2nxRGI=

statement ok
SET default_transaction_quality_of_service=critical

query T
EXPLAIN (OPT, ENV) VALUES(1);
----
https://cockroachdb.github.io/text/decode.html#eJyUk0FqG00Qhfdzilra4AGJH36CjRZOokXAOAY7Irui3FMzU1Gra9xdLTla-RA6oU4SZkbeBEsi-_e9fnxUlyUsOCbRcA1f1C2jkmu_fgZ-ZfecxVccwTgZrMdUUTzOnyCyxooj_lIJCb2sxGAG__93A1CWUHFN2RusyWe-hk9FWQIHevaMW2m21AwctJTAWv47rqHPa2eyki1HzImxlWTaRFqlf6FW2Zs49ZiM7Azp1ZEX-43vFRV2FE1MNHCFEip-xeTozOwuakcNGaOELhsOmiQ0R6m6HjGuOaJXXebuYLXWiPXy-OyRrCSR97rBOnuPNkjuZ57jPMWGR6iPY9TNUWQ6mUx6xmmysRw3Yi0eYjgoli2ferK_mve8RQqJXK8WX_JBe42J41ocwwxcFBNH_sNzitxkT3FslGTpxcOsf-PDNGXTfvuanWk8NTIMjYc7HZx0nhy32v8BrCkZdmRt_1Y4OayY_3y4u_12DxffH56uYH6_uITF7d2P-SNcTC9virIsy2JgUgH73W6_e9vv3uBienVZ_AkAAP__uL5DjQ==
