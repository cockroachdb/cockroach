# This test reproduces lease thrashing (#108420) when the replication factor is
# set to 1.
gen_cluster nodes=2
----

gen_ranges ranges=100 repl_factor=1 placement_type=skewed
----

eval duration=20m seed=42 metrics=(replicas,leases) cfgs=(sma-count,mma-only)
----
leases#1: first: [s1=66, s2=34] (stddev=16.00, mean=50.00, sum=100)
leases#1: last:  [s1=51, s2=49] (stddev=1.00, mean=50.00, sum=100)
leases#1: thrash_pct: [s1=0%, s2=0%]  (sum=0%)
replicas#1: first: [s1=66, s2=34] (stddev=16.00, mean=50.00, sum=100)
replicas#1: last:  [s1=51, s2=49] (stddev=1.00, mean=50.00, sum=100)
replicas#1: thrash_pct: [s1=0%, s2=0%]  (sum=0%)
artifacts[sma-count]: 9f358e29e5d2845b
==========================
leases#1: first: [s1=66, s2=34] (stddev=16.00, mean=50.00, sum=100)
leases#1: last:  [s1=66, s2=34] (stddev=16.00, mean=50.00, sum=100)
leases#1: thrash_pct: [s1=0%, s2=0%]  (sum=0%)
replicas#1: first: [s1=66, s2=34] (stddev=16.00, mean=50.00, sum=100)
replicas#1: last:  [s1=66, s2=34] (stddev=16.00, mean=50.00, sum=100)
replicas#1: thrash_pct: [s1=0%, s2=0%]  (sum=0%)
artifacts[mma-only]: 89d5d4424005f5a5
==========================
