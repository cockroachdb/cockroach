load_cluster config=complex
----

gen_ranges ranges=20
----

#ComplexConfig Topology:
# EU
#  EU_1
#  │ └── [19 20 21]
#  EU_2
#  │ └── [22 23 24]
#  EU_3
#  │ └── [25 26 27 28]
# US_East
#  US_East_1
#  │ └── [1]
#  US_East_2
#  │ └── [2 3]
#  US_East_3
#  │ └── [4 5 6]
#  US_East_4
#  │ └── [7 8 9 10 11 12 13 14 15 16]
# US_West
#  US_West_1
#    └── [17 18]


set_span_config delay=10m
[0,9999999999): num_replicas=16 num_voters=3 constraints={'+region=a':16,'+zone=a1':1,'+zone=a2':2} voter_constraints={'+zone=a4':3}
----

validate_config
----
unsatisfiable:
validation result:
	zone:
		a1: voters: 0, non_voters: 0, unassigned: 1
		a2: voters: 0, non_voters: 0, unassigned: 2
		a3: voters: 0, non_voters: 0, unassigned: 3
		a4: voters: 0, non_voters: 0, unassigned: 10
		b1: voters: 0, non_voters: 0, unassigned: 2
		c1: voters: 0, non_voters: 0, unassigned: 3
		c2: voters: 0, non_voters: 0, unassigned: 3
		c3: voters: 0, non_voters: 0, unassigned: 4
	region:
		a: voters: 0, non_voters: 0, unassigned: 16
		b: voters: 0, non_voters: 0, unassigned: 2
		c: voters: 0, non_voters: 0, unassigned: 10
	cluster: voters: 0, non_voters: 0, unassigned: 28
zone constraint value US_East_4 is not found in the cluster set up

assertion type=conformance under=0 over=0 unavailable=0 violating=0
----

eval duration=60m
----
failed assertion sample 1
  conformance unavailable=0 under=0 over=0 violating=0 
  actual unavailable=0 under=20, over=0 violating=40 lease-violating=0 lease-less-preferred=0
under replicated:
  r1:0000000{000-500} [(n1,s1):1, (n2,s2):2, (n3,s3):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r2:000000{0500-1000} [(n15,s15):1, (n26,s26):2, (n13,s13):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r3:0000001{000-500} [(n11,s11):1, (n24,s24):2, (n27,s27):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r4:000000{1500-2000} [(n23,s23):1, (n20,s20):2, (n22,s22):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r5:0000002{000-500} [(n9,s9):1, (n5,s5):2, (n10,s10):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r6:000000{2500-3000} [(n25,s25):1, (n18,s18):2, (n28,s28):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r7:0000003{000-500} [(n6,s6):1, (n21,s21):2, (n7,s7):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r8:000000{3500-4000} [(n17,s17):1, (n14,s14):2, (n19,s19):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r9:0000004{000-500} [(n4,s4):1, (n8,s8):2, (n16,s16):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r10:000000{4500-5000} [(n12,s12):1, (n9,s9):2, (n22,s22):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r11:0000005{000-500} [(n23,s23):1, (n5,s5):2, (n11,s11):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r12:000000{5500-6000} [(n3,s3):1, (n19,s19):2, (n8,s8):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r13:0000006{000-500} [(n13,s13):1, (n16,s16):2, (n7,s7):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r14:000000{6500-7000} [(n25,s25):1, (n17,s17):2, (n2,s2):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r15:0000007{000-500} [(n4,s4):1, (n21,s21):2, (n1,s1):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r16:000000{7500-8000} [(n20,s20):1, (n24,s24):2, (n18,s18):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r17:0000008{000-500} [(n6,s6):1, (n26,s26):2, (n27,s27):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r18:000000{8500-9000} [(n12,s12):1, (n10,s10):2, (n14,s14):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r19:0000009{000-500} [(n15,s15):1, (n28,s28):2, (n27,s27):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r20:{0000009500-2147483647} [(n11,s11):1, (n20,s20):2, (n19,s19):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]violating constraints:
  r1:0000000{000-500} [(n1,s1):1, (n2,s2):2, (n3,s3):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r1:0000000{000-500} [(n1,s1):1, (n2,s2):2, (n3,s3):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r2:000000{0500-1000} [(n15,s15):1, (n26,s26):2, (n13,s13):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r2:000000{0500-1000} [(n15,s15):1, (n26,s26):2, (n13,s13):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r3:0000001{000-500} [(n11,s11):1, (n24,s24):2, (n27,s27):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r3:0000001{000-500} [(n11,s11):1, (n24,s24):2, (n27,s27):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r4:000000{1500-2000} [(n23,s23):1, (n20,s20):2, (n22,s22):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r4:000000{1500-2000} [(n23,s23):1, (n20,s20):2, (n22,s22):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r5:0000002{000-500} [(n9,s9):1, (n5,s5):2, (n10,s10):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r5:0000002{000-500} [(n9,s9):1, (n5,s5):2, (n10,s10):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r6:000000{2500-3000} [(n25,s25):1, (n18,s18):2, (n28,s28):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r6:000000{2500-3000} [(n25,s25):1, (n18,s18):2, (n28,s28):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r7:0000003{000-500} [(n6,s6):1, (n21,s21):2, (n7,s7):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r7:0000003{000-500} [(n6,s6):1, (n21,s21):2, (n7,s7):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r8:000000{3500-4000} [(n17,s17):1, (n14,s14):2, (n19,s19):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r8:000000{3500-4000} [(n17,s17):1, (n14,s14):2, (n19,s19):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r9:0000004{000-500} [(n4,s4):1, (n8,s8):2, (n16,s16):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r9:0000004{000-500} [(n4,s4):1, (n8,s8):2, (n16,s16):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r10:000000{4500-5000} [(n12,s12):1, (n9,s9):2, (n22,s22):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r10:000000{4500-5000} [(n12,s12):1, (n9,s9):2, (n22,s22):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r11:0000005{000-500} [(n23,s23):1, (n5,s5):2, (n11,s11):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r11:0000005{000-500} [(n23,s23):1, (n5,s5):2, (n11,s11):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r12:000000{5500-6000} [(n3,s3):1, (n19,s19):2, (n8,s8):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r12:000000{5500-6000} [(n3,s3):1, (n19,s19):2, (n8,s8):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r13:0000006{000-500} [(n13,s13):1, (n16,s16):2, (n7,s7):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r13:0000006{000-500} [(n13,s13):1, (n16,s16):2, (n7,s7):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r14:000000{6500-7000} [(n25,s25):1, (n17,s17):2, (n2,s2):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r14:000000{6500-7000} [(n25,s25):1, (n17,s17):2, (n2,s2):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r15:0000007{000-500} [(n4,s4):1, (n21,s21):2, (n1,s1):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r15:0000007{000-500} [(n4,s4):1, (n21,s21):2, (n1,s1):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r16:000000{7500-8000} [(n20,s20):1, (n24,s24):2, (n18,s18):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r16:000000{7500-8000} [(n20,s20):1, (n24,s24):2, (n18,s18):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r17:0000008{000-500} [(n6,s6):1, (n26,s26):2, (n27,s27):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r17:0000008{000-500} [(n6,s6):1, (n26,s26):2, (n27,s27):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r18:000000{8500-9000} [(n12,s12):1, (n10,s10):2, (n14,s14):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r18:000000{8500-9000} [(n12,s12):1, (n10,s10):2, (n14,s14):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r19:0000009{000-500} [(n15,s15):1, (n28,s28):2, (n27,s27):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r19:0000009{000-500} [(n15,s15):1, (n28,s28):2, (n27,s27):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r20:{0000009500-2147483647} [(n11,s11):1, (n20,s20):2, (n19,s19):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
  r20:{0000009500-2147483647} [(n11,s11):1, (n20,s20):2, (n19,s19):3] applying num_replicas=16 num_voters=3 constraints=[+region=US_East:16 +zone=US_East_1:1 +zone=US_East_2:2] voter_constraints=[+zone=US_East_4:3]
