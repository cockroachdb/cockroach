skip_under_ci
----

gen_cluster nodes=25 node_cpu_rate_capacity=8000000000
----

setting split_queue_enabled=false
----

# This workload will be initially evenly distributed over the cluster.
gen_ranges ranges=50 min_key=0 max_key=10000
----

gen_load rate=15000 rw_ratio=0.95 min_block=100 max_block=100 request_cpu_per_access=100 raft_cpu_per_write=20 min_key=0 max_key=10000
----

# Another workload is added over the second half of the keyspace, which is initially
# only on s1-s3.
gen_ranges ranges=50 min_key=10001 max_key=20000 placement_type=skewed
----

gen_load rate=15000 rw_ratio=0.95 min_block=1 max_block=1 request_cpu_per_access=7000000 raft_cpu_per_write=20000 min_key=10001 max_key=20000
----

eval duration=25m samples=1 seed=42 cfgs=(mma-only,mma-count) metrics=(cpu,cpu_util,write_bytes_per_second,replicas,leases)
----
cpu#1: last:  [s1=4206946884, s2=4192160557, s3=6308915242, s4=4200098221, s5=4190855179, s6=4199054011, s7=4198384675, s8=4195969774, s9=4205041525, s10=4208294179, s11=4206362381, s12=4205362972, s13=4205781885, s14=4205720756, s15=4189319202, s16=4199761586, s17=4193214179, s18=4204100616, s19=4208198617, s20=4204672847, s21=4208825515, s22=2101879103, s23=4195299559, s24=4202456685, s25=4199007830] (stddev=594992424.39, mean=4201427359.20, sum=105035683980)
cpu#1: thrash_pct: [s1=6%, s2=40%, s3=51%, s4=51%, s5=26%, s6=3%, s7=2%, s8=3%, s9=3%, s10=2%, s11=3%, s12=3%, s13=3%, s14=2%, s15=2%, s16=19%, s17=3%, s18=3%, s19=3%, s20=3%, s21=19%, s22=1%, s23=3%, s24=2%, s25=11%]  (sum=267%)
cpu_util#1: last:  [s1=0.53, s2=0.52, s3=0.79, s4=0.53, s5=0.52, s6=0.52, s7=0.52, s8=0.52, s9=0.53, s10=0.53, s11=0.53, s12=0.53, s13=0.53, s14=0.53, s15=0.52, s16=0.52, s17=0.52, s18=0.53, s19=0.53, s20=0.53, s21=0.53, s22=0.26, s23=0.52, s24=0.53, s25=0.52] (stddev=0.07, mean=0.53, sum=13)
cpu_util#1: thrash_pct: [s1=6%, s2=40%, s3=51%, s4=51%, s5=26%, s6=3%, s7=2%, s8=3%, s9=3%, s10=2%, s11=3%, s12=3%, s13=3%, s14=2%, s15=2%, s16=19%, s17=3%, s18=3%, s19=3%, s20=3%, s21=19%, s22=1%, s23=3%, s24=2%, s25=11%]  (sum=267%)
leases#1: first: [s1=28, s2=14, s3=4, s4=3, s5=3, s6=2, s7=2, s8=2, s9=2, s10=2, s11=3, s12=2, s13=3, s14=3, s15=2, s16=3, s17=3, s18=3, s19=2, s20=2, s21=2, s22=3, s23=3, s24=3, s25=1] (stddev=5.43, mean=4.00, sum=100)
leases#1: last:  [s1=3, s2=4, s3=5, s4=4, s5=4, s6=4, s7=4, s8=3, s9=4, s10=4, s11=5, s12=3, s13=5, s14=4, s15=4, s16=4, s17=4, s18=4, s19=4, s20=4, s21=4, s22=3, s23=5, s24=5, s25=3] (stddev=0.63, mean=4.00, sum=100)
leases#1: thrash_pct: [s1=0%, s2=34%, s3=45%, s4=45%, s5=23%, s6=0%, s7=0%, s8=0%, s9=0%, s10=0%, s11=0%, s12=0%, s13=0%, s14=0%, s15=0%, s16=15%, s17=0%, s18=0%, s19=0%, s20=0%, s21=16%, s22=0%, s23=0%, s24=0%, s25=8%]  (sum=187%)
replicas#1: first: [s1=56, s2=44, s3=25, s4=16, s5=12, s6=9, s7=8, s8=7, s9=7, s10=7, s11=7, s12=7, s13=7, s14=8, s15=7, s16=8, s17=7, s18=8, s19=7, s20=7, s21=7, s22=7, s23=7, s24=8, s25=7] (stddev=11.97, mean=12.00, sum=300)
replicas#1: last:  [s1=54, s2=33, s3=19, s4=11, s5=10, s6=9, s7=10, s8=8, s9=9, s10=9, s11=8, s12=8, s13=9, s14=9, s15=9, s16=9, s17=8, s18=8, s19=9, s20=9, s21=8, s22=7, s23=9, s24=10, s25=8] (stddev=9.99, mean=12.00, sum=300)
replicas#1: thrash_pct: [s1=0%, s2=0%, s3=0%, s4=5%, s5=5%, s6=0%, s7=0%, s8=0%, s9=0%, s10=0%, s11=0%, s12=0%, s13=0%, s14=0%, s15=0%, s16=9%, s17=0%, s18=0%, s19=0%, s20=0%, s21=9%, s22=0%, s23=0%, s24=0%, s25=4%]  (sum=31%)
write_bytes_per_second#1: last:  [s1=9725, s2=9402, s3=9165, s4=9076, s5=9050, s6=9029, s7=9035, s8=9027, s9=9065, s10=9049, s11=9012, s12=8981, s13=9057, s14=9058, s15=9086, s16=9069, s17=9029, s18=9030, s19=9035, s20=9020, s21=9031, s22=9020, s23=9054, s24=9084, s25=9051] (stddev=150.73, mean=9089.60, sum=227240)
write_bytes_per_second#1: thrash_pct: [s1=476%, s2=467%, s3=415%, s4=409%, s5=427%, s6=396%, s7=394%, s8=367%, s9=352%, s10=351%, s11=346%, s12=376%, s13=374%, s14=380%, s15=358%, s16=365%, s17=398%, s18=390%, s19=372%, s20=370%, s21=416%, s22=362%, s23=440%, s24=396%, s25=364%]  (sum=9762%)
artifacts[mma-only]: 6abd02a180a2723e
==========================
cpu#1: last:  [s1=4201252946, s2=4208402692, s3=4199495697, s4=4210865912, s5=4196962181, s6=4202872056, s7=4205682612, s8=4198147325, s9=4193874677, s10=4206132869, s11=4187343307, s12=4200786074, s13=4200160964, s14=4200360317, s15=4210482241, s16=4185676746, s17=4206562216, s18=4203431118, s19=4201668890, s20=4204123081, s21=4208255378, s22=4199258831, s23=4208773221, s24=4205490228, s25=4200562411] (stddev=6192338.73, mean=4201864959.60, sum=105046623990)
cpu#1: thrash_pct: [s1=5%, s2=3%, s3=17%, s4=19%, s5=2%, s6=11%, s7=11%, s8=10%, s9=3%, s10=3%, s11=11%, s12=10%, s13=3%, s14=10%, s15=3%, s16=3%, s17=2%, s18=2%, s19=11%, s20=3%, s21=11%, s22=10%, s23=3%, s24=11%, s25=3%]  (sum=181%)
cpu_util#1: last:  [s1=0.53, s2=0.53, s3=0.52, s4=0.53, s5=0.52, s6=0.53, s7=0.53, s8=0.52, s9=0.52, s10=0.53, s11=0.52, s12=0.53, s13=0.53, s14=0.53, s15=0.53, s16=0.52, s17=0.53, s18=0.53, s19=0.53, s20=0.53, s21=0.53, s22=0.52, s23=0.53, s24=0.53, s25=0.53] (stddev=0.00, mean=0.53, sum=13)
cpu_util#1: thrash_pct: [s1=5%, s2=3%, s3=17%, s4=19%, s5=2%, s6=11%, s7=11%, s8=10%, s9=3%, s10=3%, s11=11%, s12=10%, s13=3%, s14=10%, s15=3%, s16=3%, s17=2%, s18=2%, s19=11%, s20=3%, s21=11%, s22=10%, s23=3%, s24=11%, s25=3%]  (sum=181%)
leases#1: first: [s1=28, s2=14, s3=4, s4=3, s5=3, s6=2, s7=2, s8=2, s9=2, s10=2, s11=3, s12=2, s13=3, s14=3, s15=2, s16=3, s17=3, s18=3, s19=2, s20=2, s21=2, s22=3, s23=3, s24=3, s25=1] (stddev=5.43, mean=4.00, sum=100)
leases#1: last:  [s1=3, s2=2, s3=2, s4=4, s5=4, s6=4, s7=4, s8=4, s9=4, s10=4, s11=6, s12=3, s13=5, s14=4, s15=4, s16=4, s17=4, s18=4, s19=4, s20=4, s21=5, s22=4, s23=6, s24=5, s25=3] (stddev=0.94, mean=4.00, sum=100)
leases#1: thrash_pct: [s1=0%, s2=0%, s3=16%, s4=15%, s5=0%, s6=8%, s7=8%, s8=8%, s9=0%, s10=0%, s11=9%, s12=8%, s13=0%, s14=8%, s15=0%, s16=0%, s17=0%, s18=0%, s19=8%, s20=0%, s21=9%, s22=8%, s23=0%, s24=8%, s25=0%]  (sum=114%)
replicas#1: first: [s1=56, s2=44, s3=25, s4=16, s5=12, s6=9, s7=8, s8=7, s9=7, s10=7, s11=7, s12=7, s13=7, s14=8, s15=7, s16=8, s17=7, s18=8, s19=7, s20=7, s21=7, s22=7, s23=7, s24=8, s25=7] (stddev=11.97, mean=12.00, sum=300)
replicas#1: last:  [s1=13, s2=14, s3=10, s4=10, s5=11, s6=12, s7=10, s8=12, s9=12, s10=14, s11=13, s12=12, s13=13, s14=12, s15=13, s16=11, s17=11, s18=11, s19=12, s20=13, s21=13, s22=12, s23=11, s24=12, s25=13] (stddev=1.13, mean=12.00, sum=300)
replicas#1: thrash_pct: [s1=0%, s2=0%, s3=0%, s4=0%, s5=0%, s6=0%, s7=5%, s8=0%, s9=0%, s10=0%, s11=0%, s12=0%, s13=0%, s14=0%, s15=0%, s16=0%, s17=0%, s18=0%, s19=5%, s20=0%, s21=0%, s22=0%, s23=0%, s24=0%, s25=0%]  (sum=10%)
write_bytes_per_second#1: last:  [s1=1680, s2=210, s3=1635, s4=3114, s5=7601, s6=10568, s7=9083, s8=12047, s9=12057, s10=9166, s11=12063, s12=10615, s13=10597, s14=9070, s15=10579, s16=10529, s17=12035, s18=9045, s19=13570, s20=10624, s21=10586, s22=9120, s23=10525, s24=9057, s25=12066] (stddev=3515.59, mean=9089.68, sum=227242)
write_bytes_per_second#1: thrash_pct: [s1=21%, s2=15%, s3=23%, s4=26%, s5=40%, s6=46%, s7=41%, s8=69%, s9=45%, s10=57%, s11=48%, s12=47%, s13=40%, s14=60%, s15=40%, s16=45%, s17=62%, s18=84%, s19=49%, s20=47%, s21=44%, s22=40%, s23=51%, s24=67%, s25=72%]  (sum=1178%)
artifacts[mma-count]: 4547c04e9f56748b
==========================
