skip_under_ci
----

gen_cluster nodes=25 node_cpu_rate_capacity=800000
----
WARNING: node CPU capacity of â‰ˆ0.00 cores is likely accidental

setting split_queue_enabled=false
----

# This workload will be initially evenly distributed over the cluster.
gen_ranges ranges=50 min_key=0 max_key=10000
----

gen_load rate=15000 rw_ratio=0.95 min_block=100 max_block=100 request_cpu_per_access=100 raft_cpu_per_write=20 min_key=0 max_key=10000
----

# Another workload is added over the second half of the keyspace, which is initially
# only on s1-s3.
gen_ranges ranges=50 min_key=10001 max_key=20000 placement_type=skewed
----

gen_load rate=15000 rw_ratio=0.95 min_block=1 max_block=1 request_cpu_per_access=100000 raft_cpu_per_write=20000 min_key=10001 max_key=20000
----

eval duration=25m samples=1 seed=42 cfgs=(mma-only) metrics=(cpu,cpu_util,write_bytes_per_second,replicas,leases)
----
cpu#1: last:  [s1=74125827, s2=68034597, s3=63030218, s4=62464586, s5=61575256, s6=60952144, s7=60895605, s8=60583595, s9=60898231, s10=60917161, s11=60720570, s12=60655112, s13=61045604, s14=60959500, s15=61069491, s16=60785250, s17=60803274, s18=60714988, s19=60866275, s20=60670002, s21=60640246, s22=60684341, s23=60958310, s24=61291868, s25=60628308] (stddev=2911609.33, mean=61838814.36, sum=1545970359)
cpu#1: thrash_pct: [s1=21%, s2=74%, s3=82%, s4=44%, s5=27%, s6=3%, s7=3%, s8=3%, s9=3%, s10=3%, s11=3%, s12=3%, s13=3%, s14=2%, s15=3%, s16=2%, s17=2%, s18=3%, s19=3%, s20=2%, s21=2%, s22=3%, s23=3%, s24=2%, s25=3%]  (sum=300%)
cpu_util#1: last:  [s1=92.66, s2=85.04, s3=78.79, s4=78.08, s5=76.97, s6=76.19, s7=76.12, s8=75.73, s9=76.12, s10=76.15, s11=75.90, s12=75.82, s13=76.31, s14=76.20, s15=76.34, s16=75.98, s17=76.00, s18=75.89, s19=76.08, s20=75.84, s21=75.80, s22=75.86, s23=76.20, s24=76.61, s25=75.79] (stddev=3.64, mean=77.30, sum=1932)
cpu_util#1: thrash_pct: [s1=21%, s2=74%, s3=82%, s4=44%, s5=27%, s6=3%, s7=3%, s8=3%, s9=3%, s10=3%, s11=3%, s12=3%, s13=3%, s14=2%, s15=3%, s16=2%, s17=2%, s18=3%, s19=3%, s20=2%, s21=2%, s22=3%, s23=3%, s24=2%, s25=3%]  (sum=300%)
leases#1: first: [s1=28, s2=14, s3=4, s4=3, s5=3, s6=2, s7=2, s8=2, s9=2, s10=2, s11=3, s12=2, s13=3, s14=3, s15=2, s16=3, s17=3, s18=3, s19=2, s20=2, s21=2, s22=3, s23=3, s24=3, s25=1] (stddev=5.43, mean=4.00, sum=100)
leases#1: last:  [s1=3, s2=4, s3=4, s4=4, s5=4, s6=4, s7=4, s8=3, s9=4, s10=4, s11=5, s12=3, s13=5, s14=4, s15=4, s16=4, s17=4, s18=4, s19=4, s20=4, s21=4, s22=4, s23=5, s24=5, s25=3] (stddev=0.57, mean=4.00, sum=100)
leases#1: thrash_pct: [s1=11%, s2=64%, s3=74%, s4=38%, s5=23%, s6=0%, s7=0%, s8=0%, s9=0%, s10=0%, s11=0%, s12=0%, s13=0%, s14=0%, s15=0%, s16=0%, s17=0%, s18=0%, s19=0%, s20=0%, s21=0%, s22=0%, s23=0%, s24=0%, s25=0%]  (sum=210%)
replicas#1: first: [s1=56, s2=44, s3=25, s4=16, s5=12, s6=9, s7=8, s8=7, s9=7, s10=7, s11=7, s12=7, s13=7, s14=8, s15=7, s16=8, s17=7, s18=8, s19=7, s20=7, s21=7, s22=7, s23=7, s24=8, s25=7] (stddev=11.97, mean=12.00, sum=300)
replicas#1: last:  [s1=53, s2=33, s3=16, s4=14, s5=11, s6=9, s7=9, s8=8, s9=9, s10=9, s11=8, s12=8, s13=9, s14=9, s15=9, s16=9, s17=8, s18=8, s19=9, s20=9, s21=8, s22=8, s23=9, s24=10, s25=8] (stddev=9.74, mean=12.00, sum=300)
replicas#1: thrash_pct: [s1=0%, s2=0%, s3=0%, s4=5%, s5=4%, s6=0%, s7=0%, s8=0%, s9=0%, s10=0%, s11=0%, s12=0%, s13=0%, s14=0%, s15=0%, s16=0%, s17=0%, s18=0%, s19=0%, s20=0%, s21=0%, s22=0%, s23=0%, s24=0%, s25=0%]  (sum=9%)
write_bytes_per_second#1: last:  [s1=9710, s2=9402, s3=9119, s4=9121, s5=9065, s6=9029, s7=9020, s8=9027, s9=9065, s10=9049, s11=9012, s12=8981, s13=9057, s14=9058, s15=9086, s16=9069, s17=9029, s18=9030, s19=9035, s20=9020, s21=9031, s22=9035, s23=9054, s24=9084, s25=9050] (stddev=147.55, mean=9089.52, sum=227238)
write_bytes_per_second#1: thrash_pct: [s1=475%, s2=475%, s3=417%, s4=415%, s5=433%, s6=395%, s7=391%, s8=367%, s9=353%, s10=353%, s11=347%, s12=378%, s13=373%, s14=377%, s15=355%, s16=363%, s17=397%, s18=390%, s19=371%, s20=370%, s21=414%, s22=362%, s23=438%, s24=393%, s25=359%]  (sum=9764%)
artifacts[mma-only]: 3c94ecc45cc49512
==========================
