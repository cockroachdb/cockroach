skip_under_ci
----

gen_cluster nodes=10 node_cpu_rate_capacity=30000
----
WARNING: node CPU capacity of â‰ˆ0.00 cores is likely accidental

# Read only workload, which generates 100_000 request cpu nanos/s evenly over
# the first half of the keyspace, which will be on all stores initially.
gen_ranges ranges=30 min_key=1 max_key=10000 placement_type=even
----

gen_load rate=1000 rw_ratio=1.0 request_cpu_per_access=500000 min_key=1 max_key=10000
----

# Write only workload, which generates no CPU and 100_000 (x replication
# factor) write bytes per second over the second half of the keyspace, which
# are all on s1-s3 initially.
gen_ranges ranges=30 min_key=10001 max_key=20000 placement_type=skewed
----

gen_load rate=20000 rw_ratio=0 min_block=1000 max_block=1000 min_key=10001 max_key=20000
----

setting split_queue_enabled=false
----

eval duration=20m samples=1 seed=42 cfgs=(mma-only,both) metrics=(cpu,write_bytes_per_second,replicas,leases)
----
cpu#1: last:  [s1=50109583, s2=49628333, s3=50182500, s4=49952500, s5=49919166, s6=49699166, s7=49752916, s8=50564583, s9=50066250, s10=50125000] (stddev=261258.69, mean=49999999.70, sum=499999997)
leases#1: first: [s1=19, s2=11, s3=6, s4=3, s5=3, s6=3, s7=4, s8=3, s9=4, s10=4] (stddev=4.92, mean=6.00, sum=60)
leases#1: last:  [s1=10, s2=6, s3=6, s4=3, s5=6, s6=4, s7=4, s8=6, s9=9, s10=6] (stddev=2.05, mean=6.00, sum=60)
replicas#1: first: [s1=39, s2=33, s3=23, s4=16, s5=13, s6=12, s7=11, s8=11, s9=11, s10=11] (stddev=9.76, mean=18.00, sum=180)
replicas#1: last:  [s1=18, s2=18, s3=18, s4=18, s5=18, s6=18, s7=18, s8=18, s9=18, s10=18] (stddev=0.00, mean=18.00, sum=180)
write_bytes_per_second#1: last:  [s1=5987983, s2=5994822, s3=5992147, s4=6010824, s5=5991846, s6=5993816, s7=5993780, s8=6013651, s9=5996138, s10=6012394] (stddev=9123.97, mean=5998740.10, sum=59987401)
artifacts[mma-only]: d1dfa3825f5aa113
cpu#1: last:  [s1=50200000, s2=49941666, s3=49784583, s4=49900416, s5=49837916, s6=50000833, s7=50022500, s8=50337916, s9=49898333, s10=50075833] (stddev=160242.48, mean=49999999.60, sum=499999996)
leases#1: first: [s1=19, s2=11, s3=6, s4=3, s5=3, s6=3, s7=4, s8=3, s9=4, s10=4] (stddev=4.92, mean=6.00, sum=60)
leases#1: last:  [s1=12, s2=5, s3=4, s4=3, s5=4, s6=6, s7=4, s8=9, s9=7, s10=6] (stddev=2.61, mean=6.00, sum=60)
replicas#1: first: [s1=39, s2=33, s3=23, s4=16, s5=13, s6=12, s7=11, s8=11, s9=11, s10=11] (stddev=9.76, mean=18.00, sum=180)
replicas#1: last:  [s1=18, s2=18, s3=18, s4=18, s5=18, s6=18, s7=18, s8=18, s9=18, s10=18] (stddev=0.00, mean=18.00, sum=180)
write_bytes_per_second#1: last:  [s1=5994574, s2=5993490, s3=5997028, s4=5993777, s5=5994312, s6=6009989, s7=6009558, s8=6013147, s9=5994901, s10=5994497] (stddev=7548.25, mean=5999527.30, sum=59995273)
artifacts[both]: adb51e0b4a3f042
