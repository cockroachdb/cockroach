## A simple txn that commits.

run trace ok
with t=A
  begin_txn  ts=11
  mvcc_put   k=a v=abc
  mvcc_get   k=a
----
>> begin_txn ts=11 t=A
txn: "A" meta={id=00000000 key=/Min pri=0.00000000 epo=0 ts=0.000000011,0 min=0.000000000,0 seq=1} rw=true stat=PENDING orig=0.000000011,0 max=0.000000000,0 rts=0.000000000,0 wto=false
>> mvcc_put k=a v=abc t=A
meta: "k/a"/0.000000000,0 -> txn={id=00000000 key=/Min pri=0.00000000 epo=0 ts=0.000000011,0 min=0.000000000,0 seq=1} ts=0.000000011,0 del=false klen=12 vlen=8
data: "k/a"/0.000000011,0 -> /BYTES/abc
>> mvcc_get k=a t=A
get: "k/a" -> /BYTES/abc

run ok
with t=A
  mvcc_put   k=a/1 v=eee
  mvcc_put   k=b   v=fff
  mvcc_put   k=b/2 v=ggg
  mvcc_put   k=c   v=hhh
  commit_txn
----
txn: "A" meta={id=00000000 key=/Min pri=0.00000000 epo=0 ts=0.000000011,0 min=0.000000000,0 seq=1} rw=true stat=COMMITTED orig=0.000000011,0 max=0.000000000,0 rts=0.000000000,0 wto=false int=5
data: "k/a"/0.000000011,0 -> /BYTES/abc
data: "k/a/1"/0.000000011,0 -> /BYTES/eee
data: "k/b"/0.000000011,0 -> /BYTES/fff
data: "k/b/2"/0.000000011,0 -> /BYTES/ggg
data: "k/c"/0.000000011,0 -> /BYTES/hhh

# Reads previous writes.

run ok
with t=A
  begin_txn  ts=12
  mvcc_get   k=a
----
get: "k/a" -> /BYTES/abc
txn: "A" meta={id=00000000 key=/Min pri=0.00000000 epo=0 ts=0.000000012,0 min=0.000000000,0 seq=1} rw=true stat=PENDING orig=0.000000012,0 max=0.000000000,0 rts=0.000000000,0 wto=false

run trace ok
with t=A
  mvcc_scan k=a end==b
  mvcc_scan k=a end=+a
  mvcc_scan k=a end=-a
  mvcc_scan k=a end=+b
  mvcc_scan k=a end==b
  mvcc_scan k=a end=-b
  commit_txn
----
>> mvcc_scan k=a end==b t=A
scan: "k/a" -> /BYTES/abc
scan: "k/a/1" -> /BYTES/eee
>> mvcc_scan k=a end=+a t=A
scan: "k/a" -> /BYTES/abc
>> mvcc_scan k=a end=-a t=A
scan: "k/a" -> /BYTES/abc
scan: "k/a/1" -> /BYTES/eee
>> mvcc_scan k=a end=+b t=A
scan: "k/a" -> /BYTES/abc
scan: "k/a/1" -> /BYTES/eee
scan: "k/b" -> /BYTES/fff
>> mvcc_scan k=a end==b t=A
scan: "k/a" -> /BYTES/abc
scan: "k/a/1" -> /BYTES/eee
>> mvcc_scan k=a end=-b t=A
scan: "k/a" -> /BYTES/abc
scan: "k/a/1" -> /BYTES/eee
scan: "k/b" -> /BYTES/fff
scan: "k/b/2" -> /BYTES/ggg
>> commit_txn t=A
txn: "A" meta={id=00000000 key=/Min pri=0.00000000 epo=0 ts=0.000000012,0 min=0.000000000,0 seq=1} rw=true stat=COMMITTED orig=0.000000012,0 max=0.000000000,0 rts=0.000000000,0 wto=false
data: "k/a"/0.000000011,0 -> /BYTES/abc
data: "k/a/1"/0.000000011,0 -> /BYTES/eee
data: "k/b"/0.000000011,0 -> /BYTES/fff
data: "k/b/2"/0.000000011,0 -> /BYTES/ggg
data: "k/c"/0.000000011,0 -> /BYTES/hhh


## A simple txn anchored at some arbitrary key.

run trace ok
with t=A k=a
  begin_txn ts=1
  abort_txn
----
>> begin_txn ts=1 t=A k=a
txn: "A" meta={id=00000000 key="k/a" pri=0.00000000 epo=0 ts=0.000000001,0 min=0.000000000,0 seq=1} rw=true stat=PENDING orig=0.000000001,0 max=0.000000000,0 rts=0.000000000,0 wto=false
>> abort_txn t=A k=a
txn: "A" meta={id=00000000 key="k/a" pri=0.00000000 epo=0 ts=0.000000001,0 min=0.000000000,0 seq=1} rw=true stat=ABORTED orig=0.000000001,0 max=0.000000000,0 rts=0.000000000,0 wto=false
data: "k/a"/0.000000011,0 -> /BYTES/abc
data: "k/a/1"/0.000000011,0 -> /BYTES/eee
data: "k/b"/0.000000011,0 -> /BYTES/fff
data: "k/b/2"/0.000000011,0 -> /BYTES/ggg
data: "k/c"/0.000000011,0 -> /BYTES/hhh
