# Test cases where storeAdmissionStats only populate admittedCount. This is
# the the case where the requests are not providing any byte information.

init
----

prep-admission-stats admitted=0
----
{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}

# Even though above the threshold, the first 60 ticks don't limit the tokens.
set-state l0-bytes=10000 l0-added=1000 l0-files=21 l0-sublevels=21
----
0 ssts, 0 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=0], compacted 0 B [≈0 B], flush tokens 0 B with multiplier 0.000 [≈0 B]; admitting all LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:1000 curL0Bytes:10000 cumWriteStallCount:0 cumIncomingBytes:1000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:0 smoothedCompactionByteTokens:0 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:0 flushUtilTargetFraction:0 totalNumByteTokens:9223372036854775807 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:0} aux:{shouldLog:false curL0NumFiles:0 curL0NumSublevels:0 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:0 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:0 intFlushUtilization:0 intWriteStalls:0}}
tick: 0, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 1, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 2, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 3, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 4, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 5, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 6, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 7, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 8, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 9, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 10, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 11, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 12, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 13, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 14, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 15, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 16, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 17, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 18, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 19, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 20, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 21, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 22, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 23, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 24, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 25, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 26, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 27, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 28, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 29, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 30, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 31, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 32, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 33, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 34, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 35, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 36, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 37, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 38, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 39, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 40, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 41, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 42, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 43, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 44, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 45, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 46, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 47, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 48, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 49, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 50, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 51, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 52, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 53, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 54, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 55, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 56, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 57, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 58, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited
tick: 59, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited

prep-admission-stats admitted=10000
----
{admittedCount:10000 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}

# Delta added is 100,000. The l0-bytes are the same, so compactions removed
# 100,000 bytes. Smoothed removed by compactions is 50,000. Each admitted is
# expected to add 10 bytes. We want to add only 25,000 (half the smoothed
# removed), but smoothing it drops the tokens to 12,500.
set-state l0-bytes=10000 l0-added=101000 l0-files=21 l0-sublevels=21
----
21 ssts, 21 sub-levels, L0 growth 98 KiB: 0 B acc + 98 KiB unacc [≈10 B/req, n=10000], compacted 98 KiB [≈49 KiB], flush tokens 0 B with multiplier 1.500 [≈0 B]; admitting 12 KiB with L0 penalty: +10 B/req LSM growth 98 KiB:  0 B acc + 98 KiB unacc [≈10 B/req, admit≈10 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:10000 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:101000 curL0Bytes:10000 cumWriteStallCount:0 cumIncomingBytes:101000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:50000 smoothedCompactionByteTokens:12500 smoothedIntPerWorkAtAdmitUnaccountedBytes:10 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:10 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:10 smoothedNumFlushTokens:0 flushUtilTargetFraction:1.5 totalNumByteTokens:12500 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:10} aux:{shouldLog:true curL0NumFiles:21 curL0NumSublevels:21 intIncomingBytes:100000 intL0AddedBytes:100000 intL0CompactedBytes:100000 intAdmittedCount:10000 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:0 intFlushUtilization:0 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 10
tick: 0, setAdmittedDoneByteAddition(bytes: 10, l0Bytes 10)setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 1, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 2, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 3, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 4, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 5, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 6, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 7, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 8, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 9, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 10, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 11, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 12, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 13, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 14, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 15, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 16, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 17, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 18, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 19, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 20, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 21, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 22, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 23, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 24, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 25, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 26, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 27, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 28, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 29, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 30, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 31, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 32, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 33, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 34, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 35, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 36, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 37, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 38, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 39, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 40, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 41, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 42, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 43, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 44, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 45, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 46, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 47, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 48, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 49, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 50, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 51, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 52, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 53, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 54, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 55, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 56, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 57, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 58, setAvailableIOTokens: 209 setAvailableElasticDiskTokens: unlimited
tick: 59, setAvailableIOTokens: 169 setAvailableElasticDiskTokens: unlimited

prep-admission-stats admitted=20000
----
{admittedCount:20000 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}

# Same delta as previous but smoothing bumps up the tokens to 25,000.
set-state l0-bytes=10000 l0-added=201000 l0-files=21 l0-sublevels=21
----
21 ssts, 21 sub-levels, L0 growth 98 KiB: 0 B acc + 98 KiB unacc [≈10 B/req, n=10000], compacted 98 KiB [≈73 KiB], flush tokens 0 B with multiplier 1.500 [≈0 B]; admitting 24 KiB with L0 penalty: +10 B/req LSM growth 98 KiB:  0 B acc + 98 KiB unacc [≈10 B/req, admit≈10 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:20000 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:201000 curL0Bytes:10000 cumWriteStallCount:0 cumIncomingBytes:201000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:75000 smoothedCompactionByteTokens:25000 smoothedIntPerWorkAtAdmitUnaccountedBytes:10 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:10 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:10 smoothedNumFlushTokens:0 flushUtilTargetFraction:1.5 totalNumByteTokens:25000 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:10} aux:{shouldLog:true curL0NumFiles:21 curL0NumSublevels:21 intIncomingBytes:100000 intL0AddedBytes:100000 intL0CompactedBytes:100000 intAdmittedCount:10000 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:0 intFlushUtilization:0 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 10
tick: 0, setAdmittedDoneByteAddition(bytes: 10, l0Bytes 10)setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 1, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 2, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 3, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 4, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 5, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 6, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 7, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 8, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 9, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 10, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 11, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 12, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 13, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 14, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 15, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 16, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 17, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 18, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 19, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 20, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 21, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 22, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 23, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 24, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 25, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 26, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 27, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 28, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 29, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 30, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 31, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 32, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 33, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 34, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 35, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 36, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 37, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 38, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 39, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 40, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 41, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 42, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 43, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 44, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 45, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 46, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 47, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 48, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 49, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 50, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 51, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 52, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 53, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 54, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 55, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 56, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 57, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 58, setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited
tick: 59, setAvailableIOTokens: 397 setAvailableElasticDiskTokens: unlimited

# No delta. This used to trigger an overflow bug.
set-state l0-bytes=10000 l0-added=201000 l0-files=21 l0-sublevels=21 print-only-first-tick=true
----
21 ssts, 21 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈10 B/req, n=1], compacted 0 B [≈37 KiB], flush tokens 0 B with multiplier 1.500 [≈0 B]; admitting 21 KiB with L0 penalty: +10 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈10 B/req, admit≈10 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:20000 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:201000 curL0Bytes:10000 cumWriteStallCount:0 cumIncomingBytes:201000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:37500 smoothedCompactionByteTokens:21875 smoothedIntPerWorkAtAdmitUnaccountedBytes:10 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:10 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:10 smoothedNumFlushTokens:0 flushUtilTargetFraction:1.5 totalNumByteTokens:21875 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:10} aux:{shouldLog:false curL0NumFiles:21 curL0NumSublevels:21 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:0 intFlushUtilization:0 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 10
tick: 0, setAdmittedDoneByteAddition(bytes: 10, l0Bytes 10)setAvailableIOTokens: 365 setAvailableElasticDiskTokens: unlimited

prep-admission-stats admitted=30000
----
{admittedCount:30000 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}

# l0-sublevels drops below threshold. We calculate the smoothed values, but
# don't limit the tokens.
set-state l0-bytes=10000 l0-added=501000 l0-files=21 l0-sublevels=20 print-only-first-tick=true
----
21 ssts, 20 sub-levels, L0 growth 293 KiB: 0 B acc + 293 KiB unacc [≈20 B/req, n=10000], compacted 293 KiB [≈165 KiB], flush tokens 0 B with multiplier 1.500 [≈0 B]; admitting all LSM growth 293 KiB:  0 B acc + 293 KiB unacc [≈20 B/req, admit≈20 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:30000 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:501000 curL0Bytes:10000 cumWriteStallCount:0 cumIncomingBytes:501000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:168750 smoothedCompactionByteTokens:160937.5 smoothedIntPerWorkAtAdmitUnaccountedBytes:20 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:20 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:20 smoothedNumFlushTokens:0 flushUtilTargetFraction:1.5 totalNumByteTokens:9223372036854775807 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:20} aux:{shouldLog:false curL0NumFiles:21 curL0NumSublevels:20 intIncomingBytes:300000 intL0AddedBytes:300000 intL0CompactedBytes:300000 intAdmittedCount:10000 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:0 intFlushUtilization:0 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 20
tick: 0, setAdmittedDoneByteAddition(bytes: 20, l0Bytes 20)setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited

# Test cases with more information in storeAdmissionStats.
init
----

prep-admission-stats admitted=0
----
{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}

set-state l0-bytes=1000 l0-added=1000 l0-files=21 l0-sublevels=21 print-only-first-tick=true
----
0 ssts, 0 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=0], compacted 0 B [≈0 B], flush tokens 0 B with multiplier 0.000 [≈0 B]; admitting all LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:1000 curL0Bytes:1000 cumWriteStallCount:0 cumIncomingBytes:1000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:0 smoothedCompactionByteTokens:0 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:0 flushUtilTargetFraction:0 totalNumByteTokens:9223372036854775807 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:0} aux:{shouldLog:false curL0NumFiles:0 curL0NumSublevels:0 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:0 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:0 intFlushUtilization:0 intWriteStalls:0}}
tick: 0, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited

# L0 will see an addition of 200,000 bytes. 180,000 bytes were mentioned by
# the admitted requests, but 30,000 went into levels below L0. So 150,000 are
# accounted for.
prep-admission-stats admitted=10 admitted-bytes=180000 ingested-bytes=50000 ingested-into-l0=20000
----
{admittedCount:10 atAdmitAccountedBytes:180000 atAdmittedDoneAccountedBytes:180000 atAdmittedDoneAccountedL0Bytes:150000}

set-state l0-bytes=1000 l0-added=201000 l0-files=21 l0-sublevels=21 print-only-first-tick=true
----
21 ssts, 21 sub-levels, L0 growth 195 KiB: 146 KiB acc + 49 KiB unacc [≈4.9 KiB/req, n=10], compacted 195 KiB [≈98 KiB], flush tokens 0 B with multiplier 1.500 [≈0 B]; admitting 24 KiB with L0 penalty: +2.0 KiB/req LSM growth 195 KiB:  176 KiB acc + 20 KiB unacc [≈2.0 KiB/req, admit≈2.0 KiB/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:10 atAdmitAccountedBytes:180000 atAdmittedDoneAccountedBytes:180000 atAdmittedDoneAccountedL0Bytes:150000} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:201000 curL0Bytes:1000 cumWriteStallCount:0 cumIncomingBytes:201000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:100000 smoothedCompactionByteTokens:25000 smoothedIntPerWorkAtAdmitUnaccountedBytes:2000 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:2000 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:5000 smoothedNumFlushTokens:0 flushUtilTargetFraction:1.5 totalNumByteTokens:25000 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:2000} aux:{shouldLog:true curL0NumFiles:21 curL0NumSublevels:21 intIncomingBytes:200000 intL0AddedBytes:200000 intL0CompactedBytes:200000 intAdmittedCount:10 intAtAdmitAccountedBytes:180000 intAtAdmittedDoneAccountedBytes:180000 intAtAdmittedDoneAccountedL0Bytes:150000 intFlushTokens:0 intFlushUtilization:0 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 2000
tick: 0, setAdmittedDoneByteAddition(bytes: 2000, l0Bytes 5000)setAvailableIOTokens: 417 setAvailableElasticDiskTokens: unlimited

# L0 will see an addition of 20,000 bytes, all of which are accounted for.
prep-admission-stats admitted=20 admitted-bytes=200000 ingested-bytes=50000 ingested-into-l0=20000
----
{admittedCount:20 atAdmitAccountedBytes:200000 atAdmittedDoneAccountedBytes:200000 atAdmittedDoneAccountedL0Bytes:170000}

set-state l0-bytes=1000 l0-added=221000 l0-files=21 l0-sublevels=21 print-only-first-tick=true
----
21 ssts, 21 sub-levels, L0 growth 20 KiB: 20 KiB acc + 0 B unacc [≈2.4 KiB/req, n=10], compacted 20 KiB [≈59 KiB], flush tokens 0 B with multiplier 1.500 [≈0 B]; admitting 27 KiB with L0 penalty: +1000 B/req LSM growth 20 KiB:  20 KiB acc + 0 B unacc [≈1000 B/req, admit≈1000 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:20 atAdmitAccountedBytes:200000 atAdmittedDoneAccountedBytes:200000 atAdmittedDoneAccountedL0Bytes:170000} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:221000 curL0Bytes:1000 cumWriteStallCount:0 cumIncomingBytes:221000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:60000 smoothedCompactionByteTokens:27500 smoothedIntPerWorkAtAdmitUnaccountedBytes:1000 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:1000 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:2500 smoothedNumFlushTokens:0 flushUtilTargetFraction:1.5 totalNumByteTokens:27500 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1000} aux:{shouldLog:true curL0NumFiles:21 curL0NumSublevels:21 intIncomingBytes:20000 intL0AddedBytes:20000 intL0CompactedBytes:20000 intAdmittedCount:10 intAtAdmitAccountedBytes:20000 intAtAdmittedDoneAccountedBytes:20000 intAtAdmittedDoneAccountedL0Bytes:20000 intFlushTokens:0 intFlushUtilization:0 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 1000
tick: 0, setAdmittedDoneByteAddition(bytes: 1000, l0Bytes 2500)setAvailableIOTokens: 459 setAvailableElasticDiskTokens: unlimited

# L0 will see an addition of 20,000 bytes, but we think we have added 100,000
# bytes to L0. We don't let unaccounted bytes become negative.
prep-admission-stats admitted=30 admitted-bytes=300000 ingested-bytes=50000 ingested-into-l0=20000
----
{admittedCount:30 atAdmitAccountedBytes:300000 atAdmittedDoneAccountedBytes:300000 atAdmittedDoneAccountedL0Bytes:270000}

set-state l0-bytes=1000 l0-added=241000 l0-files=21 l0-sublevels=21 print-only-first-tick=true
----
21 ssts, 21 sub-levels, L0 growth 20 KiB: 98 KiB acc + -78 KiB unacc [≈1.2 KiB/req, n=10], compacted 20 KiB [≈39 KiB], flush tokens 0 B with multiplier 1.500 [≈0 B]; admitting 23 KiB with L0 penalty: +500 B/req LSM growth 20 KiB:  98 KiB acc + -78 KiB unacc [≈500 B/req, admit≈500 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:30 atAdmitAccountedBytes:300000 atAdmittedDoneAccountedBytes:300000 atAdmittedDoneAccountedL0Bytes:270000} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:241000 curL0Bytes:1000 cumWriteStallCount:0 cumIncomingBytes:241000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:40000 smoothedCompactionByteTokens:23750 smoothedIntPerWorkAtAdmitUnaccountedBytes:500 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:500 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:1250 smoothedNumFlushTokens:0 flushUtilTargetFraction:1.5 totalNumByteTokens:23750 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:500} aux:{shouldLog:true curL0NumFiles:21 curL0NumSublevels:21 intIncomingBytes:20000 intL0AddedBytes:20000 intL0CompactedBytes:20000 intAdmittedCount:10 intAtAdmitAccountedBytes:100000 intAtAdmittedDoneAccountedBytes:100000 intAtAdmittedDoneAccountedL0Bytes:100000 intFlushTokens:0 intFlushUtilization:0 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 500
tick: 0, setAdmittedDoneByteAddition(bytes: 500, l0Bytes 1250)setAvailableIOTokens: 396 setAvailableElasticDiskTokens: unlimited

# Test case with flush tokens.
init
----

prep-admission-stats admitted=0
----
{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}

set-state l0-bytes=10000 l0-added=1000 l0-files=1 l0-sublevels=1 print-only-first-tick=true
----
0 ssts, 0 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=0], compacted 0 B [≈0 B], flush tokens 0 B with multiplier 0.000 [≈0 B]; admitting all LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:1000 curL0Bytes:10000 cumWriteStallCount:0 cumIncomingBytes:1000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:0 smoothedCompactionByteTokens:0 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:0 flushUtilTargetFraction:0 totalNumByteTokens:9223372036854775807 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:0} aux:{shouldLog:false curL0NumFiles:0 curL0NumSublevels:0 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:0 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:0 intFlushUtilization:0 intWriteStalls:0}}
tick: 0, setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited

# Flush loop utilization is too low for the interval flush tokens to
# contribute to the smoothed value, or for tokens to become limited.
set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=1000 flush-work-sec=2 flush-idle-sec=100 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 9.8 KiB: 0 B acc + 9.8 KiB unacc [≈0 B/req, n=1], compacted 9.8 KiB [≈4.9 KiB], flush tokens 7.3 KiB with multiplier 1.500 [≈0 B]; admitting all LSM growth 9.8 KiB:  0 B acc + 9.8 KiB unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:0 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:5000 smoothedCompactionByteTokens:5000 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:0 flushUtilTargetFraction:1.5 totalNumByteTokens:9223372036854775807 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:false curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:10000 intL0AddedBytes:10000 intL0CompactedBytes:10000 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:7500 intFlushUtilization:0.0196078431372549 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited

# Flush loop utilization is high enough.
set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=1000 flush-work-sec=2 flush-idle-sec=10 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈2.4 KiB], flush tokens 7.3 KiB with multiplier 1.500 [≈11 KiB]; admitting 11 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:0 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:2500 smoothedCompactionByteTokens:2500 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:7500 flushUtilTargetFraction:1.5 totalNumByteTokens:11250 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:false curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:7500 intFlushUtilization:0.16666666666666666 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 188 setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=1 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈1.2 KiB], flush tokens 73 KiB with multiplier 1.475 [≈59 KiB]; admitting 59 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:1 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:1250 smoothedCompactionByteTokens:1250 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:41250 flushUtilTargetFraction:1.475 totalNumByteTokens:60843 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:true curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:1}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1015 setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=3 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈625 B], flush tokens 73 KiB with multiplier 1.425 [≈81 KiB]; admitting 81 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:3 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:625 smoothedCompactionByteTokens:625 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:58125 flushUtilTargetFraction:1.4250000000000003 totalNumByteTokens:82828 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:true curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:2}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1381 setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=8 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈312 B], flush tokens 73 KiB with multiplier 1.350 [≈88 KiB]; admitting 88 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:8 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:312 smoothedCompactionByteTokens:312.5 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:66562.5 flushUtilTargetFraction:1.3500000000000005 totalNumByteTokens:89859 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:true curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:5}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1498 setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=9 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈156 B], flush tokens 73 KiB with multiplier 1.325 [≈92 KiB]; admitting 92 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:9 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:156 smoothedCompactionByteTokens:156.25 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:70781.25 flushUtilTargetFraction:1.3250000000000006 totalNumByteTokens:93785 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:true curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:1}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1564 setAvailableElasticDiskTokens: unlimited


set-min-flush-util percent=130
----

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=10 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈78 B], flush tokens 73 KiB with multiplier 1.300 [≈92 KiB]; admitting 92 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:10 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:78 smoothedCompactionByteTokens:78.125 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:72890.625 flushUtilTargetFraction:1.3000000000000007 totalNumByteTokens:94757 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:true curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:1}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1580 setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=11 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈39 B], flush tokens 73 KiB with multiplier 1.300 [≈94 KiB]; admitting 94 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:11 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:39 smoothedCompactionByteTokens:39.0625 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:73945.3125 flushUtilTargetFraction:1.3000000000000007 totalNumByteTokens:96128 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:false curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:1}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1603 setAvailableElasticDiskTokens: unlimited

set-min-flush-util percent=135
----

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=12 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈19 B], flush tokens 73 KiB with multiplier 1.350 [≈98 KiB]; admitting 98 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:12 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:19 smoothedCompactionByteTokens:19.53125 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:74472.65625 flushUtilTargetFraction:1.35 totalNumByteTokens:100538 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:false curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:1}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1676 setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=100 write-stall-count=13 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈9 B], flush tokens 73 KiB with multiplier 1.350 [≈98 KiB]; admitting all LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:13 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:9 smoothedCompactionByteTokens:9.765625 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:74472.65625 flushUtilTargetFraction:1.35 totalNumByteTokens:9223372036854775807 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:false curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.0196078431372549 intWriteStalls:1}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: unlimited setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=13 print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈4 B], flush tokens 73 KiB with multiplier 1.350 [≈98 KiB]; admitting 98 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:13 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:4 smoothedCompactionByteTokens:4.8828125 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:74736.328125 flushUtilTargetFraction:1.35 totalNumByteTokens:100894 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:false curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1682 setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=13 all-tokens-used=true print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈2 B], flush tokens 73 KiB with multiplier 1.350 [≈99 KiB]; admitting 99 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:13 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:2 smoothedCompactionByteTokens:2.44140625 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:74868.1640625 flushUtilTargetFraction:1.35 totalNumByteTokens:101072 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:false curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1685 setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=13 all-tokens-used=true print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈1 B], flush tokens 73 KiB with multiplier 1.375 [≈101 KiB]; admitting 101 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:13 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:1 smoothedCompactionByteTokens:1.220703125 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:74934.08203125 flushUtilTargetFraction:1.375 totalNumByteTokens:103034 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:true curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1718 setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=13 all-tokens-used=true print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈0 B], flush tokens 73 KiB with multiplier 1.400 [≈102 KiB]; admitting 102 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:13 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:0 smoothedCompactionByteTokens:0.6103515625 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:74967.041015625 flushUtilTargetFraction:1.4 totalNumByteTokens:104953 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:true curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:0}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1750 setAvailableElasticDiskTokens: unlimited

set-state l0-bytes=10000 l0-added=11000 l0-files=1 l0-sublevels=1 flush-bytes=10000 flush-work-sec=2 flush-idle-sec=10 write-stall-count=14 all-tokens-used=true print-only-first-tick=true
----
1 ssts, 1 sub-levels, L0 growth 0 B: 0 B acc + 0 B unacc [≈0 B/req, n=1], compacted 0 B [≈0 B], flush tokens 73 KiB with multiplier 1.375 [≈101 KiB]; admitting 101 KiB with L0 penalty: +1 B/req LSM growth 0 B:  0 B acc + 0 B unacc [≈0 B/req, admit≈0 B/req] 
{ioLoadListenerState:{cumAdmissionStats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}] cumL0AddedBytes:11000 curL0Bytes:10000 cumWriteStallCount:14 cumIncomingBytes:11000 diskStats:{BytesRead:0 BytesWritten:0 ProvisionedBandwidth:1073741824} smoothedIntL0CompactedBytes:0 smoothedCompactionByteTokens:0.30517578125 smoothedIntPerWorkAtAdmitUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedBytes:0 smoothedIntPerWorkAtAdmittedDoneUnaccountedL0Bytes:0 smoothedNumFlushTokens:74983.5205078125 flushUtilTargetFraction:1.375 totalNumByteTokens:103102 tokensAllocated:0 tokensUsed:0 elasticDiskTokens:9223372036854775807 elasticDiskTokensAllocated:0} requestEstimates:{atAdmitWorkByteAddition:1} aux:{shouldLog:true curL0NumFiles:1 curL0NumSublevels:1 intIncomingBytes:0 intL0AddedBytes:0 intL0CompactedBytes:0 intAdmittedCount:1 intAtAdmitAccountedBytes:0 intAtAdmittedDoneAccountedBytes:0 intAtAdmittedDoneAccountedL0Bytes:0 intFlushTokens:75000 intFlushUtilization:0.16666666666666666 intWriteStalls:1}}
store-request-estimates: atAdmitWorkByteAddition: 1
tick: 0, setAdmittedDoneByteAddition(bytes: 1, l0Bytes 1)setAvailableIOTokens: 1719 setAvailableElasticDiskTokens: unlimited
