init
----

print
----
closed epoch: 0 tenantHeap len: 0
stats:[{admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}]
estimates:{atAdmitWorkByteAddition:1}

set-try-get-return-value v=true
----

admit id=1 tenant=53 priority=0 create-time-millis=1 bypass=false
----
tryGet: returning true
id 1: admit succeeded with handle {tenantID:{InternalValue:53} writeBytes:0 writeTokens:1 ingestRequest:false admissionEnabled:true workClass:0}

work-done id=1
----
storeWriteDone: tokens: 1 ac: 0 ac-L0: 0

set-store-request-estimates work-bytes-addition=100
----
closed epoch: 0 tenantHeap len: 0
 tenant-id: 53 used: 1, w: 1, fifo: -128
stats:[{admittedCount:1 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}]
estimates:{atAdmitWorkByteAddition:100}

admit id=2 tenant=55 priority=0 create-time-millis=1 bypass=false
----
tryGet: returning true
id 2: admit succeeded with handle {tenantID:{InternalValue:55} writeBytes:0 writeTokens:100 ingestRequest:false admissionEnabled:true workClass:0}

admit id=3 tenant=53 priority=0 create-time-millis=1 bypass=false write-bytes=1000000 ingest-request=true
----
tryGet: returning true
id 3: admit succeeded with handle {tenantID:{InternalValue:53} writeBytes:1000000 writeTokens:1000100 ingestRequest:true admissionEnabled:true workClass:0}

print
----
closed epoch: 0 tenantHeap len: 0
 tenant-id: 53 used: 1000101, w: 1, fifo: -128
 tenant-id: 55 used: 100, w: 1, fifo: -128
stats:[{admittedCount:1 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}]
estimates:{atAdmitWorkByteAddition:100}

set-try-get-return-value v=false
----

admit id=4 tenant=57 priority=0 create-time-millis=1 bypass=false write-bytes=2000 ingest-request=false
----
tryGet: returning false

work-done id=2
----
storeWriteDone: tokens: 100 ac: 0 ac-L0: 0

print
----
closed epoch: 0 tenantHeap len: 1 top tenant: 57
 tenant-id: 53 used: 1000101, w: 1, fifo: -128
 tenant-id: 55 used: 100, w: 1, fifo: -128
 tenant-id: 57 used: 0, w: 1, fifo: -128 waiting work heap: [0: pri: 0, ct: 1, epoch: 0, qt: 0]
stats:[{admittedCount:2 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}]
estimates:{atAdmitWorkByteAddition:100}

granted
----
continueGrantChain 0
id 4: admit succeeded with handle {tenantID:{InternalValue:57} writeBytes:2000 writeTokens:2100 ingestRequest:false admissionEnabled:true workClass:0}
granted: returned 2100

work-done id=3 ingested-into-l0=20000
----
storeWriteDone: tokens: 1000100 ac: 1000000 ac-L0: 20000

print
----
closed epoch: 0 tenantHeap len: 0
 tenant-id: 53 used: 1000101, w: 1, fifo: -128
 tenant-id: 55 used: 100, w: 1, fifo: -128
 tenant-id: 57 used: 2100, w: 1, fifo: -128
stats:[{admittedCount:3 atAdmitAccountedBytes:1000000 atAdmittedDoneAccountedBytes:1000000 atAdmittedDoneAccountedL0Bytes:20000} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}]
estimates:{atAdmitWorkByteAddition:100}

set-store-request-estimates work-bytes-addition=10000
----
closed epoch: 0 tenantHeap len: 0
 tenant-id: 53 used: 1000101, w: 1, fifo: -128
 tenant-id: 55 used: 100, w: 1, fifo: -128
 tenant-id: 57 used: 2100, w: 1, fifo: -128
stats:[{admittedCount:3 atAdmitAccountedBytes:1000000 atAdmittedDoneAccountedBytes:1000000 atAdmittedDoneAccountedL0Bytes:20000} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}]
estimates:{atAdmitWorkByteAddition:10000}

work-done id=4
----
storeWriteDone: tokens: 2100 ac: 2000 ac-L0: 2000

print
----
closed epoch: 0 tenantHeap len: 0
 tenant-id: 53 used: 1000101, w: 1, fifo: -128
 tenant-id: 55 used: 100, w: 1, fifo: -128
 tenant-id: 57 used: 2100, w: 1, fifo: -128
stats:[{admittedCount:4 atAdmitAccountedBytes:1002000 atAdmittedDoneAccountedBytes:1002000 atAdmittedDoneAccountedL0Bytes:22000} {admittedCount:0 atAdmitAccountedBytes:0 atAdmittedDoneAccountedBytes:0 atAdmittedDoneAccountedL0Bytes:0}]
estimates:{atAdmitWorkByteAddition:10000}
