// Copyright 2018 The Cockroach Authors.
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     http://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
// implied. See the License for the specific language governing
// permissions and limitations under the License.

// metric.proto requires proto2 to import io.prometheus.client.MetricType
syntax = "proto2";
package cockroach.util.metric;
option go_package = "metric";

import "gogoproto/gogo.proto";
import "prometheus/client_model/metrics.proto";

message LabelPair {
  optional string name  = 1;
  optional string value = 2;
}

// Units describe the unit of data collected.
enum DisplayUnit {
  // Unset expresses that the metric's DisplayUnit wasn't explicitly set.
  Unset = 0;
  // Count expresses that the metric represents a count.
  Count = 1;
  // Bytes expresses that the metric measures bytes.
  Bytes = 2;
  // Nanoseconds expresses that the metric measures nanoseconds.
  Nanoseconds = 3;
  // Timestamp expresses that the metric represents time since the Unix epoch.
  Timestamp = 4;
  // Percent expresses that the metric represents a percentage value.
  Percent = 5;
  // Const expresses that the metric represents a constant value.
  Const = 6;
}

// Metadata holds metadata about a metric. It must be embedded in
// each metric object. It's used to export information about the
// metric to Prometheus and for Admin UI charts.
message Metadata {
  required string name = 1 [(gogoproto.nullable) = false];
  required string help = 2 [(gogoproto.nullable) = false];
  required string unit = 3 [(gogoproto.nullable) = false];
  required DisplayUnit displayUnit = 4 [(gogoproto.nullable) = false];
  optional io.prometheus.client.MetricType metricType = 5 [(gogoproto.nullable) = false];
  repeated LabelPair labels = 6;
}