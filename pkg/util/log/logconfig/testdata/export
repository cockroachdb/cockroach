# Default config
yaml
----
@startuml
left to right direction
component sources {
() DEV
() OPS
() HEALTH
() STORAGE
() SESSIONS
() USER_ADMIN
() PRIVILEGES
() SENSITIVE_ACCESS
() SQL_EXEC
() SQL_PERF
() SQL_INTERNAL_PERF
cloud stray as "stray\nerrors"
}
queue stderr
card p__1 as "format:crdb-v1"
artifact files {
 folder "/default-dir" {
  file f1 as "cockroach.log"
  file stderrfile as "cockroach-stderr.log"
 }
}
DEV --> p__1
OPS --> p__1
HEALTH --> p__1
STORAGE --> p__1
SESSIONS --> p__1
USER_ADMIN --> p__1
PRIVILEGES --> p__1
SENSITIVE_ACCESS --> p__1
SQL_EXEC --> p__1
SQL_PERF --> p__1
SQL_INTERNAL_PERF --> p__1
p__1 --> f1
stray --> stderrfile
@enduml
# http://www.plantuml.com/plantuml/uml/L9BDRgCm58NtVeehLZCBPfJjB4P1YPiWfK0nHLrKGgv_4bI2qukfL5Lvzyg6o67bSyyv_7sNzM0vsl7SaKvf2zO0jiUJ1TcY4hOrFH7cV36zwYqCPaIX1lWcltx3bjRko0lcZZrD3jNUALRbPRAZNbB6qZppXMT6ooRPFgQPcueohTC3tL4szJAMLcbDcsIpeMpodWuDVQ6Rcove-N3JQLRHCajcKtHcb31Ov5_01uYyUkqLei4X8bVoCQfHmM2bGYI2euHBqwnyLniyS_jFe7oBFrSHuMXRpOK5tNR-Gq6RJYg4wAzKce-TZMMBaGjy1VHq7s74EnekJdywSunkuVH8BnUbU0hcxfLSoPRM4CV__OkHl61XcC26USPxPyoGWnDG1oy0lxzoYVqkcU4l7KTxwImM4IAFrqrwHQQzk27G86lLI_VB_GG00F__

# Capture everything to one file with sync and warnings only to stderr.
yaml only-channels=DEV,SESSIONS
sinks:
  file-groups:
    everything:
      sync-writes: true
      redact: true
      channels: ALL
  stderr:
    filter: WARNING
  fluent-servers:
    local:
      channels: SESSIONS
      redactable: false
      address: localhost:5170
----
@startuml
left to right direction
component sources {
() DEV
() SESSIONS
cloud stray as "stray\nerrors"
}
queue stderr
card sync2 as "sync"
card p__1 as "redact"
card p__2 as "format:crdb-v1"
card p__3 as "strip"
card p__4 as "format:json-fluent-compact"
card p__5 as "format:crdb-v1-tty"
card p__6 as "filter:W"
artifact files {
 folder "/default-dir" {
  file f1 as "cockroach-everything.log"
  file stderrfile as "cockroach-stderr.log"
 }
}
cloud network {
 queue s__local as "fluent: tcp:localhost:5170"
}
DEV --> p__2
SESSIONS --> p__2
p__1 --> sync2
p__2 --> p__1
sync2 --> f1
stray --> stderrfile
SESSIONS --> p__4
p__3 ..> s__local
p__4 --> p__3
DEV --> p__6
SESSIONS --> p__6
p__5 --> stderr
p__6 --> p__5
@enduml
# http://www.plantuml.com/plantuml/uml/R98nRzim48Nt-nK7JUqWjsfY5z0GP8Y7BkrW85qA62nvjDdGf7eyfH0A__U2f1mbS2UHxpsIT_VfFebY6KyUF5b1YSZkS1GqZacBYm5qF0qnK11CSMHD2V_2k_Vui7tCdzrsj_loxUiEj8-ZmIIi9bG9cxBw4OWvSchW3Bz76WcJ6686hTXWceB-LCDJq4qLX_s-AngJKLeMjIPjv9EINhFvsJvtYtjpUTGDYtZx-iYl54Dh_KX1sjpJcylN_xcy5PcMnAOcd1VY_di3YiLPfGMjysKcQACtnDXyC6JLwAKrZfjib0ZQsfQE-ecZqiUMdeadERfmMFbuQ2wvEg6oV9klnfmzmtaUUI3v4_afFpIFUB_tKIjV2ouDzoXww8jwZ4dwTVVvOsRoi7t4jhqhuuKBoaKfBFAka882OJOxgFJordPGkPVeI_bN5zv20RLQtRtK28NIxD-yhcTpTNm31TJo21Giixk6Umec_yZ_0W00__y0
