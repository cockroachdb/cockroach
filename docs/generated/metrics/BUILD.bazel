genrule(
    name = "metrics",
    outs = ["metrics_generated.yaml"],
    cmd = "$(location //pkg/cmd/cockroach-short) gen metric-list --logtostderr=NONE > $@",
    tools = ["//pkg/cmd/cockroach-short"],
    visibility = [
        ":__pkg__",
        "//pkg/gen:__pkg__",
        "//pkg/roachprod/agents/opentelemetry:__pkg__",
    ],
)

# Expose the committed metrics.yaml source file
exports_files(
    ["metrics.yaml"],
    visibility = ["//pkg/cli:__pkg__"],
)
