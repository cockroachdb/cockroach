statement ok
CREATE TABLE customers (id INT PRIMARY KEY, email STRING UNIQUE);

statement ok
INSERT INTO customers VALUES (1, 'a@'), (2, 'b@');

statement ok
CREATE TABLE products (
  sku STRING PRIMARY KEY,
  upc STRING UNIQUE,
  vendor STRING
);

statement ok
INSERT INTO products VALUES ('VP-W9QH-W44L', '867072000006', 'Dave'), ('780', '885155001450', 'iRobot');

statement error referenced table "productz" not found
CREATE TABLE orders (
  id INT PRIMARY KEY,
  product STRING REFERENCES productz,
  customer INT REFERENCES customers (id),
  INDEX (product),
  INDEX (customer)
);

statement error referenced table "customerz" not found
CREATE TABLE orders (
  id INT PRIMARY KEY,
  product STRING REFERENCES products,
  customer INT REFERENCES customerz (id),
  INDEX (product),
  INDEX (customer)
);


statement error foreign key requires a unique index on products.vendor
CREATE TABLE orders (
  id INT PRIMARY KEY,
  product STRING REFERENCES products (vendor),
  customer INT REFERENCES customers,
  INDEX (product),
  INDEX (customer)
);


statement error type of "customer" \(INT\) does not match foreign key "customers"."email" \(STRING\)
CREATE TABLE orders (
  id INT PRIMARY KEY,
  product STRING REFERENCES products,
  customer INT REFERENCES customers (email),
  INDEX (product),
  INDEX (customer)
);

statement error foreign key column "product" must be the prefix of an index
CREATE TABLE orders (
  id INT PRIMARY KEY,
  product STRING REFERENCES products,
  customer INT REFERENCES customers (email),
  INDEX (customer)
);

statement ok
CREATE TABLE orders (
  id INT PRIMARY KEY,
  product STRING REFERENCES products,
  customer INT REFERENCES customers (id),
  INDEX (product),
  INDEX (customer)
);

statement ok
TRUNCATE TABLE products

statement ok
INSERT INTO products VALUES ('VP-W9QH-W44L', '867072000006', 'Dave'), ('780', '885155001450', 'iRobot')

statement ok
INSERT INTO orders VALUES (1, '780', 1)

statement error cannot trucate because a non-empty table somewhere has an FK
TRUNCATE TABLE products

statement ok
TRUNCATE TABLE orders, products
